{
  "version": "5.0.1-beta.2",
  "timestamp": "2026-02-17T00:00:00Z",
  "skillSet": "comments",
  "hasDeltas": true,
  "deltas": [
    {
      "id": "delta-001",
      "type": "new_feature",
      "releaseNoteText": "[Comments]: Added `enableAttachmentDownload()` / `disableAttachmentDownload()` API methods and an `attachmentDownload` prop on `<VeltComments>` to control whether clicking an attachment triggers a file download. A new `attachmentDownloadClicked` event fires on every attachment click regardless of the download setting, letting you intercept clicks for custom viewers, analytics, or access control. Download is enabled by default so there is no breaking change.",
      "releaseNoteVersion": "5.0.1-beta.2",
      "skillTarget": "comments",
      "action": "create_rule",
      "targetFile": "rules/shared/attach/attach-download-control.md",
      "targetSection": null,
      "summary": "Create a new rule documenting the attachment download control API: the `attachmentDownload` prop on `<VeltComments>`, the `enableAttachmentDownload()` and `disableAttachmentDownload()` methods on `commentElement`, and the `attachmentDownloadClicked` event with its `AttachmentDownloadClickedEvent` interface shape. Replace the existing `attach/README.md` note that file attachments were 'not found / unknown' â€” these APIs are now fully documented.",
      "details": {
        "apiName": "enableAttachmentDownload / disableAttachmentDownload / attachmentDownloadClicked",
        "apiType": "method",
        "signature": "enableAttachmentDownload(): void\ndisableAttachmentDownload(): void",
        "parameters": [
          {
            "name": "attachmentDownload",
            "apiType": "prop",
            "componentProp": "<VeltComments attachmentDownload={false} />",
            "htmlAttribute": "<velt-comments attachment-download=\"false\"></velt-comments>",
            "type": "boolean",
            "required": false,
            "default": true,
            "description": "Controls whether clicking an attachment triggers a file download. Default is true (download enabled)."
          }
        ],
        "returnType": "void",
        "events": [
          {
            "name": "attachmentDownloadClicked",
            "interface": "AttachmentDownloadClickedEvent",
            "description": "Fires on every attachment click regardless of the download setting. Use to intercept clicks for custom viewers, analytics, or access control.",
            "interfaceShape": {
              "annotationId": "string",
              "commentAnnotation": "CommentAnnotation",
              "attachment": "Attachment",
              "metadata": "VeltEventMetadata (optional)"
            }
          }
        ],
        "codeExample": "// React: Declarative prop\n<VeltComments attachmentDownload={false} />\n\n// React: API methods\nconst commentElement = client.getCommentElement();\ncommentElement.enableAttachmentDownload();\ncommentElement.disableAttachmentDownload();\n\n// React: Listening to the event\nconst handleAttachmentDownloadClicked = useCommentEventCallback('attachmentDownloadClicked');\nuseEffect(() => {\n  if (handleAttachmentDownloadClicked) {\n    console.log('Attachment clicked:', handleAttachmentDownloadClicked.attachment.attachmentId);\n    console.log('Annotation ID:', handleAttachmentDownloadClicked.annotationId);\n  }\n}, [handleAttachmentDownloadClicked]);\n\n// Other Frameworks: Attribute\n<velt-comments attachment-download=\"false\"></velt-comments>\n\n// Other Frameworks: API methods\nconst commentElement = Velt.getCommentElement();\ncommentElement.enableAttachmentDownload();\ncommentElement.disableAttachmentDownload();\n\n// Other Frameworks: Event subscription\ncommentElement.on('attachmentDownloadClicked').subscribe((event) => {\n  console.log('Attachment clicked:', event.attachment.attachmentId);\n  console.log('Annotation ID:', event.annotationId);\n});"
      },
      "confidence": "high",
      "ambiguityNote": null
    },
    {
      "id": "delta-002",
      "type": "behavior_change",
      "releaseNoteText": "[Comments]: The wireframe template for the resolve and unresolve buttons in the assignee banner is now nested inside the button component rather than wrapping it, giving custom wireframes direct access to button state, styling, and event handlers. The affected wireframes are `velt-comment-dialog-assignee-banner-resolve-button-wireframe` and `velt-comment-dialog-assignee-banner-unresolve-button-wireframe`.",
      "releaseNoteVersion": "5.0.1-beta.2",
      "skillTarget": "comments",
      "action": "update_rule",
      "targetFile": "rules/shared/ui/ui-wireframes.md",
      "targetSection": "Key Wireframe Components",
      "summary": "Update the wireframes rule to document that the resolve and unresolve button wireframes within `AssigneeBanner` are now nested inside the button component (not wrapping it), and add the two affected wireframe names (`velt-comment-dialog-assignee-banner-resolve-button-wireframe`, `velt-comment-dialog-assignee-banner-unresolve-button-wireframe`) to the dialog component reference table with a note on their nesting pattern.",
      "details": {
        "apiName": "velt-comment-dialog-assignee-banner-resolve-button-wireframe / velt-comment-dialog-assignee-banner-unresolve-button-wireframe",
        "apiType": "prop",
        "signature": "VeltCommentDialogWireframe.AssigneeBanner.ResolveButton\nVeltCommentDialogWireframe.AssigneeBanner.UnresolveButton",
        "parameters": [],
        "returnType": null,
        "codeExample": "// The wireframe template is now nested INSIDE the button component,\n// not wrapping it. This gives the template direct access to button\n// state, styling, and event handlers.\n\n// React (correct nesting pattern after v5.0.1-beta.2)\n<VeltCommentDialogWireframe.AssigneeBanner>\n  <VeltCommentDialogWireframe.AssigneeBanner.ResolveButton>\n    {/* Custom content rendered inside the button */}\n  </VeltCommentDialogWireframe.AssigneeBanner.ResolveButton>\n  <VeltCommentDialogWireframe.AssigneeBanner.UnresolveButton>\n    {/* Custom content rendered inside the button */}\n  </VeltCommentDialogWireframe.AssigneeBanner.UnresolveButton>\n</VeltCommentDialogWireframe.AssigneeBanner>\n\n// HTML equivalents\n// velt-comment-dialog-assignee-banner-resolve-button-wireframe\n// velt-comment-dialog-assignee-banner-unresolve-button-wireframe"
      },
      "confidence": "high",
      "ambiguityNote": null
    },
    {
      "id": "delta-003",
      "type": "new_feature",
      "releaseNoteText": "[Comments]: Added CSS classes to comment composer attachment components to reflect loading and edit-mode states: `.velt-composer-attachment-container`, `.velt-composer-attachment--loading`, and `.velt-composer-attachment--edit-mode`.",
      "releaseNoteVersion": "5.0.1-beta.2",
      "skillTarget": "comments",
      "action": "update_rule",
      "targetFile": "rules/shared/attach/attach-download-control.md",
      "targetSection": "CSS State Classes",
      "summary": "Add a CSS state classes section to the new attachment rule (created in delta-001) documenting the three composer attachment CSS classes: `.velt-composer-attachment-container` (base container), `.velt-composer-attachment--loading` (applied while attachment is uploading/loading), and `.velt-composer-attachment--edit-mode` (applied when the comment is in edit mode). These classes allow styling attachment states without disabling Shadow DOM.",
      "details": {
        "apiName": ".velt-composer-attachment-container / .velt-composer-attachment--loading / .velt-composer-attachment--edit-mode",
        "apiType": "prop",
        "signature": null,
        "parameters": [
          {
            "name": ".velt-composer-attachment-container",
            "description": "Base CSS class on the composer attachment wrapper element."
          },
          {
            "name": ".velt-composer-attachment--loading",
            "description": "Applied to the attachment container while the attachment is in a loading/uploading state."
          },
          {
            "name": ".velt-composer-attachment--edit-mode",
            "description": "Applied to the attachment container when the comment composer is in edit mode."
          }
        ],
        "returnType": null,
        "codeExample": "/* Target attachment container in all states */\n.velt-composer-attachment-container {\n  display: flex;\n  gap: 8px;\n}\n\n/* Show loading spinner while uploading */\n.velt-composer-attachment--loading {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n/* Adjust layout in edit mode */\n.velt-composer-attachment--edit-mode {\n  border: 1px solid var(--velt-edit-color);\n}"
      },
      "confidence": "medium",
      "ambiguityNote": "The release note confirms these classes exist and their semantic meaning (loading state, edit-mode state), but does not specify exact DOM element hierarchy or whether shadowDom must be disabled to target them. Agent-8 should include a note that Shadow DOM may need to be disabled (`shadowDom={false}`) or CSS custom properties used, consistent with the pattern already documented in ui-comment-dialog.md."
    }
  ]
}
