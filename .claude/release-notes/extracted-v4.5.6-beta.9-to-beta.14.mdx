Version Range: v4.5.6-beta.9 to v4.5.6-beta.14

## New Features

- [**Notifications**]: Added `triggerNotification` flag to the [Add Comment Annotations REST API](/api-reference/rest-apis/v2/comments-feature/comment-annotations/add-comment-annotations). When enabled, adding comments via the REST API will trigger in-app notifications, email notifications to relevant users and also trigger webhooks matching the SDK's native notification behavior.

- [**Access Control**]: Introduced a new **Permission Provider** approach for simpler, centralized access control. Key details:
  - You no longer need to sync users into Velt or call the Permissions API directly.
  - Configure an endpoint that Velt will call to verify user access to resources (organization, folder, or document).
  - When a user logs in or tries to access a resource:
    - Velt sends a request to your configured endpoint with relevant access details.
    - Your endpoint evaluates access, signs the result using Velt's API, and returns the response.
    - Velt validates the signature and updates access permissions accordingly.
  - This creates a single, backend-controlled source of truth for permissions.
  - You can use this approach instead of **user sync** and **on-demand** permission strategies.
  - [Learn more](/key-concepts/overview#c-real-time-permission-provider).

## Improvements

- [**Notifications**]: In-app notifications and APIs now only create and retrieve notifications for documents the user has access to; notifications for inaccessible documents will no longer be generated or returned (including historical ones)

- [**REST APIs**]: Added `verifyUserPermissions` flag to [`Add Notifications`](/api-reference/rest-apis/v2/notifications/add-notifications) and [`Update Notifications`](/api-reference/rest-apis/v2/notifications/update-notifications) REST APIs. When enabled, notifications are only created or updated for users who have access to the specified document.

- [**Access Control**]: Added `maxDepth` parameter to [`Get Folders` REST API](/api-reference/rest-apis/v2/folders/get-folders). You can now retrieve nested subfolders at any depth level. The response includes `ancestors` array showing parent hierarchy and `inheritAccessFromParent` field indicating whether access is inherited.

- [**Access Control**]: Added `inheritFromParent` parameter to the [Update Folder Access REST API](/api-reference/rest-apis/v2/folders/update-folder-access). You can now configure a folder to inherit access permissions from its parent folder.

- [**Access Control**]: The [Update Folder REST API](/api-reference/rest-apis/v2/folders/update-folder) now handles folder moves correctly. When a folder is moved to a different parent, its `ancestors` array and `accessType` are automatically updated, and all subfolder information is updated accordingly.

- [**Access Control**]: Added `accessType` parameter to the [Add Folder REST API](/api-reference/rest-apis/v2/folders/add-folder). You can now set a folder's access permissions during creation.

- [**Core**]: The `setDocuments` method now filters out documents the user doesn't have access to instead of failing the entire operation. Previously, if any document in the array was inaccessible, the entire request would fail.

- [**Access Control**]: Resources (Organizations, Folders, and Documents) follow a hierarchical permission model. By default, **each resource inherits its access type and user permissions** from its parent. If a resource defines its own access type or user permissions, those **explicit settings override the inherited values**. This precedence applies during both **permission evaluation and access enforcement**.

- [**Access Control**]: Folder document limit set to 50 when using `setDocuments` with the `allDocuments` flag. When fetching all documents from a folder, only the first 50 documents are retrieved, and any documents the user doesn't have access to are filtered out.

## Bug Fixes

- [**Notifications**]: Fixed an issue where marking all notifications as read in the SDK was not working correctly.

- [**Notifications**]: Fixed an issue where a notification API was being called twice with the same request.

- [**Core**]: Fixed document filtering logic that was incorrectly handling access permissions. Documents are now properly filtered based on user access rights.

- [**Live State Sync**]: Fixed `getLiveStateData()` so that with `listenToNewChangesOnly: true`, it now returns only new changes after subscribingâ€”instead of including existing data.
