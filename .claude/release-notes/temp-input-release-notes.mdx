<Update label="4.5.5" description="September 30, 2025">

### Bug Fixes
- [**Comments**]: Fixed an issue where the comment dialog would auto-close after submitting the first comment in popover mode.

</Update>

<Update label="4.5.4" description="September 30, 2025">

### Improvements
- [**Comments**]: Added option to close persistent comment mode with ESC key, even when a thread is active. Use `forceCloseAllOnEsc` (prop/API).

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using props on component
<VeltComments forceCloseAllOnEsc={true} />

// Using API methods
const commentElement = client.getCommentElement();
commentElement.enableForceCloseAllOnEsc();
commentElement.disableForceCloseAllOnEsc();
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Using HTML attribute -->
<velt-comments force-close-all-on-esc="true"></velt-comments>

<script>
// Using API methods
const commentElement = Velt.getCommentElement();
commentElement.enableForceCloseAllOnEsc();
commentElement.disableForceCloseAllOnEsc();
</script>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Comments**]: Fixed an issue where `resolvedCommentsOnDom` was not applying to comment bubbles in the video player timeline.

</Update>

<Update label="4.5.4-beta.4" description="September 29, 2025">

### New Features
- [**Comments**]: Added attachments data support in REST API endpoints for adding and updating comments. You can programmatically include attachment metadata when creating or modifying comments through the REST API.

The `attachments` field supports comprehensive metadata including:
- **File identification**: `attachmentId`, `name`, `bucketPath`
- **File properties**: `size`, `type`, `url`, `thumbnail`, `mimeType`
- **Custom metadata**: Flexible metadata object for dimensions, timestamps, and other custom properties

<Note>
See the full REST API reference:
- [Add Comments API](/api-reference/rest-apis/v2/comments-feature/comments/add-comments)
- [Update Comments API](/api-reference/rest-apis/v2/comments-feature/comments/update-comments)
</Note>

### Bug Fixes
- [**UI Customization**]: Fixed an issue where inline comments section filter dropdown wireframe not rendering correctly.

</Update>

<Update label="4.5.4-beta.3" description="September 27, 2025">

### New Features

- [**Notifications**]: Added ESC key support to close the notification panel.

- [**Comments**]: Added unread badge in CommentPlayerTimeline for annotations.

- [**Recorder**]: Added configuration to control playback behavior on preview click. You can now enable or disable the click-to-play/pause functionality on recording previews.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using props on component
<VeltRecorderPlayer playbackOnPreviewClick={true} />

// Using API methods
const recorderElement = client.getRecorderElement();
recorderElement.enablePlaybackOnPreviewClick();
recorderElement.disablePlaybackOnPreviewClick();
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Using HTML attribute -->
<velt-recorder-player playback-on-preview-click="true"></velt-recorder-player>

<script>
// Using API methods
const recorderElement = Velt.getRecorderElement();
recorderElement.enablePlaybackOnPreviewClick();
recorderElement.disablePlaybackOnPreviewClick();
</script>
```
</Tab>
</Tabs>

- [**Notifications**]: Added `considerAllNotifications` configuration to the notifications tool to control the notification count and unread indicator. When enabled, the notification count and unread badge include items from all tabs; when disabled (default), they only include items from the "For You" tab.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltNotificationsTool considerAllNotifications={true} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-notifications-tool consider-all-notifications="true"></velt-notifications-tool>
```
</Tab>
</Tabs>

- [**Notifications**]: Added ability to filter notifications to the currently set document only. By default it shows notifications for the 15 most recently active documents accessible to the current user in the current organization.

<Tabs>
<Tab title="React / Next.js">
```jsx
const notificationElement = client.getNotificationElement();
notificationElement.enableCurrentDocumentOnly();
notificationElement.disableCurrentDocumentOnly();
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const notificationElement = Velt.getNotificationElement();
notificationElement.enableCurrentDocumentOnly();
notificationElement.disableCurrentDocumentOnly();
</script>
```
</Tab>
</Tabs>

### Improvements
- [**Notifications**]: Added ability to hide notification tabs when only one tab is enabled.

- [**UI Customization**]: Improved CSS variable handling in the ESC button for Persistent Comments Banner.

- [**UI Customization**]: Removed extra space next to the notification icon.

### Bug Fixes
- [**Recorder**]: Fixed an issue where the recording edit done event was not triggering with the correct data.

- [**Recorder**]: Fixed an issue where the countdown timer for the recorder was not working in Firefox.

</Update>

<Update label="4.5.4-beta.2" description="September 25, 2025">

### New Features
- [**UI Customization**]: Added hide reply button wireframe for the comment dialog.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltWireframe>
  <VeltCommentDialogWireframe.Body>
    <VeltCommentDialogWireframe.ToggleReply />
    <VeltCommentDialogWireframe.HideReply />
  </VeltCommentDialogWireframe.Body>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-wireframe style="display:none;">
  <velt-comment-dialog-body-wireframe>
    <velt-comment-dialog-toggle-reply-wireframe></velt-comment-dialog-toggle-reply-wireframe>
    <velt-comment-dialog-hide-reply-wireframe></velt-comment-dialog-hide-reply-wireframe>
  </velt-comment-dialog-body-wireframe>
</velt-wireframe>
```
</Tab>
</Tabs>

- [**UI Customization**]: Added thread card reply button wireframe for the comment dialog to enable quick replies directly from comment thread cards.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltWireframe>
  <VeltCommentDialogWireframe.ThreadCard>
    <VeltCommentDialogWireframe.ThreadCard.Reply />
  </VeltCommentDialogWireframe.ThreadCard>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-wireframe style="display:none;">
  <velt-comment-dialog-thread-card-wireframe>
    <velt-comment-dialog-thread-card-reply-wireframe></velt-comment-dialog-thread-card-reply-wireframe>
  </velt-comment-dialog-thread-card-wireframe>
</velt-wireframe>
```
</Tab>
</Tabs>

- [**UI Customization**]: Added filter dropdown wireframe for the inline comments section.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltWireframe>
  <VeltInlineCommentsSectionWireframe.FilterDropdown>
    <VeltInlineCommentsSectionWireframe.FilterDropdown.Trigger>
      <VeltInlineCommentsSectionWireframe.FilterDropdown.Trigger.Arrow />
      <VeltInlineCommentsSectionWireframe.FilterDropdown.Trigger.Name />
    </VeltInlineCommentsSectionWireframe.FilterDropdown.Trigger>
    <VeltInlineCommentsSectionWireframe.FilterDropdown.Content>
      <VeltInlineCommentsSectionWireframe.FilterDropdown.Content.List>
        <VeltInlineCommentsSectionWireframe.FilterDropdown.Content.List.Item>
          <VeltInlineCommentsSectionWireframe.FilterDropdown.Content.List.Item.Label />
          <VeltInlineCommentsSectionWireframe.FilterDropdown.Content.List.Item.Checkbox />
        </VeltInlineCommentsSectionWireframe.FilterDropdown.Content.List.Item>
      </VeltInlineCommentsSectionWireframe.FilterDropdown.Content.List>
      <VeltInlineCommentsSectionWireframe.FilterDropdown.Content.ApplyButton />
    </VeltInlineCommentsSectionWireframe.FilterDropdown.Content>
  </VeltInlineCommentsSectionWireframe.FilterDropdown>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-wireframe style="display:none;">
  <velt-inline-comments-section-filter-dropdown-wireframe>
    <velt-inline-comments-section-filter-dropdown-trigger-wireframe>
      <velt-inline-comments-section-filter-dropdown-trigger-arrow-wireframe>
      </velt-inline-comments-section-filter-dropdown-trigger-arrow-wireframe>
      <velt-inline-comments-section-filter-dropdown-trigger-name-wireframe>
      </velt-inline-comments-section-filter-dropdown-trigger-name-wireframe>
    </velt-inline-comments-section-filter-dropdown-trigger-wireframe>
    <velt-inline-comments-section-filter-dropdown-content-wireframe>
      <velt-inline-comments-section-filter-dropdown-content-list-wireframe>
        <velt-inline-comments-section-filter-dropdown-content-list-item-wireframe>
          <velt-inline-comments-section-filter-dropdown-content-list-item-label-wireframe>
          </velt-inline-comments-section-filter-dropdown-content-list-item-label-wireframe>
          <velt-inline-comments-section-filter-dropdown-content-list-item-checkbox-wireframe>
          </velt-inline-comments-section-filter-dropdown-content-list-item-checkbox-wireframe>
        </velt-inline-comments-section-filter-dropdown-content-list-item-wireframe>
      </velt-inline-comments-section-filter-dropdown-content-list-wireframe>
      <velt-inline-comments-section-filter-dropdown-content-apply-button-wireframe>
      </velt-inline-comments-section-filter-dropdown-content-apply-button-wireframe>
    </velt-inline-comments-section-filter-dropdown-content-wireframe>
  </velt-inline-comments-section-filter-dropdown-wireframe>
</velt-wireframe>
```
</Tab>
</Tabs>

- [**Comments**]: Added `allowedFileTypes` property to limit file types in comment attachments.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using props on component
<VeltComments allowedFileTypes={['jpg', 'png']} />

// Using API method
const commentElement = client.getCommentElement();
commentElement.setAllowedFileTypes(['jpg', 'png']);
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Using HTML attribute -->
<velt-comments allowed-file-types="['jpg', 'png']"></velt-comments>

<script>
// Using API method
const commentElement = Velt.getCommentElement();
commentElement.setAllowedFileTypes(['jpg', 'png']);
</script>
```
</Tab>
</Tabs>

- [**Comments**]: Added ability to display the attachment filename in the message when a file is attached.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltComments attachmentNameInMessage={true} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments attachment-name-in-message="true"></velt-comments>
```
</Tab>
</Tabs>

- [**Comments**]: Added setComposerFileAttachments() API method to programmatically add file attachments to the comment composer from your application instead of requiring users to select files from the file system.

<Tabs>
<Tab title="React / Next.js">
```jsx
const commentElement = client.getCommentElement();
commentElement.setComposerFileAttachments({
  files: [file1, file2],
  annotationId: 'annotation-123',
  targetElementId: 'element-456',
});
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const commentElement = Velt.getCommentElement();
commentElement.setComposerFileAttachments({
  files: [file1, file2],
  annotationId: 'annotation-123',
  targetElementId: 'element-456',
});
</script>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Comments**]: Fixed an issue where floating mode prop was being incorrectly added in React when enabling embed mode in the sidebar.

</Update>

<Update label="4.5.4-beta.1" description="September 24, 2025">

### New Features
- [**UI Customization**]: Added comment-level reply button wireframe. This button is hidden by default and can be enabled through wireframe customization.

- [**UI Customization**]: Added hide reply button wireframes for the comment dialog body.

### Bug Fixes
- [**Recorder**]: Fixed an issue where the Recorder control panel not being draggable.

- [**Access Control**]: Fixed an issue where Get User Permissions REST API was not returning `permission_denied` errors in the response

<Note>
See the full REST API reference: <a href="/api-reference/rest-apis/v2/auth/get-permissions">Get Permissions</a>.
</Note>

</Update>

<Update label="4.5.3" description="September 20, 2025">

### New Features
- [**Comments**]: Added `readOnly` flag to Comment Bubble component to prevent users from replying or editing existing comments in the target bubble while still displaying them. This is useful when you want to display comments in a read-only mode where users can view but not modify or respond to comments.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using props on component
<VeltCommentBubble readOnly={true} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Using attributes on element -->
<velt-comment-bubble read-only="true"></velt-comment-bubble>
```
</Tab>
</Tabs>

- [**Comments**]: Added `disabled` flag to Comment Tool component to disable the comment tool and prevent users from adding new comments. This is helpful when you want to temporarily or conditionally restrict comment creation while still allowing users to view existing comments.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using props on component
<VeltCommentTool disabled={true} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Using attributes on element -->
<velt-comment-tool disabled="true"></velt-comment-tool>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Comments**]: Fixed an issue where clicking on one comment bubble would unintentionally open multiple comment bubbles. Now clicking on a comment bubble correctly opens only that specific bubble.

- [**Comments**]: Fixed an issue where empty comments were being saved in some scenarios.

</Update>

<Update label="4.5.2" description="September 20, 2025">

### Bug Fixes
- [**Comments**]: Fixed an issue where empty comments were being saved in some scenarios.
- [**Core**]: Released 4.5.2 stable version.

</Update>

<Update label="4.5.2-beta.17" description="September 19, 2025">

### Bug Fixes
- [**Comments**]: Fixed a minor issue with the `fullScreen` prop in the Comments Sidebar.

</Update>

<Update label="4.5.2-beta.16" description="September 19, 2025">

### New Features
- [**Comments**]: Added full-screen mode for Comments Sidebar to maximize space for reviewing and managing comments. This is particularly useful when working with large volumes of feedback or conducting detailed comment reviews. By default, this feature is disabled and only supported in default mode (floating and embed modes are not supported).

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using props on component
<VeltCommentsSidebar fullScreen={true} />

// Using API methods
const commentElement = client.getCommentElement();
commentElement.enableFullScreenInSidebar();
commentElement.disableFullScreenInSidebar();
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Using attributes on element -->
<velt-comments-sidebar full-screen="true"></velt-comments-sidebar>

<script>
// Using API methods
const commentElement = Velt.getCommentElement();
commentElement.enableFullScreenInSidebar();
commentElement.disableFullScreenInSidebar();
</script>
```
</Tab>
</Tabs>

- [**Comments**]: Added fixed annotation numbers to comment pins and dialogs that persist across sessions, making it easier to reference specific comments in discussions and documentation. This replaces the previous temporary numbering system that reset on page refresh.

- [**Comments**]: Added search by annotation number in Comments Sidebar. You can now quickly find specific comments by typing their annotation number (e.g., `#2`) in the search field, making it faster to locate and navigate to referenced comments.

### UI Customization
- [**Comments**]: Added new wireframes to customize the appearance of comment annotation numbers and full-screen button in the Comments Sidebar.

**Comment Dialog Number Wireframe:**

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltWireframe>
  <VeltCommentDialogWireframe>
    <VeltCommentDialogWireframe.CommentNumber />
  </VeltCommentDialogWireframe>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-wireframe style="display:none;">
  <velt-comment-dialog-wireframe>
    <velt-comment-dialog-comment-number-wireframe></velt-comment-dialog-comment-number-wireframe>
  </velt-comment-dialog-wireframe>
</velt-wireframe>
```
</Tab>
</Tabs>

**Comment Pin Number Wireframe:**

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltWireframe>
  <VeltCommentPinWireframe>
    <VeltCommentPinWireframe.Number />
  </VeltCommentPinWireframe>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-wireframe style="display:none;">
  <velt-comment-pin-wireframe>
    <velt-comment-pin-number-wireframe></velt-comment-pin-number-wireframe>
  </velt-comment-pin-wireframe>
</velt-wireframe>
```
</Tab>
</Tabs>

**Comments Sidebar Full-Screen Button Wireframe:**

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltWireframe>
  <VeltCommentsSidebarWireframe>
    <VeltCommentsSidebarWireframe.FullscreenButton />
  </VeltCommentsSidebarWireframe>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-wireframe style="display:none;">
  <velt-comments-sidebar-wireframe>
    <velt-comments-sidebar-fullscreen-button-wireframe></velt-comments-sidebar-fullscreen-button-wireframe>
  </velt-comments-sidebar-wireframe>
</velt-wireframe>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Recorder**]: Fixed Firefox compatibility issue that was preventing recordings from being stopped properly.

- [**Notifications**]: Fixed an issue where Notification Panel was not closing if Velt was not initialized.

</Update>

<Update label="4.5.2-beta.15" description="September 19, 2025">

### Bug Fixes
- [**Core**]: Fixed invalid user name validation to now accept email values in user names. Also improved URL handling by removing content after the last dot (.) to make URLs non-functional, and increased maximum character limit from 20 to 30.

</Update>

<Update label="4.5.2-beta.14" description="September 18, 2025">

### Improvements
- [**Access Control**]: Updated Get User Permissions API to remove `userIds` from the request payload and now returns structured error codes alongside permission denied messages. This provides clearer error handling and makes it easier to diagnose permission issues programmatically.

<Tabs>
<Tab title="React / Next.js">
```ts
// Request Payload
interface GetUserPermissionsRequest {
  organizationId?: string;
  folderIds?: string[];
  documentIds?: string[];
}

// Response Payload
interface GetUserPermissionsResponse {
  [userId: string]: {
    folders?: {
      [folderId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
        errorCode?: UserPermissionAccessRoleResult;
      }
    }
    organization?: {
      [organizationId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
        errorCode?: UserPermissionAccessRoleResult;
      }
    }
    documents?: {
      [documentId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
        errorCode?: UserPermissionAccessRoleResult;
      }
    }
  }
}

enum UserPermissionAccessRoleResult {
  DOES_NOT_EXIST = 'does_not_exist',
  PERMISSION_DENIED = 'permission_denied',
  SOMETHING_WENT_WRONG = 'something_went_wrong',
}

enum UserPermissionAccessRole {
  EDITOR = 'editor',
  VIEWER = 'viewer',
}

// Using API
await client.getUserPermissions(request as GetUserPermissionsRequest);
```
</Tab>
<Tab title="Other Frameworks">
```ts
// Request Payload
interface GetUserPermissionsRequest {
  organizationId?: string;
  folderIds?: string[];
  documentIds?: string[];
}

// Response Payload
interface GetUserPermissionsResponse {
  [userId: string]: {
    folders?: {
      [folderId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
        errorCode?: UserPermissionAccessRoleResult;
      }
    }
    organization?: {
      [organizationId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
        errorCode?: UserPermissionAccessRoleResult;
      }
    }
    documents?: {
      [documentId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
        errorCode?: UserPermissionAccessRoleResult;
      }
    }
  }
}

enum UserPermissionAccessRoleResult {
  DOES_NOT_EXIST = 'does_not_exist',
  PERMISSION_DENIED = 'permission_denied',
  SOMETHING_WENT_WRONG = 'something_went_wrong',
}

enum UserPermissionAccessRole {
  EDITOR = 'editor',
  VIEWER = 'viewer',
}

// Using API
await Velt.getUserPermissions(request as GetUserPermissionsRequest);
```
</Tab>
</Tabs>

- [**Access Control**]: Users with Viewer access can no longer add comments or update metadata through the SDK. This ensures proper permission enforcement on Velt features.

### Bug Fixes
- [**Core**]: Fixed document switch issue where comments were not properly disappearing when navigating between documents, ensuring clean state transitions.

- [**Core**]: Fixed local cache comment persistence issue that was causing stale comment data to remain after document changes.

</Update>

<Update label="4.5.2-beta.13" description="September 17, 2025">

### New Features
- [**Recorder**]: Added maximum recording length feature that allows you to set time limits on recordings. This helps manage storage costs and ensures recordings stay focused and relevant.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using props on components
<VeltRecorderTool maxLength={10} />
<VeltRecorderControlPanel maxLength={10} />

// Using API methods
const recorderElement = client.getRecorderElement();
recorderElement.setMaxLength(10);
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Using attributes on elements -->
<velt-recorder-tool max-length="10"></velt-recorder-tool>
<velt-recorder-control-panel max-length="10"></velt-recorder-control-panel>

<script>
// Using API methods
const recorderElement = client.getRecorderElement();
recorderElement.setMaxLength(10);
</script>
```
</Tab>
</Tabs>

- [**Recorder**]: Added Picture-in-Picture (PiP) mode for screen recordings when camera is enabled. This allows users to continue recording while multitasking, improving workflow efficiency for tutorial creation and documentation.

<Warning>
Picture-in-Picture is only supported in Chrome browsers and only works for screen recordings when the camera is active. This feature is disabled by default.
</Warning>

<Tabs>
<Tab title="React / Next.js">
```jsx
// Enable PiP on components
<VeltRecorderTool pictureInPicture={true} />
<VeltRecorderControlPanel pictureInPicture={true} />

// Control PiP via API
const recorderElement = client.getRecorderElement();
recorderElement.enablePictureInPicture();
recorderElement.disablePictureInPicture();
recorderElement.openPictureInPicture();
recorderElement.exitPictureInPicture();

// Custom PiP button wireframe
<VeltRecorderControlPanelWireframe.FloatingMode.ActionBar.Pip>
    <span>Custom Pip Button</span>
</VeltRecorderControlPanelWireframe.FloatingMode.ActionBar.Pip>
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Enable PiP on elements -->
<velt-recorder-tool picture-in-picture="true"></velt-recorder-tool>
<velt-recorder-control-panel picture-in-picture="true"></velt-recorder-control-panel>

<!-- Custom PiP button wireframe -->
<velt-wireframe style="display:none;">
    <velt-recorder-control-panel-action-bar-pip-wireframe>
        <span>Custom Pip Button</span>
    </velt-recorder-control-panel-action-bar-pip-wireframe>
</velt-wireframe>

<script>
// Control PiP via API
const recorderElement = Velt.getRecorderElement();
recorderElement.enablePictureInPicture();
recorderElement.disablePictureInPicture();
recorderElement.openPictureInPicture();
recorderElement.exitPictureInPicture();
</script>
```
</Tab>
</Tabs>

- [**Recorder**]: Added screen recording preview to let users see their screen recordings preview prior to staring the recording. This helps users make make necessary adjustments before starting the recording. You programmatically ask users for permissions using the new API.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Request screen permission for preview
const recorderElement = client.getRecorderElement();
recorderElement.requestScreenPermission();

// Custom screen player wireframe
<VeltRecordingPreviewStepsDialogWireframe.Video.ScreenPlayer />
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Custom screen player wireframe -->
<velt-wireframe style="display:none;">
    <velt-recording-preview-steps-dialog-screen-player-wireframe>
    </velt-recording-preview-steps-dialog-screen-player-wireframe>
</velt-wireframe>

<script>
// Request screen permission for preview
const recorderElement = Velt.getRecorderElement();
recorderElement.requestScreenPermission();
</script>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Single Editor Mode**]: Fixed heartbeat handling issue when external heartbeat is passed to prevent conflicts with internal presence detection mechanisms.

- [**UI Customization**]: Fixed Angular Material CSS scoping to prevent style conflicts by ensuring Angular Material styles are properly contained within Velt components.

</Update>

<Update label="4.5.2-beta.12" description="September 16, 2025">

### Bug Fixes
- [**Single Editor Mode**]: Fixed issue where editor assignment process wasn't reinitiated when a user regained internet connection or became active again after being offline. This ensures proper editor role management in collaborative editing scenarios.

- [**Single Editor Mode**]: Fixed "Edit here" functionality to properly assign editor role to users even when no existing data is available in the document.

- [**Core**]: Fixed React hook `setDocumentSuccess` event that wasn't triggering properly by adding flush sync method for `initUpdate` events. This ensures proper event handling and state updates in React applications.

</Update>


<Update label="4.5.2-beta.11" description="September 13, 2025">

### New Features
- [**Comments**]: Added `commentPlaceholder` and `replyPlaceholder` props on `VeltComments` so you can tailor input copy to your app's voice and improve guidance for first-time users.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using Props on VeltComments
<VeltComments commentPlaceholder="Ask a question or propose a change (use @ to mention teammates)" replyPlaceholder="Add context or suggest a fix (use @ to notify others)" />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments comment-placeholder="Ask a question or propose a change (use @ to mention teammates)" reply-placeholder="Add context or suggest a fix (use @ to notify others)"></velt-comments>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Recorder**]: Fixed Recording Preview Dialog width issue.

</Update>

<Update label="4.5.2-beta.10" description="September 11, 2025">

### New Features
- [**Access Control**]: Added User Permissions API to fetch a user's `editor`/`viewer` access across organizations, folders, and documents, for both permanent and temporary users. This helps you enforce read-only experiences.

<Warning>
Users with `viewer` access are read-only; write actions like adding comments are blocked in the SDK.
</Warning>

<Note>
See the [Access Control overview](/key-concepts/overview#access-control) for concepts and detailed guidance.
</Note>

#### REST API
Retrieves user permissions for organizations, folders, and documents in a single API call. Supports both regular and temporary users.

<Note>
See the full REST API reference: <a href="/api-reference/rest-apis/v2/auth/get-permissions">Get Permissions</a>.
</Note>

#### SDK

<Tabs>
<Tab title="React / Next.js">
```ts
// Request Payload
interface GetUserPermissionsRequest {
  organizationId?: string;
  folderIds?: string[];
  documentIds?: string[];
  userIds?: string[];
}

// Response Payload
interface GetUserPermissionsResponse {
  [userId: string]: {
    folders?: {
      [folderId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
      }
    }
    organization?: {
      [organizationId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
      }
    }
    documents?: {
      [documentId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
      }
    }
  }
}

enum UserPermissionAccessRole {
  EDITOR = 'editor',
  VIEWER = 'viewer',
}

// Using API
await client.getUserPermissions(request as GetUserPermissionsRequest);
```
</Tab>
<Tab title="Other Frameworks">
```ts
// Request Payload
interface GetUserPermissionsRequest {
  organizationId?: string;
  folderIds?: string[];
  documentIds?: string[];
  userIds?: string[];
}

// Response Payload
interface GetUserPermissionsResponse {
  [userId: string]: {
    folders?: {
      [folderId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
      }
    }
    organization?: {
      [organizationId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
      }
    }
    documents?: {
      [documentId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
      }
    }
  }
}

enum UserPermissionAccessRole {
  EDITOR = 'editor',
  VIEWER = 'viewer',
}

// Using API
await Velt.getUserPermissions(request as GetUserPermissionsRequest);
```
</Tab>
</Tabs>

</Update>

<Update label="4.5.2-beta.9" description="September 11, 2025">

### New Features
- [**Comments**]: Updated default placeholders and added props to customize placeholders for comment and reply inputs. Added wireframes to allow users to customize how it looks.
  - Default placeholders:
    - Comment: "Comment or add others with @"
    - Reply: "Reply or add others with @"

<Tabs>
<Tab title="React / Next.js">
```jsx
// Wireframe placeholders
<VeltWireframe>
  <VeltCommentDialogWireframe.Composer>
    <VeltCommentDialogWireframe.Composer.Input commentplaceholder="Ask a question or propose a change (use @ to mention teammates)" replyplaceholder="Add context or suggest a fix (use @ to notify others)" />
  </VeltCommentDialogWireframe.Composer>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Wireframe placeholders -->
<velt-wireframe>
  <velt-comment-dialog-composer-wireframe>
    <velt-comment-dialog-composer-input-wireframe commentplaceholder="Ask a question or propose a change (use @ to mention teammates)" replyplaceholder="Add context or suggest a fix (use @ to notify others)">
    </velt-comment-dialog-composer-input-wireframe>
  </velt-comment-dialog-composer-wireframe>
</velt-wireframe>
```
</Tab>
</Tabs>

- [**Comments**]: Added hook to set and get UI state.

<Tabs>
<Tab title="React / Next.js">
```jsx
const { uiState, setUiState } = useUiState();

useEffect(() => {
  console.log('uiState: ', uiState);
}, [uiState]);

<button onClick={() => setUiState({ a: 1, b: 2 })}>Set Data</button>
<button onClick={() => setUiState({ a: null, b: null })}>Set Data Null</button>
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
  // UI state via API
  Velt.setUiState({ a: 1, b: 2 });
  Velt.getUiState().subscribe((data) => {
    console.log('UI State: ', data);
  });
  // Set fields back to null
  Velt.setUiState({ a: null, b: null });
</script>
```
</Tab>
</Tabs>

- [**Comments**]: Added Edited chip in comment thread: Edits are now visibly transparent at a glance, improving auditability and helping reviewers quickly spot updated messages in long discussions. See [Comment Dialog components](/ui-customization/features/async/comments/comment-dialog-components).

**New wireframes added to customize "Edited" Chip:**

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltWireframe>
  <VeltCommentDialogWireframe.ThreadCard.Edited>
    <span>Custom Edited</span>
  </VeltCommentDialogWireframe.ThreadCard.Edited>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-wifreframe>
  <velt-comment-dialog-thread-card-edited-wireframe>
    <span>Custom Edited</span>
  </velt-comment-dialog-thread-card-edited-wireframe>
</velt-wifreframe>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Comments**]: In `InlineCommentsSection` single-thread mode, count now reflects the number of Comments vs Comment Annotations.
- [**Recorder**]: Fixed an issue where longer recordings were not rendering the preview correctly in recording player and editor.
- [**Recorder**]: Fixed an issue where the host app was not clickable when screen recording was used in floating mode.

</Update>

<Update label="4.5.2-beta.8" description="September 10, 2025">

### Improvements
- [**Single Editor Mode**]: Added additional debugging logs for Single Editor Mode.

### Bug Fixes
- [**UI**]: Scoped `.cdk-overlay-pane` CSS into `.velt-overlay-panel` class to avoid global style leakage.

</Update>

<Update label="4.5.2-beta.7" description="September 9, 2025">

### New Features
- [**Comments**]: Added clickable links of text selection in comments and a link callback to handle link clicks programmatically.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Link callback in comments
<VeltComments linkCallback={true} />

// Hook
const linkEvent = useCommentEventCallback('linkClicked');
useEffect(() => {
  if (linkEvent) {
    // Navigate with your router here
    console.log('linkClicked', linkEvent);
  }
}, [linkEvent]);
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Link callback in comments -->
<velt-comments link-callback="true"></velt-comments>

<script>
  const commentElement = Velt.getCommentElement();
  commentElement.on('linkClicked').subscribe((linkData) => {
    // Navigate with your router here
    console.log('Comment link clicked:', linkData);
  });
</script>
```
</Tab>
</Tabs>

- [**Recorder**]: Added `recorderId` prop to Video Editor.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Video Editor
<VeltVideoEditor recorderId="zK3iEAfvs1Htu3QYPy5S" />
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Video Editor -->
<velt-video-editor recorder-id="zK3iEAfvs1Htu3QYPy5S"></velt-video-editor>
```
</Tab>
</Tabs>

- [**Comments**]: Slack-style link pasting: select text and paste a link to directly convert it into a clickable hyperlink. This speeds up authoring and provides a familiar UX for users.


### Improvements
- [**Comments**]: Removed translation from group name in sidebar to allow special characters.

### Bug Fixes
- [**Recorder**]: Fixed `recorderId` change detection in video player.
- [**Recorder**]: Fixed thread mode UI for screen recordings.


</Update>

<Update label="4.5.2-beta.6" description="September 8, 2025">

### New Features
- [**Comments**]: Added group support for custom lists. Useful for workflows like issue trackers (e.g., group by "Priority" or "Status"), allowing users to quickly refer and insert custom entities from your app. With this feature, you can combine multiple entity types into one drop down just like Linear. See full examples in Customize Behavior → [Create custom list data on comment](/async-collaboration/comments/customize-behavior#createcustomlistdataoncomment).

<Tabs>
<Tab title="React / Next.js">
```ts
const customListWithGroups = {
  hotkey: "$",
  type: "custom",
  groups: [
    { id: "categories", name: "Categories" },
    { id: "priorities", name: "Priorities" }
  ],
  data: [
    // Categories group - 2 items
    {
      id: "bug_1",
      name: "Bug 1",
      description: "Bug report 1",
      groupId: "categories",
      icon: { svg: "<svg></svg>" }
    },
    {
      id: "feature_2",
      name: "Feature Request 2",
      description: "New feature 2",
      groupId: "categories",
      icon: { url: "https://random.png" }
    },
    // Priorities group - 2 items
    {
      id: "high_1",
      name: "High Priority 1",
      description: "Urgent task 1",
      groupId: "priorities",
      icon: { url: "https://random.png" }
    },
    {
      id: "medium_2",
      name: "Medium Priority 2",
      description: "Normal task 2",
      groupId: "priorities",
      icon: { svg: "<svg></svg>" }
    },
    // Ungrouped items - 2 items
    {
      id: "misc_1",
      name: "Miscellaneous 1",
      description: "Other items 1",
      icon: { url: "https://random.png" }
    },
    {
      id: "note_2",
      name: "Note 2",
      description: "General note 2",
      icon: { svg: "<svg></svg>" }
    }
  ]
};

const commentElement = client.getCommentElement();
commentElement.createCustomListDataOnComment(customListWithGroups);
```
</Tab>
<Tab title="Other Frameworks">
```js
const customListWithGroups = {
  hotkey: "$",
  type: "custom",
  groups: [
    { id: "categories", name: "Categories" },
    { id: "priorities", name: "Priorities" }
  ],
  data: [
    { id: "bug_1", name: "Bug 1", description: "Bug report 1", groupId: "categories", icon: { svg: "<svg></svg>" } },
    { id: "feature_2", name: "Feature Request 2", description: "New feature 2", groupId: "categories", icon: { url: "https://random.png" } },
    { id: "high_1", name: "High Priority 1", description: "Urgent task 1", groupId: "priorities", icon: { url: "https://random.png" } },
    { id: "medium_2", name: "Medium Priority 2", description: "Normal task 2", groupId: "priorities", icon: { svg: "<svg></svg>" } },
    { id: "misc_1", name: "Miscellaneous 1", description: "Other items 1", icon: { url: "https://random.png" } },
    { id: "note_2", name: "Note 2", description: "General note 2", icon: { svg: "<svg></svg>" } }
  ]
};

const commentElement = Velt.getCommentElement();
commentElement.createCustomListDataOnComment(customListWithGroups);
```
</Tab>
</Tabs>

</Update>

<Update label="4.5.2-beta.5" description="September 8, 2025">

### Improvements
- [**Single Editor Mode**]: Optimized and made Single Editor Mode more robust.
</Update>

<Update label="4.5.2-beta.4" description="September 6, 2025">

### New Features
- [**Single Editor Mode**]: Added `updateUserPresence` to send heartbeat data from the host app. This helps Velt detect multi-tab activity and resolve who is the active editor when users switch tabs or devices and will use that as a fallback in rare edge cases if it fails to detect multi‑tab/device presence. Most apps don't need this; use only if you see ambiguity in who's the active editor.

<Tabs>
<Tab title="React / Next.js">
```ts
export interface LiveStateSingleEditorExternalUserPresence {
  /** True if the same user is present on a different tab. */
  sameUserPresentOnTab?: boolean;
  /** True if a different user is present on a different tab. */
  differentUserPresentOnTab?: boolean;
  /** User IDs of users present on a different tab. */
  userIds?: string[];
}

// API method
const liveStateSyncElement = client.getLiveStateSyncElement();
liveStateSyncElement.updateUserPresence({
  sameUserPresentOnTab: false,
  differentUserPresentOnTab: true,
  userIds: ['user-2']
});
```
</Tab>
<Tab title="Other Frameworks">
```js
// API method
const liveStateSyncElement = Velt.getLiveStateSyncElement();
liveStateSyncElement.updateUserPresence({
  sameUserPresentOnTab: false,
  differentUserPresentOnTab: true,
  userIds: ['user-2']
});
```
</Tab>
</Tabs>

### Improvements
- [**Single Editor Mode**]: Added validations in `setUserAsEditor` to set a user only if no editor is currently assigned.

<Tabs>
<Tab title="React / Next.js">
```ts
export interface SetUserAsEditorResponse {
  error?: ErrorEvent;
}

export type ErrorEvent = {
  error?: string;
  code: string;
  message?: string;
  source?: string;
};

// Method signature
// public setUserAsEditor: () => Promise<SetUserAsEditorResponse | void>;

// Usage with response handling
const liveStateSyncElement = client.getLiveStateSyncElement();
const result = await liveStateSyncElement.setUserAsEditor();
if (result?.error) {
  if (result.error.code === 'same_user_editor_current_tab') {
    // Same user is already editor in current tab
  } else if (result.error.code === 'same_user_editor_different_tab') {
    // Same user is already editor in different tab
  } else if (result.error.code === 'another_user_editor') {
    // Another user is already editor
  }
}
```

```ts
// Possible error values
// For same user current tab error
{
  code: 'same_user_editor_current_tab',
  message: 'Same user is already editor in current tab.',
  source: 'setUserAsEditor',
}

// For same user different tab error
{
  code: 'same_user_editor_different_tab',
  message: 'Same user is already editor in different tab.',
  source: 'setUserAsEditor',
}

// For another user error
{
  code: 'another_user_editor',
  message: 'Another user is already editor.',
  source: 'setUserAsEditor',
}
```
</Tab>
<Tab title="Other Frameworks">
```js
// Method usage
const liveStateSyncElement = Velt.getLiveStateSyncElement();
const result = await liveStateSyncElement.setUserAsEditor();
if (result && result.error) {
  if (result.error.code === 'same_user_editor_current_tab') {
    // Same user already editor in current tab
  } else if (result.error.code === 'same_user_editor_different_tab') {
    // Same user already editor in different tab
  } else if (result.error.code === 'another_user_editor') {
    // Another user already editor
  }
}
```
</Tab>
</Tabs>

- [**Single Editor Mode**]: Optimized and made Single Editor Mode more robust.
</Update>


<Update label="4.5.2-beta.3" description="September 5, 2025">

### New Features
- [**Access Control**]: Added support for viewer and editor roles for permanent and temporary users.

<Info>
**Editor vs Viewer roles**

- **Editor**: Full read/write access to collaboration data on the resource (create/edit/delete comments and replies, add reactions, start recordings, etc.).
- **Viewer**: Read-only access to collaboration data (view comments and replies, presence, cursors, recordings, notifications) without the ability to modify.

Why this matters: You can enforce read-only experiences, safely grant temporary edit windows, and align Velt features with your app's permission model.
</Info>

For implementation details, see the v2 Auth APIs:

- Generate Token: [/api-reference/rest-apis/v2/auth/generate-token](/api-reference/rest-apis/v2/auth/generate-token)
- Add Permissions: [/api-reference/rest-apis/v2/auth/add-permissions](/api-reference/rest-apis/v2/auth/add-permissions)

<Warning>
`accessRole` is configurable only via the v2 Users and Auth Permissions REST APIs. Frontend SDK methods do not accept or change `accessRole`.

Relevant endpoints:
- [/api-reference/rest-apis/v2/users/add-users](/api-reference/rest-apis/v2/users/add-users)
- [/api-reference/rest-apis/v2/users/update-users](/api-reference/rest-apis/v2/users/update-users)
- [/api-reference/rest-apis/v2/auth/add-permissions](/api-reference/rest-apis/v2/auth/add-permissions)
- [/api-reference/rest-apis/v2/auth/generate-token](/api-reference/rest-apis/v2/auth/generate-token)
</Warning>

<Note>
See the [Access Control overview](/key-concepts/overview#access-control) for concepts and detailed guidance.
</Note>

### Improvements
- [**Single Editor Mode**]: Optimized and made Single Editor Mode more robust.
</Update>