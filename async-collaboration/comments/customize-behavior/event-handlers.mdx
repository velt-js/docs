---
title: "Event Handlers"
---




## 1. Take action when a comment is added

![](/images/onCommentAdd.png)


<Tabs>
<Tab title= "React / Next.js with Hooks">
The `useCommentAddHandler()` hook can be used to attach a callback to the `onCommentAdd` event.

```jsx
import { useCommentAddHandler} from '@veltdev/react';

export default function YourDocument() {

  const commentAddEvent = useCommentAddHandler();
  useEffect(() => {
    console.log('commentAddEvent', commentAddEvent);
  }, [commentAddEvent]);


  return (
    <div>
       
    </div>
  )
}
```
</Tab>
<Tab title="React / Next.js">
The `onCommentAdd` event is emitted when a new comment is created. You can add a callback function to handle `onCommentAdd` events when they occur.

```js
<VeltComments onCommentAdd={(event) => yourMethod(event)} />
```
</Tab>

<Tab title="HTML / Other Frameworks">
The `onCommentAdd` event is emitted when a new comment is created. You can add a callback function to handle `onCommentAdd` events when they occur.

```js
const veltCommentsTag = document.querySelector('velt-comments');

veltCommentsTag?.addEventListener('onCommentAdd', (event) => {
  console.log('*** onCommentAdd ***');
  console.log(event.detail);
});
```
</Tab>
</Tabs>

**onCommentAdd Event Data Schema**

<ResponseField name="documentId" type="string">
The document ID where the comment was added
</ResponseField>

<ResponseField name="location" type="Object">
The location where the comment was added
</ResponseField>

<ResponseField name="addContext" type="Function">
Use this to set custom data on the comment
</ResponseField>

<ResponseField name="targetAnnotationId" type="string">
The id of the target annotation
</ResponseField>

<ResponseField name="annotation" type="CommentAnnotation">
The annotation that is associated with the comment that was updated
</ResponseField>



## 2. Take action when comment is updated

![](/images/onCommentUpdate.png)

<Tabs>
<Tab title="React / Next.js with Hooks">
The `useCommentUpdateHandler()` hook can be used to attach a callback to the `onCommentUpdate` event.

```jsx
import { useCommentUpdateHandler} from '@veltdev/react';

export default function YourDocument() {

  const commentUpdateEvent = useCommentUpdateHandler();
  useEffect(() => {
    console.log('commentUpdateEvent', commentUpdateEvent);
  }, [commentUpdateEvent]);

  return (
    <div>
       
    </div>
  )
}
```
</Tab>
<Tab title="React / Next.js">
The `onCommentUpdate` event is emitted when a comment is updated.

```js
<VeltComments onCommentUpdate={(event) => yourMethod(event)} />
```
</Tab>

<Tab title="HTML / Other Frameworks">
The `onCommentUpdate` event is emitted when a comment is updated.

```js
const veltCommentsTag = document.querySelector('velt-comments');

veltCommentsTag?.addEventListener('onCommentUpdate', (event) => {
  console.log('*** onCommentUpdate ***');
  console.log(event.detail);
});
```
</Tab>
</Tabs>


**onCommentUpdate Event Data Schema**


<ResponseField name="annotation" type="CommentAnnotation">
The annotation that is associated with the comment that was updated
</ResponseField>

<ResponseField name="type" type="string">
The type of comment that was updated
</ResponseField>

<ResponseField name="targetAnnotationId" type="string">
The ID of the target annotation that contains the comment that was updated
</ResponseField>

<ResponseField name="targetCommentId" type="number">
The ID of the target comment that was updated
</ResponseField>






## 3. Listen to changes in comment mode

![](/images/onCommentModeChange.png)


The comment mode is toggled on and off when you click on the Comment Tool.

<Tabs>
<Tab title="React / Next.js with Hooks">
The `useCommentModeState()` hook can be used to get the Comment mode without having to subscribe to changes. When the Comment mode changes, the hook return value will update. 

The subscription is automatically unsubscribed when the component dismounts.

```jsx
import { useCommentModeState } from '@veltdev/react';

export default function YourDocument() {

  let commentModeState = useCommentModeState()

  return (
    <div>
       Comment Mode is turned on: {commentModeState}
    </div>
  )
}

```
</Tab>
<Tab title="React / Next.js">
To subscribe to changes in the comment mode, use the `onCommentModeChange()` method , as a property on `VeltCommentTool`:

```jsx
<VeltCommentTool onCommentModeChange={(mode) => onCommentModeChange(mode)} />
```
API method:
```jsx
let subscription = commentElement.onCommentModeChange().subscribe((mode) => {
    //mode contains the state after change
});
```
To unsubscribe from the subscription:
```jsx
subscription?.unsubscribe()
```
</Tab>

<Tab title="HTML / Other Frameworks">
API method:
```jsx
const commentElement = Velt.getCommentElement();
let subscription = commentElement.onCommentModeChange().subscribe((mode) => {
    //mode contains the state after change
});
```
To unsubscribe from the subscription:
```jsx
subscription?.unsubscribe()
```
</Tab>
</Tabs>



## 4. Listen to Comment Selection changes



<Tabs>
<Tab title="React / Next.js with Hooks">
The `useCommentSelectionChangeHandler` hook can be used to subscribe to Comment selection changes.

```jsx
import React, { useEffect } from 'react';
import { useCommentSelectionChangeHandler } from '@veltdev/react';

function YourComponent() {
    const commentSelectionChange = useCommentSelectionChangeHandler();

    useEffect(() => {
        console.log('commentSelectionChange', commentSelectionChange);
    }, [commentSelectionChange]);

    return (
        <>
            Selected Comment: {commentSelectionChange.annotation.id}
        </>
    );
}
```
</Tab>
<Tab title="React / Next.js">
The `onCommentSelectionChange()` method can be used to listen Comment selection changes.
```jsx
const onCommentSelectionChange = (data) => {
  console.log('onCommentSelectionChange', data);
}

<VeltComments onCommentSelectionChange={(data) => onCommentSelectionChange(data)} />
```
Callback response schema:


```jsx
export class CommentSelectionChangeData {
  selected!: boolean;
  annotation!: CommentAnnotation;
}
```


**API Methods:**

```jsx
const commentElement = client.getCommentElement();
let subscription = commentElement.onCommentSelectionChange().subscribe((data) => {
  console.log('onCommentSelectionChange: ', data);
});
```


**To unsubscribe from the subscription:**
```jsx
subscription?.unsubscribe()
```
</Tab>

<Tab title="HTML / Other Frameworks">
The `onCommentSelectionChange()` method can be used to listen Comment selection changes.
```jsx
<velt-comments></velt-comments>
<script>
const commentTag = document.querySelector('velt-comments');
commentTag.addEventListener('onCommentSelectionChange', (event) => {
	console.log('onCommentSelectionChange event', event.detail);
});
</script>
```
**Callback response schema:**


```jsx
export class CommentSelectionChangeData {
  selected!: boolean;
  annotation!: CommentAnnotation;
}
```


**API Methods:**

```jsx
const commentElement = Velt.getCommentElement();
let subscription = commentElement.onCommentSelectionChange().subscribe((data) => {
  console.log('onCommentSelectionChange: ', data);
});
```


**To unsubscribe from the subscription:**
```jsx
subscription?.unsubscribe()
```
</Tab>
</Tabs>