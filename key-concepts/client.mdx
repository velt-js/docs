---
title: "Client Methods"
description: "Core client methods for the Velt SDK"
---

This page documents core client-level methods that are called directly on the Velt client instance.

## Client Events

### on()

Subscribe to core client events. [See event types â†’](/api-reference/sdk/models/data-models#client)

- **Params:** `eventType: string`
- **Returns:** `Observable<Event>`
- **React Hook:** `useVeltEventCallback()`

| Event | Description | Event Object |
|-------|-------------|--------------|
| `initUpdate` | Initialization lifecycle updates (documents/locations set/unset, user init) | [InitUpdateEvent](/api-reference/sdk/models/data-models#initupdateevent) |
| `userUpdate` | Fired when the Velt user changes (login, logout, or update) | [UserUpdateEvent](/api-reference/sdk/models/data-models#userupdateevent) |
| `documentInit` | Document initialization status changes | [DocumentInitEvent](/api-reference/sdk/models/data-models#documentinitevent) |
| `error` | Error events (e.g., token_expired) | [ErrorEvent](/api-reference/sdk/models/data-models#errorevent) |
| `veltButtonClick` | Fired when a Velt Button is clicked | [VeltButtonClickEvent](/api-reference/sdk/models/data-models#veltbuttonclickevent) |
| `permissionProvider` | Permission Provider events for access requests, results, and errors | [PermissionProviderEvent](/api-reference/sdk/models/data-models#permissionproviderevent) |

<Tabs>
<Tab title="React / Next.js">
```jsx
import { useEffect } from 'react';
import { useVeltClient } from '@veltdev/react';

export default function CoreEventsListener() {
  const { client } = useVeltClient();

  useEffect(() => {
    if (!client) return;

    // Listen to initialization updates
    const initSub = client.on('initUpdate').subscribe((event) => {
      console.log('Init update:', event);
    });

    // Listen to user updates
    const userSub = client.on('userUpdate').subscribe((event) => {
      console.log('User update:', event);
    });

    // Listen to token lifecycle errors (e.g., token_expired)
    const errorSub = client.on('error').subscribe((error) => {
      console.log('Velt error:', error);
    });

    return () => {
      initSub?.unsubscribe();
      userSub?.unsubscribe();
      errorSub?.unsubscribe();
    };
  }, [client]);

  return null;
}
```
</Tab>

<Tab title="Other Frameworks">
```javascript
async function loadVelt() {
  await Velt.init('YOUR_VELT_API_KEY');

  const initSub = Velt.on('initUpdate').subscribe((event) => {
    console.log('Init update:', event);
  });

  const userSub = Velt.on('userUpdate').subscribe((event) => {
    console.log('User update:', event);
  });

  const errorSub = Velt.on('error').subscribe((error) => {
    console.log('Velt error:', error);
  });

  // When done, unsubscribe
  // initSub?.unsubscribe();
  // userSub?.unsubscribe();
  // errorSub?.unsubscribe();
}
```
</Tab>
</Tabs>

<Note>
Always unsubscribe from event subscriptions to avoid memory leaks.
</Note>

## Debug Info

Retrieve comprehensive debugging information about your Velt integration to troubleshoot configuration issues, monitor state synchronization, and verify SDK initialization.

The debug info provides detailed insights into:
- **veltVersion**: Current Velt SDK version running in your application
- **apiKey**: Your API key used to initialize the Velt client
- **serverMap**: Server-side state including organization, documents, locations, folder, and user metadata
- **clientMap**: Client-side state including organization, documents, locations, folder, and user metadata

Use debug information to:
- **Troubleshoot Integration Issues**: Verify that organization, documents, and user data are correctly set
- **Monitor State Sync**: Compare serverMap vs clientMap to identify synchronization issues
- **Debug Access Control**: Check user permissions and context access configuration
- **Version Verification**: Confirm which SDK version is running in production

### fetchDebugInfo()

Get a one-time snapshot of debug information.

- **Params:** `void`
- **Returns:** `Promise<VeltDebugInfo>`
- **React Hook:** `n/a`

<Tabs>
<Tab title="React / Next.js">
```jsx
import { useVeltClient } from '@veltdev/react';

export default function YourComponent() {
  const { client } = useVeltClient();

  const handleFetchDebugInfo = async () => {
    const debugInfo = await client.fetchDebugInfo();
    console.log('Debug Info:', debugInfo);
    console.log('SDK Version:', debugInfo.veltVersion);
    console.log('API Key:', debugInfo.apiKey);
    console.log('Server State:', debugInfo.serverMap);
    console.log('Client State:', debugInfo.clientMap);
  };

  return (
    <button onClick={handleFetchDebugInfo}>
      Get Debug Info Snapshot
    </button>
  );
}
```
</Tab>

<Tab title="Other Frameworks">
```javascript
const debugInfo = await Velt.fetchDebugInfo();
console.log('Debug Info:', debugInfo);
console.log('SDK Version:', debugInfo.veltVersion);
console.log('API Key:', debugInfo.apiKey);
console.log('Server State:', debugInfo.serverMap);
console.log('Client State:', debugInfo.clientMap);
```
</Tab>
</Tabs>

### getDebugInfo()

Subscribe to real-time debug information updates.

- **Params:** `void`
- **Returns:** `Observable<VeltDebugInfo>`
- **React Hook:** `n/a`

<Tabs>
<Tab title="React / Next.js">
```jsx
import { useVeltClient } from '@veltdev/react';
import { useEffect, useState } from 'react';

export default function YourComponent() {
  const { client } = useVeltClient();
  const [debugInfo, setDebugInfo] = useState(null);

  useEffect(() => {
    if (!client) return;

    const subscription = client.getDebugInfo().subscribe((info) => {
      setDebugInfo(info);
      console.log('Debug Info Updated:', info);
    });

    return () => subscription.unsubscribe();
  }, [client]);

  return (
    <div>
      {debugInfo && (
        <div>
          <p>SDK Version: {debugInfo.veltVersion}</p>
          <p>API Key: {debugInfo.apiKey}</p>
          <p>User: {debugInfo.clientMap?.user?.name}</p>
        </div>
      )}
    </div>
  );
}
```
</Tab>

<Tab title="Other Frameworks">
```javascript
const subscription = Velt.getDebugInfo().subscribe((debugInfo) => {
  console.log('Debug Info Updated:', debugInfo);
  console.log('SDK Version:', debugInfo.veltVersion);
  console.log('API Key:', debugInfo.apiKey);
  console.log('Server State:', debugInfo.serverMap);
  console.log('Client State:', debugInfo.clientMap);
});

// Unsubscribe when done
subscription.unsubscribe();
```
</Tab>
</Tabs>

**Data Models:**
- [`VeltDebugInfo`](/api-reference/sdk/models/data-models#veltdebuginfo) - Debug information structure
- [`DebugInfoMap`](/api-reference/sdk/models/data-models#debuginfomap) - Map containing server and client state details

## Metadata

### getMetadata()

Get the currently set organization, document and location objects.

- **Params:** `void`
- **Returns:** `Promise<VeltEventMetadata>`
- **React Hook:** `n/a`

<Tabs>
<Tab title="React / Next.js">
```jsx
import { useVeltClient } from '@veltdev/react';

export default function YourComponent() {
  const { client } = useVeltClient();

  const handleGetMetadata = async () => {
    const metadata = await client.getMetadata();
    console.log('Current metadata:', metadata);
  };

  return (
    <button onClick={handleGetMetadata}>
      Get Metadata
    </button>
  );
}
```
</Tab>

<Tab title="Other Frameworks">
```javascript
const metadata = await Velt.getMetadata();
console.log('Current metadata:', metadata);
```
</Tab>
</Tabs>

## Heartbeat

Heartbeat provides real-time visibility into user activity sessions across your application. You can monitor the current user's heartbeat or track heartbeats for any user, enabling better presence awareness and active session management.

**Use Cases:**
- Monitor active user sessions per document
- Track user engagement across locations
- Build custom presence indicators
- Implement session timeout logic
- Create activity dashboards

### getHeartbeat()

Subscribe to heartbeat data for the current user or a specific user.

- **Params:** [`HeartbeatConfig`](/api-reference/sdk/models/data-models#heartbeatconfig) (optional)
- **Returns:** [`Observable<GetHeartbeatResponse>`](/api-reference/sdk/models/data-models#getheartbeatresponse)
- **React Hook:** `useHeartbeat()`

#### Get current user heartbeat

Subscribe to heartbeat data for the currently logged-in user.

<Tabs>
<Tab title="React / Next.js">

Using React Hook:
```jsx
import { useHeartbeat } from "@veltdev/react";
import { useEffect } from "react";

export default function YourComponent() {
  const { data: heartbeatData } = useHeartbeat();

  useEffect(() => {
    console.log("Heartbeat data: ", heartbeatData);
  }, [heartbeatData]);

  return <div>Your component</div>;
}
```

Using API Method:
```jsx
import { useVeltClient } from "@veltdev/react";
import { useEffect } from "react";

export default function YourComponent() {
  const { client } = useVeltClient();

  useEffect(() => {
    if (!client) return;

    const subscription = client.getHeartbeat().subscribe((heartbeatData) => {
      console.log("Heartbeat data: ", heartbeatData);
    });

    return () => subscription.unsubscribe();
  }, [client]);

  return <div>Your component</div>;
}
```
</Tab>

<Tab title="Other Frameworks">

```html
<script>
Velt.getHeartbeat().subscribe((heartbeatData) => {
  console.log("Heartbeat data: ", heartbeatData);
});
</script>
```
</Tab>
</Tabs>

#### Get heartbeat for specific user

Monitor heartbeat data for any user by specifying their `userId`.

<Tabs>
<Tab title="React / Next.js">

Using React Hook:
```jsx
import { useHeartbeat } from "@veltdev/react";
import { useEffect } from "react";

export default function YourComponent() {
  const { data: heartbeatData } = useHeartbeat({ userId: "user123" });

  useEffect(() => {
    console.log("Heartbeat data for user123: ", heartbeatData);
  }, [heartbeatData]);

  return <div>Your component</div>;
}
```

Using API Method:
```jsx
import { useVeltClient } from "@veltdev/react";
import { useEffect } from "react";

export default function YourComponent() {
  const { client } = useVeltClient();

  useEffect(() => {
    if (!client) return;

    const subscription = client.getHeartbeat({ userId: "user123" }).subscribe((heartbeatData) => {
      console.log("Heartbeat data for user123: ", heartbeatData);
    });

    return () => subscription.unsubscribe();
  }, [client]);

  return <div>Your component</div>;
}
```
</Tab>

<Tab title="Other Frameworks">

```html
<script>
Velt.getHeartbeat({ userId: "user123" }).subscribe((heartbeatData) => {
  console.log("Heartbeat data for user123: ", heartbeatData);
});
</script>
```
</Tab>
</Tabs>

**Data Models:**
- [`HeartbeatConfig`](/api-reference/sdk/models/data-models#heartbeatconfig) - Configuration options for heartbeat subscription
- [`GetHeartbeatResponse`](/api-reference/sdk/models/data-models#getheartbeatresponse) - Response structure containing heartbeat data
