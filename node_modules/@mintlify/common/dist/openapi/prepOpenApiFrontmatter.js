import { parse } from 'path';
import { normalizeRelativePath } from '../fs/normalizeRelativePath.js';
import { openApiFrontmatterIsOriginalFileLocation } from './openApiFrontmatterIsOriginalFileLocation.js';
import { potentiallyParseOpenApiString } from './parseOpenApiString.js';
export function prepOpenApiFrontmatter(currPath, openapiFrontmatter) {
    if (!openapiFrontmatter)
        return undefined;
    const openapiObj = potentiallyParseOpenApiString(openapiFrontmatter);
    if ((openapiObj === null || openapiObj === void 0 ? void 0 : openapiObj.filename) && openApiFrontmatterIsOriginalFileLocation(openapiObj.filename)) {
        const currDir = parse(currPath).dir;
        const newOpenApiFilename = normalizeRelativePath(currDir, openapiObj.filename);
        return `${newOpenApiFilename} ${openapiObj.method} ${openapiObj.endpoint}`;
    }
    return openapiFrontmatter;
}
