---
title: Setup
description: Enable Single Editor Mode to allow only one user to edit at a time while others remain in read-only mode.
---

## Prerequisites

- Node.js (v14 or higher)
- React (v16.8 or higher for hooks)
- A Velt account with an API key ([sign up](https://console.velt.dev/))
- Optional: TypeScript for type safety

## Setup

### Step 1: Install Dependencies

Install the required packages:

<Tabs> 
  <Tab title="React">
    ```bash
    npm install @veltdev/react
    ```
  </Tab> 
  <Tab title="Other Frameworks">
    ```bash
    npm install @veltdev/client
    ```
  </Tab>
</Tabs>

### Step 2: Setup Velt

Initialize the Velt client by following the [Velt Setup Docs](/get-started/setup/install). This is required for Single Editor Mode to work.

### Step 3: Initialize Single Editor Mode

- Get the Live State Sync element via hook or client API.
- Enable Single Editor Mode. Optionally pass config:
  - `customMode`: When true, SDK won’t automatically make HTML elements read-only for viewers. You must manage UI state manually. Default: `false`
  - `singleTabEditor`: Restrict editing to a single browser tab for the editor. Default: `true`
- Optionally enable the default UI panel.
- Optionally scope the feature to specific containers.

<Tabs>
<Tab title="React / Next.js">
```jsx
  useEffect(() => {
    // Enable Single Editor Mode
    liveStateSyncElement.enableSingleEditorMode({
      customMode: false,
      singleTabEditor: true
    });

    // Optional: Show default UI panel
    liveStateSyncElement.enableDefaultSingleEditorUI();

    // Optional: Restrict to specific containers
    liveStateSyncElement.singleEditorModeContainerIds(['editor', 'rightPanel']);

    // Cleanup on unmount
    return () => liveStateSyncElement.disableSingleEditorMode();
  }, []);

  return (
    <div id="editor">
      {/* Your editor/app UI */}
      <VeltSingleEditorModePanel shadowDom={false} />
    </div>
  );
```
</Tab>

<Tab title="Other Frameworks">
```html
<!-- After initializing Velt client -->
<script type="module">
  import { initVelt } from '@veltdev/client';

  let client;
  (async () => {
    client = await initVelt('YOUR_API_KEY');
    const liveStateSyncElement = client.getLiveStateSyncElement();

    liveStateSyncElement.enableSingleEditorMode({
      customMode: false,
      singleTabEditor: true
    });

    // Optional default UI
    liveStateSyncElement.enableDefaultSingleEditorUI();

    // Optional: Scope to containers
    liveStateSyncElement.singleEditorModeContainerIds(['editor', 'rightPanel']);
  })();
</script>

<!-- Optional built-in UI panel -->
<velt-single-editor-mode-panel shadow-dom="false"></velt-single-editor-mode-panel>
```
</Tab>
</Tabs>

## Notes

- **Initialize Velt first**: Ensure the Velt client is initialized and the user/document are set before enabling Single Editor Mode.
- **Default UI**: The built-in UI can be shown with `enableDefaultSingleEditorUI()` and/or by rendering `<VeltSingleEditorModePanel />` (React) or `<velt-single-editor-mode-panel>` (HTML).
- **Restrict scope**: Use `singleEditorModeContainerIds([...])` to limit Single Editor Mode to specific containers instead of the entire DOM.
- **Native elements only**: When `customMode: true`, you must mark native HTML elements with attributes to control them:
  - `data-velt-sync-access="true"` to enable control
  - `data-velt-sync-access-disabled="true"` to exclude elements
  - These attributes work on native elements only, not directly on React components.

## Testing and Debugging

**To test Single Editor Mode:**
1. Open the same document as two different users in separate browser profiles (or two windows with different auth states).
2. Try editing simultaneously. Only one user should be able to edit; the other stays read-only.
3. Use the default UI panel to request/transfer access and verify the flow.

**Common issues:**
- UI not visible: Ensure `enableDefaultSingleEditorUI()` is called or the panel component/element is rendered.
- Elements not disabled: If using `customMode: true`, ensure you set `data-velt-sync-access` attributes on native elements. Attributes do not attach to React components.
- Editor can edit in multiple tabs: Confirm `singleTabEditor` is `true`. Use `editCurrentTab()` to move the editor role to the current tab.

## Complete Example

<Tabs>
<Tab title="Complete Code">
```jsx Relevant Code expandable lines
import React, { useEffect } from 'react';
import {
  VeltProvider,
  useLiveStateSyncUtils,
  VeltSingleEditorModePanel,
  useUserEditorState,
  useEditorAccessRequestHandler
} from '@veltdev/react';

function SingleEditorExample() {
  const liveStateSyncElement = useLiveStateSyncUtils();
  const { isEditor, isEditorOnCurrentTab } = useUserEditorState();
  const editorAccessRequested = useEditorAccessRequestHandler();

  useEffect(() => {
    liveStateSyncElement.enableSingleEditorMode({ singleTabEditor: true });
    liveStateSyncElement.enableDefaultSingleEditorUI();
    return () => liveStateSyncElement.disableSingleEditorMode();
  }, []);

  return (
    <div id="editor">
      <div>Active editor: {isEditor ? 'Yes' : 'No'}</div>
      <div>Editing on this tab: {isEditorOnCurrentTab ? 'Yes' : 'No'}</div>
      {editorAccessRequested && <div>Access requested by: {editorAccessRequested.requestedBy?.email}</div>}
      <VeltSingleEditorModePanel shadowDom={false} />
    </div>
  );
}

export default function App() {
  return (
    <VeltProvider apiKey="YOUR_API_KEY">
      <SingleEditorExample />
    </VeltProvider>
  );
}
```
</Tab>

<Tab title="Live Demo">

[Open in larger window](https://landing-page-demo-velt.vercel.app/?feature=single-editor-mode&layout=vertical)

<Frame>
  <iframe
    src="https://landing-page-demo-velt.vercel.app/?feature=single-editor-mode&layout=vertical"
    className="w-full"
    height="500px"
  ></iframe>
</Frame>

</Tab>
</Tabs>

## APIs

### Enable/Disable

<Tabs>
<Tab title="React / Next.js">
```jsx
const liveStateSyncElement = useLiveStateSyncUtils();

// Enable with optional config
liveStateSyncElement.enableSingleEditorMode({
  customMode: false,
  singleTabEditor: true
});

// Disable
liveStateSyncElement.disableSingleEditorMode();
```
</Tab>

<Tab title="Other Frameworks">
```jsx
const liveStateSyncElement = Velt.getLiveStateSyncElement();

// Enable with optional config
liveStateSyncElement.enableSingleEditorMode({
  customMode: false,
  singleTabEditor: true
});

// Disable
liveStateSyncElement.disableSingleEditorMode();
```
</Tab>
</Tabs>

### Scope and Fine-Tuning

<Tabs>
<Tab title="React / Next.js">
```jsx
const liveStateSyncElement = useLiveStateSyncUtils();

// Limit Single Editor Mode to specific containers
liveStateSyncElement.singleEditorModeContainerIds(['rightPanel', 'editor']);

// Custom Mode (manual control on native elements)
return (
  <>
    <div data-velt-sync-access="true">Controlled by Single Editor Mode</div>
    <button data-velt-sync-access-disabled="true">Not controlled</button>
  </>
);
```
</Tab>

<Tab title="Other Frameworks">
```html
<!-- Limit Single Editor Mode to specific containers -->
<script>
const liveStateSyncElement = Velt.getLiveStateSyncElement();
liveStateSyncElement.singleEditorModeContainerIds(['rightPanel', 'editor']);
</script>

<!-- Custom Mode (manual control on native elements) -->
<div data-velt-sync-access="true">Controlled by Single Editor Mode</div>
<button data-velt-sync-access-disabled="true">Not controlled</button>
```
</Tab>
</Tabs>

<Warning>
You must add the `data-velt-sync-access-*` attributes to native HTML elements (e.g., `div`, `button`, `input`) when using `customMode: true`. These attributes do not work when applied directly to React components.
</Warning>

### Timeouts and Tab Control

<Tabs>
<Tab title="React / Next.js">
```jsx
const liveStateSyncElement = useLiveStateSyncUtils();

// Set automatic editor access timeout (seconds; default 5)
liveStateSyncElement.setEditorAccessTimeout(15);

// Transfer on timeout
liveStateSyncElement.enableEditorAccessTransferOnTimeOut();
// Or disable
liveStateSyncElement.disableEditorAccessTransferOnTimeOut();

// Move editor role to this tab
liveStateSyncElement.editCurrentTab();
```
</Tab>

<Tab title="Other Frameworks">
```jsx
const liveStateSyncElement = Velt.getLiveStateSyncElement();

liveStateSyncElement.setEditorAccessTimeout(15);
liveStateSyncElement.enableEditorAccessTransferOnTimeOut();
// Or
liveStateSyncElement.disableEditorAccessTransferOnTimeOut();

liveStateSyncElement.editCurrentTab();
```
</Tab>
</Tabs>

### Access Requests

<Tabs>
<Tab title="React / Next.js">
```jsx
import {
  useUserEditorState,
  useEditor,
  useEditorAccessRequestHandler,
  useLiveStateSyncUtils
} from '@veltdev/react';

const liveStateSyncElement = useLiveStateSyncUtils();

// Request access; emits null → pending, true/false → resolved
const subscription = liveStateSyncElement.requestEditorAccess().subscribe((status) => {
  if (status === null) console.log('Request pending');
  else if (status) console.log('Request accepted');
  else console.log('Request rejected');
});

// Cancel request
liveStateSyncElement.cancelEditorAccessRequest();

// Hooks
const { isEditor, isEditorOnCurrentTab } = useUserEditorState();
const editor = useEditor(); // User | null
const editorAccessRequested = useEditorAccessRequestHandler(); // { requestStatus, requestedBy } | null
```
</Tab>

<Tab title="Other Frameworks">
```jsx
const liveStateSyncElement = Velt.getLiveStateSyncElement();

let subscription = liveStateSyncElement.requestEditorAccess().subscribe((status) => {
  if (status === null) console.log('Request pending');
  else if (status) console.log('Request accepted');
  else console.log('Request rejected');
});

liveStateSyncElement.cancelEditorAccessRequest();
```
</Tab>
</Tabs>

### UI

Render the default panel to handle request/accept/reject flows and editor tab changes.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltSingleEditorModePanel shadowDom={false} />
```
</Tab>

<Tab title="Other Frameworks">
```html
<velt-single-editor-mode-panel shadow-dom="false"></velt-single-editor-mode-panel>
```
</Tab>
</Tabs>