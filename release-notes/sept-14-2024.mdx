# 3.0.11

## New Features
- [**Velt If Conditional Rendering**]: Added support for conditional rendering based on annotation properties:
  <Tabs>
  <Tab title="HTML">
  ```html
  <velt-if condition="{annotation.status.id} === 'OPEN' && {annotation.comments.length} === 3">
    <!-- Content to render if condition is true -->
  </velt-if>
  ```
  </Tab>
  <Tab title="React">
  ```jsx
  <VeltIf condition="{annotation.status.id} === 'OPEN' && {annotation.comments.length} === 3">
    {/* Content to render if condition is true */}
  </VeltIf>
  ```
  </Tab>
  </Tabs>

- [**Confirm Dialog Customization**]: Added ability to customize child components in confirm dialogs for various elements:
  - Supported variants: recorder, area, arrow, comment, tag

- [**Global Unread Count**]: Introduced new data properties for unread counts:
  - `unreadCommentAnnotationCount`: Number of unread comment annotations
  - `unreadCommentCount`: Total number of unread comments

- [**Comments**]: Added `updateContext` method for updating custom metadata (`context`) on comment annotations:
  - Available as a callback in `onCommentUpdate` event
  - Available as an API method in the comment element

  <Tabs>
  <Tab title="onCommentUpdate Event">
  ```javascript
  const commentElement = client.getCommentElement();
  commentElement.onCommentUpdate().subscribe((data) => {
    if (data?.updateContext) {
      const updateContextConfig = { merge: true }; // Optional
      data.updateContext(YOUR_CONTEXT_OBJECT, updateContextConfig);
    }
  });
  ```
  </Tab>
  <Tab title="API Method">
  ```javascript
  const commentElement = client.getCommentElement();
  const updateContextConfig = { merge: true }; // Optional
  commentElement.updateContext(ANNOTATION_ID, YOUR_CONTEXT_OBJECT, updateContextConfig);
  ```
  </Tab>
  </Tabs>

## Improvements
- [**Comments**]: Updated the icon for the Unresolve button.
- [**Comments**]: Whenever the comment sidebar is opened using the button or the api, any open comment dialog will be closed.
- [**Comments**]: Made position of the reaction tool consistent across different states and content types in the comment dialog.

## Bug Fixes
- [**Comments**]: Fixed the flicker issue when new popover comment thread was created. This only happened when the triangle component was disabled.
- [**Comments**]: Fixed minor rendering issue with the @mention chip when it was added at the end of the content.
- [**Velt Components**]: Reduced the default z-index for all Velt Components to prevent them from going over the host app's header or any other important UI elements.
- [**Comments**]: Fixed menu overlay positioning to stay with its trigger during page scrolling.