<Update label="4.5.0-beta.1" description="May 21 2025">
### New Features
- [**Recorder**]: Added zooming functionality. Users can now add smooth zoom in and out effects on the video scenes. Note: This is in beta and currently the processing time for zoom in effect is quite high. We are working to optimize it.

### Improvements
- [**Recorder**]: Improved wireframes for video editor elements with mouse events to remove all styles if children are provided in the wireframe. Earlier for these elements, some residual styles were required to be overridden via CSS.
- [**Recorder**]: Added the `recordingEditDone` event. This event fires the recording edits are done processing and the new recording file is generated.
  <Tabs>
  <Tab title="React / Next.js">
  ```jsx
  const recordingEditDoneEvent = useRecorderEventCallback('recordingEditDone');
  useEffect(() => {
      if (recordingEditDoneEvent) {
          console.log('recordingEditDone: ', recordingEditDoneEvent);
      }
  }, [recordingEditDoneEvent]);

  ```
  </Tab>
  <Tab title="Other Frameworks">
  ```javascript
  const recorderelement = Velt.getRecorderElement();
  recorderelement.on('recordingEditDone').subscribe((event) => {
      console.log('recording edit done:' , event);
  });

  ```
  </Tab>
  </Tabs>

- [**Recorder**]: Added the `deleteRecordings` API method to delete recordings.
<Tabs>
<Tab title="React / Next.js">
**Using API:**
```ts
const recorderelement = client.getRecorderElement();
await recorderelement.deleteRecordings({
    recorderIds: ['RECORDER_ID_1']
});

```
</Tab>
<Tab title="Other Frameworks">
```js
const recorderelement = Velt.getRecorderElement();
await recorderelement.deleteRecordings({
    recorderIds: ['RECORDER_ID_1']
});
```
</Tab>
</Tabs>

</Update>


<Update label="4.4.0" description="May 16 2025">
### Bug Fixes
- [**Core**]: Release 4.4.0 stable version.
</Update>

<Update label="4.4.0-beta.17" description="May 16 2025">
### Bug Fixes
- [**Comments**]: Fixed an issue where the `velt-comment-sidebar-filter-item--Added` class was not being applied correctly in the people filter.
- [**Notifications**]: Fixed an issue where `setNotificationAsRead` was not working as expected in some scenarios.

</Update>

<Update label="4.4.0-beta.16" description="May 15 2025">
### Bug Fixes
- [**Live State Sync**]: Fixed an issue where `serverConnectionState` value was not updating correctly in some scenarios.

</Update>

<Update label="4.4.0-beta.15" description="May 14 2025">
### Improvements
- [**Comments**]: Added support to specify whether the system filters (e.g., "me", "this page") should be combined with an "and" or "or" operator. Default is `and`.

<Tabs>
<Tab title="React / Next.js">
**Using Props:**
```tsx
<VeltCommentsSidebar systemFiltersOperator='or' />
```

**Using API:**
```ts
const commentElement = client.getCommentElement();
commentElement.setSystemFiltersOperator('or');
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments-sidebar system-filters-operator="or"></velt-comments-sidebar>
```
</Tab>
</Tabs>

- [**Comments**]: Improved filters for comments author in the sidebar.


</Update>


<Update label="4.4.0-beta.14" description="May 13 2025">
### Bug Fixes
- [**SDK**]: Fixed an issue where delete notification REST API was causing some older notifications to be hidden in the frontend component.

</Update>

<Update label="4.4.0-beta.13" description="May 13 2025">
### Improvements
- [**REST APIs**]: Added support for persisting read notifications in "For You" tab through `Update Notifications` REST API. You can pass `persistReadForUsers` param as true.

### Bug Fixes
- [**SDK**]: Fixed an issue where the `setAllNotificationsAsRead` SDK API method was not working as expected.

</Update>

<Update label="4.4.0-beta.12" description="May 10 2025">
### Improvements
- [**REST APIs**]: Added realtime updates to SDK when notifications are deleted via the REST APIs.
- [**REST APIs**]: Added support for marking notifications as read through `Update Notifications` REST API.


### Bug Fixes
- [**Single Editor Mode**]: Fixed accept reject buttons disappearing issue when multiple users request access in single editor mode.

</Update>

<Update label="4.4.0-beta.11" description="May 08 2025">
### Improvements
- [**Live State Sync**]: Improved types in `getLiveStateData`, `setLiveStateData` methods and hooks.
- [**Comments Sidebar**]: Ensured that "me" and "this page" options are on the top of the comments sidebar filters.
- [**Notifications**]: Added missing `panelOpenMode` prop to `VeltNotificationsPanel` in React.
  ```tsx
  <VeltNotificationsPanel panelOpenMode='sidebar'/>
  ```


### Bug Fixes
- [**Comments**]: Fixed an edge case where Tiptap comments were not being added when `commentToNearestAllowedElement` is enabled and comment mode is on.

</Update>

<Update label="4.4.0-beta.10" description="May 02 2025">
### New Features
- [**Comments**]: Added ability to attach comment pins to the closest allowed element when clicking on a non-allowed element. Default: `false`

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltComments commentToNearestAllowedElement={true} />
```

**Using API:**
```jsx
const commentElement = client.getCommentElement();
commentElement.enableCommentToNearestAllowedElement();
commentElement.disableCommentToNearestAllowedElement();
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments comment-to-nearest-allowed-element="true"></velt-comments>
```

**Using API:**
```js
const commentElement = Velt.getCommentElement();
commentElement.enableCommentToNearestAllowedElement();
commentElement.disableCommentToNearestAllowedElement();
```
</Tab>
</Tabs>

- [**Comments**]: Added ability to enable/disable draft mode in comments. Default: `true`

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltComments draftMode={false} />
```

**Using API:**
```jsx
const commentElement = client.getCommentElement();
commentElement.enableDraftMode();
commentElement.disableDraftMode();
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments draft-mode="false"></velt-comments>
```

**Using API:**
```js
const commentElement = Velt.getCommentElement();
commentElement.enableDraftMode();
commentElement.disableDraftMode();
```
</Tab>
</Tabs>

- [**Presence**]: Added ability to turn off shadow DOM in Presence component. Default: `true`

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltPresence shadowDom={false} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-presence shadow-dom="false"></velt-presence>
```
</Tab>
</Tabs>

### Improvements
- [**Webhooks**]: Added `assigned: true` in comment added event when someone is assigned to the comment during creation.
- [**Live State Sync**]: Enhanced Redux middleware with support to dynamically update configuration options:
  - `allowedActionTypes`
  - `disabledActionTypes` 
  - `allowAction`

</Update>


<Update label="4.4.0-beta.9" description="Apr 30 2025">
### Bug Fixes
- [**Core**]: Added additional compatibility for Safari v16 and older versions.
</Update>

<Update label="4.4.0-beta.8" description="Apr 29 2025">
### Improvements
- [**Recorder**]: Added ability to control whether recorded videos play in fullscreen mode.
  - You can use this prop on any of the following components:
    - `Velt Recorder Notes`
    - `Velt Recorder Control Panel`
    - `Velt Recorder Player`
  - Its turned on by default for Comments feature and off by default for standalone Recorder feature.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Change behaviour globally
<VeltRecorderNotes playVideoInFullScreen={true} />
<VeltRecorderControlPanel playVideoInFullScreen={true} />
// Change behaviour for specific player 
<VeltRecorderPlayer playVideoInFullScreen={true} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-recorder-notes play-video-in-full-screen="true"></velt-recorder-notes>
<velt-recorder-control-panel play-video-in-full-screen="true"></velt-recorder-control-panel>
<velt-recorder-player play-video-in-full-screen="true"></velt-recorder-player>
```
</Tab>
</Tabs>


- [**Recorder**]: Added keyboard shortcuts in video editor for improved editing experience:
  - `s`: Split the video at the selected frame.
  - `d`, `delete`, or `backspace`: Delete the selected video section.
  - `space`: Toggle video play/pause.

- [**Single Editor Mode**]: Added wireframe for Single Editor Mode Panel.
- [**Single Editor Mode**]: Added embeddable component for Single Editor Mode Panel.

  <Tabs>
  <Tab title="React / Next.js">
  ```jsx
  <VeltSingleEditorModePanel shadowDom={false} darkMode={true} variant="custom-ui" />
  ```
  </Tab>
  <Tab title="Other Frameworks">
  ```html
  <velt-single-editor-mode-panel shadow-dom="false" dark-mode="true" variant="custom-ui"></velt-single-editor-mode-panel>
  ```
  </Tab>
  </Tabs>

</Update>

<Update label="4.4.0-beta.7" description="Apr 28 2025">
### Improvements
- [**UI Customization**]: Added dynamic key support and square bracket notation support in Velt If conditions for more flexible conditional logic.

### Bug Fixes
- [**Follow Mode**]: Fixed an issue where follow mode was not working as expected.
- [**Comments**]: Fixed "All" status filter not displaying all comments in sidebar.

</Update>

<Update label="4.4.0-beta.6" description="Apr 25 2025">

### New Features
- [**UI Customization**]: Added support of adding dynamic id on Velt Button. You can use template variables to set the id.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltButtonWireframe id="someStaticId" type="button-toggle" />
<VeltButtonWireframe id="{annotation.annotationId}" type="button-toggle" />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-button-wireframe id="someStaticId" type="button-toggle"></velt-button-wireframe>
<velt-button-wireframe id="{annotation.annotationId}" type="button-toggle"></velt-button-wireframe>
```
</Tab>
</Tabs>


### Improvements
- [**Recorder**]: Improved video editor UX for trimming and splitting videos.
- [**Single Editor Mode**]: Return `undefined` value in `isUserEditor` when there are no current editors available in single editor mode.
- [**Presence**]: Added `locationId` support in presence component.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltPresence locationId={"YOUR_LOCATION_ID"} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-presence location-id="YOUR_LOCATION_ID"></velt-presence>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Comments**]: Fixed an issue where comment dialog composer in sidebar was getting autofocused when `fullExpanded` mode was enabled.


</Update>

<Update label="4.4.0-beta.5" description="Apr 24 2025">

### New Features
- [**UI Customization**]: Added `resetVeltButtonState` method to reset the state of Velt Button components.

  ```ts
  // Reset state for a specific button in a given group
  client.resetVeltButtonState({id: 'openSidebar', group: 'multi'})

  // Reset state for all buttons in a given group
  client.resetVeltButtonState({group: 'multi'})

  // Reset state for a specific button in all groups
  client.resetVeltButtonState({id: 'openSidebar'})

  // Reset state for all buttons
  client.resetVeltButtonState()
  ```

### Improvements
- [**Comments**]: Updated copy and icons for sidebar filter buttons.
- [**Recorder**]: Made the transition to editor smoother when `autoOpenVideoEditor` is enabled.
- [**Recorder**]: Improved the control panel embedded settings menu UX.
- [**Recorder**]: Added keyboard shortcuts for Play, Pause, Split, and Delete actions in video editor.


### Bug Fixes
- [**Comments**]: Fixed an issue where the dialog might close if the user clicked outside the dialog while a recording was in progress.


</Update>

<Update label="4.4.0-beta.4" description="Apr 23 2025">
### New Features
- [**Self Hosting**]: Added support for self-hosting file attachments in comments.

### Improvements
- [**Self Hosting**]: Added retries for GET operations.
- [**Analytics**]: Exposed additional events to Velt Debugger.
- [**Live State Sync**]: Added config to choose between merging and replacing live state data.

<Tabs>
<Tab title="React / Next.js">
**Using Hooks:**
```ts
const liveStateData = {
  'yourKey': 'yourValue'
};

useSetLiveStateData('LIVE_STATE_DATA_KEY',liveStateData, { merge: true });
```

**Using API:**
```ts
const liveStateSyncElement = useLiveStateSyncUtils();
const liveStateData = {
  'yourKey': 'yourValue'
};
liveStateSyncElement.setLiveStateData('LIVE_STATE_DATA_KEY', liveStateData, {
    merge: true
});
```
</Tab>
<Tab title="Other Frameworks">
```ts
const liveStateSyncElement = Velt.getLiveStateSyncElement();
const liveStateData = {
  'yourKey': 'yourValue'
};
liveStateSyncElement.setLiveStateData('LIVE_STATE_DATA_KEY', liveStateData, {
    merge: true
});
```
</Tab>
</Tabs>

### Bug Fixes
- [**Live State Sync**]: Fixed an issue in the Redux Middleware where the middleware was not initializing when Velt Provider was added conditionally.


</Update>

<Update label="4.4.0-beta.3" description="Apr 23 2025">

### Bug Fixes
- [**Single Editor Mode**]: Fixed an issue where `contenteditable` div's access was not syncing properly when editor state changed.

</Update>

<Update label="4.4.0-beta.2" description="Apr 22 2025">
### Improvements
- [**Recorder**]: Added missing audio waveform visualization for screen recordings.
- [**Recorder**]: Made query parameter optional for `fetchRecordings` method.
- [**Recorder**]: Improved metadata handling to ensure clean object state.
  ```typescript
  export class RecorderData {
    recorderId!: string;
    from?: User | null; 
    metadata?: RecorderMetadata;
    assets: RecorderDataAsset[] = [];
    transcription: RecorderDataTranscription = new RecorderDataTranscription();
  }
  ```
</Update>


<Update label="4.4.0-beta.1" description="Apr 21 2025">

### Improvements
- [**Recorder**]: Added additional props in `Recorder Control Panel` component:
  - `settingsEmbedded`: If set to true, the settings will be embedded in the control panel vs a menu. Default is `false`. Please use this together with the Control Panel Wireframes so that you can move the settings panel in a different part of the control panel UI.
  - `autoOpenVideoEditor`: If set to true, the video editor will be opened automatically when the recording is done. Default is `false`.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltRecorderControlPanel autoOpenVideoEditor={true} settingsEmbedded={true} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-recorder-control-panel auto-open-video-editor="true" settings-embedded="true"></velt-recorder-control-panel>
```
</Tab>
</Tabs>

- [**Recorder**]: Added wireframe for recording preview in recording control panel.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltRecorderControlPanelWireframe.FloatingMode.Screen />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-recorder-control-panel-screen-wireframe></velt-recorder-control-panel-screen-wireframe>
```
</Tab>
</Tabs>

</Update>

<Update label="4.3.0" description="Apr 18 2025">

### New Features
- [**Comments**]: Added `fullExpanded` mode to control the expanded state of comments.
  - When enabled, comments will be shown in fully expanded state by default.
  - Available on all comment-related components and can be controlled via props or API methods.

<Tabs>
<Tab title="React / Next.js">
Using Props:
```jsx
// Apply this change globally to all types of comments
<VeltComments fullExpanded={true} />

// Apply this change only in comments sidebar
<VeltCommentsSidebar fullExpanded={true} />

// Apply this change only in inline comments section
<VeltInlineCommentsSection fullExpanded={true} />

// Apply this change only in the standalone comment thread
<VeltCommentThread fullExpanded={true} />

```
Using API:
```js
const commentElement = client.getCommentElement();
commentElement.enableFullExpanded();
commentElement.disableFullExpanded();
```
</Tab>
<Tab title="Other Frameworks">
Using Props:
```html
<!-- Apply this change globally to all types of comments -->
<velt-comments full-expanded="true"></velt-comments>

<!-- Apply this change only in comments sidebar -->
<velt-comments-sidebar full-expanded="true"></velt-comments-sidebar>

<!-- Apply this change only in inline comments section -->
<velt-inline-comments-section full-expanded="true"></velt-inline-comments-section>

<!-- Apply this change only in the standalone comment thread -->
<velt-comment-thread full-expanded="true"></velt-comment-thread>

```
Using API:
```js
const commentElement = Velt.getCommentElement();
commentElement.enableFullExpanded();
commentElement.disableFullExpanded();
```
</Tab>
</Tabs>

</Update>

<Update label="4.3.0-beta.7" description="Apr 17 2025">

### New Features
- [**Dev Tools**]: Published beta version of Velt Devtools Chrome extension. It allows you to inspect and debug your Velt implementation. If you are interested in trying it out, please reach out to us.
- [**Console**]: Added support for viewing folders, recordings and notifications data in the console data page.
- [**Console**]: Added support for additional filters in the console data page: organizationId, folderId, documentId, userId.
- [**Comments**]: Added support for folder users in `@` mentions dropdown.
- [**Recorder**]: Added an API to subscribe to all recorder data in the current document.
  - Param: `RecorderRequestQuery`, optional, Gets the data for the provided query.
  - Returns: `Observable<GetRecordingsResponse>`, Subscription of the recorder data.

<Tabs>
<Tab title="React / Next.js">

**Using Hook:**
```jsx
const recordings = useRecordings(); 

useEffect(() => {
  console.log('recordings', recordings);
}, [recordings]);
```

**Using API:**
```js
const recorderElement = useRecorderUtils();
recorderElement.getRecordings().subscribe((data) => {
    console.log('recordings', data);
});

```
</Tab>
<Tab title="Other Frameworks">
```js
const recorderElement = Velt.getRecorderElement();
recorderElement.getRecordings().subscribe((data) => {
    console.log('recordings', data);
});
```
</Tab>
</Tabs>

- [**Recorder**]: Extended the `on` event subscription API to include:
  - `recordingDone`: Triggered when recording is completed.
  - `deleteRecording`: Triggered when a recording is deleted.

<Tabs>
<Tab title="React / Next.js">

**Using Hook:**
```jsx
const recordingDoneEvent = useRecorderEventCallback('recordingDone');
const recordingDeleteEvent = useRecorderEventCallback('deleteRecording');

useEffect(() => {
    console.log('recordingDoneEvent', recordingDoneEvent);
}, [recordingDoneEvent]);

useEffect(() => {
    console.log('recordingDeleteEvent', recordingDeleteEvent);
}, [recordingDeleteEvent]);

```

**Using API:**
```js
const recorderElement = useRecorderUtils();

recorderElement.on('recordingDone').subscribe((data) => {
    console.log('recordingDone:' , data);
});

recorderElement.on('deleteRecording').subscribe((data) => {
    console.log('deleteRecording:' , data);
});
```

</Tab>
<Tab title="Other Frameworks">
```js
const recorderElement = Velt.getRecorderElement();

recorderElement.on('deleteRecording').subscribe((data) => {
    console.log('deleteRecording:' , data);
});

recorderElement.on('recordingDone').subscribe((data) => {
    console.log('recordingDone:' , data);
});
```
</Tab>
</Tabs>


### Improvements
- [**UI**]: Made custom list search case insensitive.
- [**Recorder**]: Make the video preview responsive in video editor.
- [**Recorder**]: Improved types for all APIs and Props for the recording feature.

</Update>

<Update label="4.3.0-beta.6" description="Apr 16 2025">

### New Features
- [**Core**]: Added the following events in `on` method of Velt client:
  - `userUpdate`: Triggered when the Velt user is updated.
  - `documentInit`: Triggered when the Velt document is initialized.
  - `error`: Triggered when an error occurs. Currently this is only triggered for `token_expired` error. In future, this will be extended for other relevant errors.

<Tabs>
<Tab title="React / Next.js">
**Using Hook:**
```jsx
const userUpdateEvent = useVeltEventCallback('userUpdate');
const documentInitEvent = useVeltEventCallback('documentInit');
const errorEvent = useVeltEventCallback('error');

useEffect(() => {
    console.log('userUpdate', userUpdateEvent);
}, [userUpdateEvent]);

useEffect(() => {
    console.log('documentInit', documentInitEvent);
}, [documentInitEvent]);

useEffect(() => {
    // for token expired, error.code = 'token_expired'
    console.log('error', errorEvent);
}, [errorEvent]);
```

**Using API:**
```js
client.on('userUpdate').subscribe((user) => {
    console.log('userUpdate', user);
});

client.on('documentInit').subscribe((documentInit) => {
    console.log('documentInit', documentInit);
});

client.on('error').subscribe((error) => {
    // for token expired, error.code = 'token_expired'
    console.log('error', error);
});
```

</Tab>
<Tab title="Other Frameworks">
```js
Velt.on('userUpdate').subscribe((user) => {
    console.log('userUpdate', user);
});

Velt.on('documentInit').subscribe((documentInit) => {
    console.log('documentInit', documentInit);
});

Velt.on('error').subscribe((error) => {
    // for token expired, error.code = 'token_expired'
    console.log('error', error);
});
```
</Tab>
</Tabs>


- [**Recorder**]: Added ability to enable/disable video editor via props on `Velt Recorder Player` and `Velt Recorder Control Panel` components. You could use any of these.

<Tabs>
<Tab title="React / Next.js">
```jsx
 <VeltRecorderPlayer videoEditor={true}  />
 <VeltRecorderControlPanel videoEditor={true}/>
```
</Tab>
<Tab title="Other Frameworks">
```html
 <velt-recorder-player video-editor="true"></velt-recorder-player>
 <velt-recorder-control-panel video-editor="true"></velt-recorder-control-panel>
```
</Tab>
</Tabs>


- [**Recorder**]: Added `recordingCountdown` and `recordingTranscription` props on `Velt Recorder Notes` and `Velt Recorder Control Panel` components.

<Tabs>
<Tab title="React / Next.js">
```jsx
 <VeltRecorderNotes recordingTranscription={false} recordingCountdown={false} />
 <VeltRecorderControlPanel recordingTranscription={false} recordingCountdown={false} />
```
</Tab>
<Tab title="Other Frameworks">
```html
 <velt-recorder-notes recording-countdown="false" recording-transcription="false"></velt-recorder-notes>
 <velt-recorder-control-panel recording-countdown="false" recording-transcription="false"></velt-recorder-control-panel>
```
</Tab>
</Tabs>

- [**Recorder**]: Added video editor wireframes.

### Improvements
- [**Core**]: Improved types for data resolvers.
- [**Recorder**]: Removed drag functionality from recording control panel and player.
- [**Recorder**]: If a `null` value is set for `recorder Id` prop in `Velt Recorder Player` component, a warning will be thrown.

### Bug Fixes
- [**Comments**]: Added a check to prevent an error in @mentions dropdown if the user group has no users and the `expandMentionGroups` config is set to true.

</Update>


<Update label="4.3.0-beta.5" description="Apr 16 2025">
### New Features
- [**Comments**]: Added support for new filters in `fetchCommentAnnotations` method:
  - `resolvedBy`: `string`, Filter comments by user who resolved the comment
  - `userIds`: `string[]`, Filter comments by comment annotation author
  - `mentionedUserIds`: `string[]`, Filter comments if the provided users are tagged in the comment

- [**Contacts**]: Added API and Hook to get the list of users added to organization, document, user groups or the ones overwritten using the `updateContactList` API.

<Tabs>
<Tab title="React / Next.js">
```jsx

export interface UserGroup {
    groupId!: string;
    groupName!: string;
    users?: User[];
}

export interface GetContactListResponse {
    organizationUsers?: User[];
    folderUsers?: User[];
    documentUsers?: User[];
    userGroups?: UserGroup[];
    updatedContactList?: User[];
}


// React Hook
const contactList = useContactList();
console.log(contactList); // initial value will be null

// API method
const contactElement = client.getContactElement();
contactElement.getContactList().subscribe((response) => {
  console.log(response); // initial value will be null
});
```
</Tab>
<Tab title="Other Frameworks">
```js
export interface UserGroup {
    groupId!: string;
    groupName!: string;
    users?: User[];
}

export interface GetContactListResponse {
    organizationUsers?: User[];
    folderUsers?: User[];
    documentUsers?: User[];
    userGroups?: UserGroup[];
    updatedContactList?: User[];
}

// API method
const contactElement = Velt.getContactElement();
contactElement.getContactList().subscribe((response) => {
  console.log(response); // initial value will be null
});
```
</Tab>
</Tabs>

</Update>


<Update label="4.3.0-beta.4" description="Apr 14 2025">

### New Features
- [**Comments**]: Added a config to show expanded user groups inside the @mentions dropdown menu.
  - Added [new wireframes](/ui-customization/features/async/comments/comment-dialog/subcomponents/autocomplete-group-option) to customize the display of user groups.
  - Here are some props to control the display of user groups:
    - `expandMentionGroups`: Whether to expand the user groups and show individual users inside the groups in the @mentions dropdown menu.
    - `showMentionGroupsFirst`: Whether to show the user groups in the @mentions dropdown menu before the non-group users.
    - `showMentionGroupsOnly`: Whether to show only the user groups in the @mentions dropdown menu and not the non-group users.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltComments 
      expandMentionGroups={true} 
      showMentionGroupsFirst={false} 
      showMentionGroupsOnly={false} 
/>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments 
     expand-mention-groups="true" 
     show-mention-groups-first="false"
     show-mention-groups-only="true"
></velt-comments>
```
</Tab>
</Tabs>

- [**Comments Sidebar**]: Added two new default system filters and their wireframes to the sidebar:
  - `Tagged`: Filter comments by specifying the user who was tagged in the comment. ([Wireframe](/ui-customization/features/async/comments/comments-sidebar/subcomponents/filter/subcomponents/tagged))
  - `Assigned`: Filter comments by specifying the user who was assigned to the comment. ([Wireframe](/ui-customization/features/async/comments/comments-sidebar/subcomponents/filter/subcomponents/assigned))

  ```typescript
  class CommentSidebarFilterConfig {
      // ... existing properties ...
      tagged?: FilterTypeConfig;
      assigned?: FilterTypeConfig;
      // ... existing properties ...
  }
  ```
- [**Comments Sidebar**]: Added another UI pattern for filters options: searchable dropdown with checklist. ([Example Wireframe](/ui-customization/features/async/comments/comments-sidebar/subcomponents/filter/subcomponents/tagged))

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltCommentsSidebar filterOptionLayout="dropdown | checkbox"/>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments-sidebar filter-option-layout="dropdown | checkbox"></velt-comments-sidebar>
```
</Tab>
</Tabs>

- [**Comments Sidebar**]: Added a reset filter button. ([Wireframe](/ui-customization/features/async/comments/comments-sidebar/subcomponents/filter/subcomponents/reset-button))
- [**Comments Sidebar**]: Added prop to disable count calculation for sidebar filter options.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltCommentsSidebar filterCount={false}/>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments-sidebar filter-count="false"></velt-comments-sidebar>
```
</Tab>
</Tabs>

</Update>


<Update label="4.3.0-beta.3" description="Apr 11 2025">
### Improvements
- [**Comments**]: Updated `getCommentAnnotations()` method to now [query](/api-reference/sdk/models/api-request-objects#commentrequestquery) and subscribe to comments data even if its not the currently set document.
- [**Comments**]: Improved comment dialog positioning on text comments when the text is at the bottom edge of the page.
- [**Notifications**]: Added support in `getNotificationsData()` for retrieving custom notifications created with `notifyAll: false`.
- [**REST API**]: Improved the performance of [GDPR Delete API](/api-reference/rest-apis/users/delete-all-user-data-gdpr) and made it 90%+ faster and more efficient.

### Bug Fixes
- [**Comments**]: Fixed an issue with SlateJS comments where comment was not being added when the text was selected from right to left.

</Update>

<Update label="4.3.0-beta.2" description="Apr 7 2025">
### Improvements
- [**Recorder**]: Optimized the video recording performance: 50% smaller files with 90% faster uploads!
</Update>

<Update label="4.3.0-beta.1" description="Apr 7 2025">
### Improvements
- [**Core**]: Upgraded several dependency packages to new versions.
</Update>

<Update label="4.2.1-beta.11" description="Apr 4 2025">
### Improvements
- [**REST API**]: Added support to get all user data for GDPR requests. [Learn more](/api-reference/rest-apis/users/get-all-user-data-gdpr).
</Update>

<Update label="4.2.1-beta.11" description="Apr 3 2025">
### Improvements
- [**Localization**]: Added additional null checks for provided localization strings.
- [**REST API**]: Added support for special characters (`_`, `-`) while creating custom notifications.
</Update>

<Update label="4.2.1-beta.10" description="Apr 3 2025">
### New Features
- [**Localization**]: Added support for localization for all static strings visible in the SDK Components.
  - You can get the complete list of strings that can be localized [here](https://firebasestorage.googleapis.com/v0/b/snippyly.appspot.com/o/external%2Flocalization-strings-map.json?alt=media&token=0cdd2b52-10ed-4033-a08a-5c2b622ce7df).
<Tabs>
<Tab title="React / Next.js">
```jsx
// Provide the localization object for the languages you want to support.
client.setTranslations({
  'en': {
    'All comments': 'All comments',
  },
  'fr': {
    'All comments': 'Tous les commentaires',
  },
  // Add more languages as needed.
});

// Set one of the languages you've provided the translations for.
client.setLanguage('en');
```
</Tab>
<Tab title="Other Frameworks">
```js
// Provide the localization object for the languages you want to support.
Velt.setTranslations({
  'en': {
    'All comments': 'All comments',
  },
  'fr': {
    'All comments': 'Tous les commentaires',
  },
  // Add more languages as needed.
});

// Set one of the languages you've provided the translations for.
Velt.setLanguage('en');
```
</Tab>
</Tabs>

- [**Comments**]: Added support for `.txt` file attachments in Comments.

</Update>

<Update label="4.2.1-beta.9" description="Apr 2 2025">
### New Features
- [**Comments, Notifications**]: Added a first-party [extension](https://www.npmjs.com/package/@veltdev/slate-velt-comments) for [SlateJS](https://www.slatejs.org/) to allow comments and notifications on text content.

</Update>

<Update label="4.2.1-beta.8" description="Apr 2 2025">
### Bug Fixes
- [**UI Customization**]: Fixed an issue where empty wireframes for repeated components were not being rendered in some scenarios.

### Improvements
- [**Comments**]: Changed default value of `pin-highlighter` to false for better initial experience.
- [**REST API**]: Added `deleteAll` parameter to [`/v1/organizations/usergroups/users/delete`](/api-reference/rest-apis/organization-user-groups/delete-users-from-group) remove all users from a group.
- [**REST API**]: Added `metadata` field on the returned comment annotation objects. It will contain documentId, organizationId, folderId, etc.

</Update>

<Update label="4.2.1-beta.7" description="Mar 31 2025">
### Improvements
- [**Recorder**]: Improved the video editor to be smoother and enabled "select and delete" feature.
- [**Recorder**]: Added support for audio waveform visualization in video recordings.
- [**Recorder**]: Reduced the size of the video recordings by 50%.
</Update>

<Update label="4.2.1-beta.6" description="Mar 28 2025">
### New Features
- [**Reactions**]: Added support for self hosting reactions data.

### Improvements
- [**Core**]: Improved signature of User Resolver (used for self hosting user PII) for better consistency with backward compatibility.
- [**Core**]: Extended data resolvers with an option to configure retries and optimized operation order to prioritize client-side execution. Learn more [here](/api-reference/sdk/models/data-models#resolverconfig).
- [**REST API**]: Added support for updating users in existing comment annotations via REST APIs. Learn more [here](/api-reference/rest-apis/comments-feature/comment-annotations/update-comment-annotations#param-update-users).
</Update>

<Update label="4.2.1-beta.5" description="Mar 26 2025">
### Improvements
- [**Core**]: Added support for automatic folder creation from the frontend when folders don't exist. New documents without existing data are now automatically added to the currently set folder.
- [**REST API**]: Added support for user mentions via REST APIs. Learn more [here](/api-reference/rest-apis/comments-feature/comment-annotations/add-comment-annotations).

### Bug Fixes
- [**Comments**]: Fixed an issue where deleting inline comments in multi-document scenarios wasn't always updating the UI state.

</Update>

<Update label="4.2.1-beta.4" description="Mar 21 2025">

### New Features
- [**Core**]: Added `updateLocations` method to update location(s) metadata. Previously this could only be done via REST APIs.

```js
client.updateLocations({
  organizationId: 'org1', 
  documentIds: ['doc1', 'doc2'], 
  locations: [{
    id: 'location1', 
    locationName: 'MyLocation'
  }]
})

export interface UpdateLocationsRequest<T = unknown> {
    organizationId?: string;
    documentIds?: string[];
    locations?: UpdateLocationMetadata<T>[];
}

export interface UpdateLocationMetadata<T = unknown> {
    id: string;
    [key: string]: T | string;
}
```

### Improvements
- [**Core**]: Improved types for `updateDocuments` method.

```js
client.updateDocuments({
  organizationId: 'org1', 
  documents: [{
    documentId: 'doc1', 
    documentName: 'MyDoc'
  }]
})

export interface UpdateDocumentsRequest<T = unknown> {
    organizationId?: string;
    documents?: UpdateDocumentMetadata<T>[];
}

export interface UpdateDocumentMetadata<T = unknown> {
    documentId: string;
    [key: string]: T | string;
}
```
- [**Core**]: Added support for location persistence by after debounced document updates.
- [**Core**]: Show the most updated location metadata in features like sidebar and notifications even if the features have stale data.
- [**Core**]: `client.getMetadata()` method now provides most updated information about organization, folders documents and locations for debugging purposes.
- [**Core**]: Added logs for get API methods like `fetchCommentAnnotations` if it's called without an authenticated user.
- [**Core**]: SDK state and location are preserved after auto-relogin when browser extensions clear indexedDb during idle periods of >1hr.
- [**Core**]: Enhanced `disableLogs` method with more granular control:
  - `disableLogs()`: turns off only warnings
  - `disableLogs({suppressAll: true})`: turns off all logs
  - `disableLogs({warning: false, suppressAll: true})`: Keeps the warning logs but turns off all other logs

</Update>

<Update label="4.2.1-beta.3" description="Mar 20 2025">

### Improvements
- [**Core**]: Auto-relogin user in rare scenarios where after an hour of idle time indexedDb is cleared by browser extensions.
</Update>

<Update label="4.2.1-beta.2" description="Mar 20 2025">

### New Features
- [**Comments**]: Added `svgAsImg` configuration in comments to treat SVGs as images instead layered elements. Default is `false`.
<Tabs>
<Tab title="React / Next.js">
**Using Props:**
```jsx
<VeltComments svgAsImg={true} />
```

**Using API:**
```jsx
const commentElement = client.getCommentElement();
commentElement.enableSvgAsImg();
commentElement.disableSvgAsImg();
```
</Tab>
<Tab title="Other Frameworks">
**Using Props:**
```html
<velt-comments svg-as-img="true"></velt-comments>
```

**Using API:**
```html
const commentElement = client.getCommentElement();
commentElement.enableSvgAsImg();
commentElement.disableSvgAsImg();
```
</Tab>
</Tabs>

### Improvements
- [**Comments**]: Added `data-velt-comment-dialog-comments-priority` attribute in comment dialog if a comment priority is set. This can be used to style comments differently based on their priority.
- [**Notifications**]: Changed min height to 300px in Notification panel.
- [**Comments**]: Added ability to apply filters via API before mounting the Sidebar (in embed mode).

</Update>

<Update label="4.2.1-beta.1" description="Mar 19 2025">

### Improvements
- [**Comments**]: Now, if both inline and popover comments are used, clicking on a comment in the inline comments section will not activate comment bubble.
- [**Comments**]: Added additional classes to inline comments section's container divs to allow for more precise custom styling.
- [**Core**]: Added configuration options to aggressively suppress error messages especially on Safari related to index db and network errors.
```js
client.disableLogs({suppressAll:true})
```

### Bug Fixes
- [**Comments**]: Added missing type for `placeholder` field in `createCustomListDataOnAnnotation` in React.
- [**Comments**]: Fixed minor bugs with Custom Lists wireframes.

</Update>

<Update label="4.2.0" description="Mar 18 2025">

### Improvements
- [**Notifications**]: Added minimum height to notification panel to prevent layout shift when there is just one notification.
- [**Notifications**]: Removed default styling from notifications tool when Wireframe is used.
- [**Comments**]: Added active state support in Tiptap comments mark tags.

### Bug Fixes
- [**Comments**]: Fixed an issue with `onCommentAdd` event that was not triggered once the comments component was unmounted and remounted during the session.

</Update>

<Update label="4.2.0-beta.5" description="Mar 13 2025">

### New Features
- [**Debugging**]: Added events for `unsetDocuments` and `unsetLocations`.
- [**Comments**]: Added type for `fetchCommentAnnotations` in `CommentElement` for React.
- [**Documents**]: Added `updateDocuments` method to update document(s) metadata.
```js
client.updateDocuments({
  organizationId: 'org1',
  documents: [
    {
      documentId: 'document-id',
      documentName: 'document-name'
    }, 
    {
      documentId: 'document-id-2',
      documentName: 'document-name-2'
    }
  ]
});

export interface UpdateDocumentsRequest {
    organizationId?: string;
    documents?: {documentId: string; [key: string]: any}[];
}
```

- [**Debugging**]: Added `folderId` property in `Velt.getMetadata()` response.

</Update>

<Update label="4.2.0-beta.4" description="Mar 12 2025">

### Improvements
- [**Notifications**]: Improved the notification tool component to prevent layout shift when notification count was updated.

### Bug Fixes
- [**Comments**]: Added missing type definition for Sidebar Filter Config in React to include status property.

</Update>

<Update label="4.2.0-beta.3" description="Mar 11 2025">

### Improvements
- [**Comments**]: Improved type names for comment resolver.

```ts
// Data models
export interface VeltDataProvider {
    comment?: CommentAnnotationDataProvider;
    user?: UserDataProvider;
}

export interface CommentAnnotationDataProvider {
    get: (request: GetCommentResolverRequest) => Promise<Record<string, PartialCommentAnnotation>>;
    save: (request: SaveCommentResolverRequest) => Promise<void>;
    delete: (request: DeleteCommentResolverRequest) => Promise<void>;
    resolveTimeout?: number; // optional. In milliseconds. Expected timeout to get a response from your API.
}

export interface GetCommentResolverRequest {
    organizationId: string;
    commentAnnotationIds?: string[];
    documentIds?: string[];
    folderId?: string;
    allDocuments?: boolean;
}

export interface SaveCommentResolverRequest {
    commentAnnotation: { [key: string]: PartialCommentAnnotation };
}

export interface PartialComment {
    commentId: string | number;
    commentHtml?: string;
    commentText?: string;
}

export interface PartialCommentAnnotation {
    annotationId: string;
    metadata?: VeltMetadata;
    comments: {
        [commentId: string]: PartialComment;
    };
}
```

</Update>

<Update label="4.2.0-beta.2" description="Mar 7 2025">

### New Features
- [**Recorder**]: Added Video Editing feature allowing users to edit recorded videos.

<Tabs>
<Tab title="React / Next.js">
**Using Props:**
```jsx
<VeltRecorderNotes videoEditor={true} />
```

**Using API:**
```jsx
const recorderElement = client.getRecorderElement();
recorderElement.enableVideoEditor();
recorderElement.disableVideoEditor();
```
</Tab>
<Tab title="Other Frameworks">
**Using Props:**
```html
<velt-recorder-notes video-editor="true"></velt-recorder-notes>
```

**Using API:**
```html
const recorderElement = Velt.getRecorderElement();
recorderElement.enableVideoEditor();
recorderElement.disableVideoEditor();
```
</Tab>
</Tabs>

### Improvements
- [**Recorder**]: Improved Recorder player UX.

</Update>

<Update label="4.2.0-beta.1" description="Mar 7 2025">

### New Features
- [**Comments**]: Comments Self Hosting now available. Store and retrieve comment and notification text on your own backend while using Velt's UI components.
  - Combined with existing user PII self hosting, you can now store all sensitive data on your infrastructure.
  - Support for self-hosted attachments and recordings coming soon.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Define your comment data provider
const commentDataProvider = {
  get: async (request) => {
    const result = await getDataFromYourServer(request);
    // Ensure the result is in the required format
    return result;
  },
  save: async (request) => {
    const result = await saveDataOnYourServer(request);
    return result;
  },
  delete: async (request) => {
    await deleteDataFromYourServer(request.commentAnnotationId);
  },
};

// Set the data provider
<VeltProvider
  apiKey="YOUR_API_KEY_HERE"
  dataProviders={{ comment: commentDataProvider }}>
  {/* Your app content */}
</VeltProvider>
```

**Request Objects:**
```js
// GET Request:
{
    organizationId: string;
    commentAnnotationIds?: string[];
    documentIds?: string[];
    folderId?: string;
    allDocuments?: boolean;
}

// Save Request:
{
    commentAnnotation: { [key: string]: IStrippedCommentAnnotation };
}

// IStrippedCommentAnnotation:
{
    annotationId: string;
    metadata?: any;
    comments: {
        [commentId: string]: StrippedComment;
    };
}

// StrippedComment:
{
    commentId: string | number;
    commentHtml?: string;
    commentText?: string;
}

// Delete Request:
{
    commentAnnotationId: string;
    metadata?: any;
}
```
</Tab>

<Tab title="Other Frameworks">
```js
// Define your comment data provider
const commentDataProvider = {
  get: async (request) => {
    const result = await getDataFromYourServer(request);
    // Ensure the result is in the required format
    return result;
  },
  save: async (request) => {
    const result = await saveDataOnYourServer(request);
    return result;
  },
  delete: async (request) => {
    await deleteDataFromYourServer(request.commentAnnotationId);
  },
};

// Set the data provider
client.setDataProviders({
  comment: commentDataProvider,
});
```

**Request Objects:**
```js
// GET Request:
{
    organizationId: string;
    commentAnnotationIds?: string[];
    documentIds?: string[];
    folderId?: string;
    allDocuments?: boolean;
}

// Save Request:
{
    commentAnnotation: { [key: string]: IStrippedCommentAnnotation };
}

// IStrippedCommentAnnotation:
{
    annotationId: string;
    metadata?: any;
    comments: {
        [commentId: string]: StrippedComment;
    };
}

// StrippedComment:
{
    commentId: string | number;
    commentHtml?: string;
    commentText?: string;
}

// Delete Request:
{
    commentAnnotationId: string;
    metadata?: any;
}
```
</Tab>
</Tabs>
</Update>

<Update label="4.1.1" description="Mar 5 2025">
### Improvements
- [**Comments**]: Added mobile support for inline comment section, improving the user experience on smaller screens.
- [**Debugging**]: Now `client.getMetadata()` method only returns the currently set documents instead of all documents used in the current session.

</Update>

<Update label="4.1.0" description="Mar 4 2025">

### New Features
- [**Comments**]: Tiptap comments marks are now persisted automatically by default. This simplifies implementation as you no longer need to store marks yourself or modify your editor's content handling.
- [**Comments**]: Added Sorting Dropdown Wireframe support for inline comments section. [Learn more](/ui-customization/features/async/comments/inline-comments-section/subcomponents/panel/sorting-dropdown)

### Improvements
- [**Comments**]: Made the freestyle comment pins adapt to DOM elements with complex layouts.
- [**Comments**]: Improved loading skeleton in inline comments section to match comment card width and adapt responsively to smaller widths.
- [**Comments**]: Improved the alignment of the assign to dropdown in inline comments section when the width of the section is large.
- [**Comments**]: Added dark mode styling for the new sorting dropdown in inline comments section.

### Bug Fixes
- [**Comments**]: Fixed an issue where the comment bubble was not keeping the dialog open when a fresh annotation was added.

</Update>

<Update label="4.0.0-beta.27" description="Feb 28 2025">

### New Features
- [**Comments**]: Added a default sorting UI component in the inline comments section. This was one of the most requested features.
- [**Comments**]: Added config to prevent deleting the entire thread when the first comment is deleted.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltComments deleteThreadWithFirstComment={false} />
```
</Tab>
<Tab title="Other Frameworks">
```js
<velt-comments delete-thread-with-first-comment="false"></velt-comments>
```
</Tab>
</Tabs>

### Improvements
- [**Comments**]: Improved the overall UI/UX of the inline comments section based on user feedback, including: loading state, inner padding, layout shift etc.

### Bug Fixes
- [**Comments**]: Fixed an issue where inline comments sorting was not working when the prop was changed dynamically.
- [**Comments**]: Fixed issue in single-threaded mode where delete thread label now correctly appears on the root comment regardless of sorting order.

</Update>

<Update label="4.0.0-beta.26" description="Feb 25 2025">

### New Features
- [**Core**]: Added ability to enable or disable Velt's logs/warnings in Browser Console.

<Tabs>
<Tab title="React / Next.js">
```jsx
client.enableLogs();
client.disableLogs();
```
</Tab>
<Tab title="Other Frameworks">
```js
Velt.enableLogs();
Velt.disableLogs();
```
</Tab>
</Tabs>

### Improvements
- [**Core**]: Added performance improvements for scenarios where the user accesses and switches between large number of documents at a high frequency.

</Update>



<Update label="4.0.0-beta.25" description="Feb 20 2025">

### Improvements
- [**Recording**]: Improved [`TranscriptionDoneEvent`](/api-reference/sdk/models/api-event-objects#transcriptiondoneevent) object.

- [**Comments**]: Fixed `useSetDocuments` hook to properly support `setDocuments` method in dependency array in React `useEffect`:
```jsx
const { setDocuments } = useSetDocuments();
useEffect(() => {
    setDocuments(yourDocuments);
}, [setDocuments]);
```
- [**Comments**]: Made small UI improvements:
  - Removed 0 from Velt bubble count.
  - Fixed Velt bubble wireframe layout shift issue.

### Bug Fixes
- [**Comments**]: Fixed small UI issues:
  - Fixed an issue where draft comments were showing up when reaction was updated.
  - Fixed an issue where selecting a comment in inline comment section was also opening the Velt Comment bubble.
  - Fixed an issue where focused thread mode scroll was not working as expected.
</Update>

<Update label="4.0.0-beta.24" description="Feb 17 2025">
### Bug Fixes
- [**Comments**]: Fixed an issue where the SeenBy dropdown wasn't opening on the first click.
- [**Comments**]: Fixed an issue where clicking @mention button was not opening the mention dropdown. Typing @ was working as expected.
- [**Comments**]: Fixed a re-rendering issue when adding reactions.

</Update>

<Update label="4.0.0-beta.23" description="Feb 15 2025">
### New Features
- [**Core**]: Added `getUser` method to get the current user.

<Tabs>
<Tab title="React / Next.js">
```jsx
const user = client.getUser();
console.log(user);
```
</Tab>
<Tab title="Other Frameworks">
```js
const user = Velt.getUser();
console.log(user);
```
</Tab>
</Tabs>

- [**UI Customization**]: Simplified how UI can be customized using wireframes.
  - Conditional Component Rendering: Conditionally render any component directly without needing to specify parent or sibling wireframes.
  - Conditional CSS Classes: Classes can now be conditionally applied to components based on the data in the component.
  - Wireframe CSS Classes Support: CSS Classes added to wireframes components are automatically applied to the related rendered components.
  
<Tabs>
<Tab title="React / Next.js">
**Conditional Component Rendering:**

``` jsx
// Old
<VeltCommentDialogWireframe.Header>
  <VeltIf condition="{annotation.status.id} === 'OPEN'" >
      <VeltCommentDialogWireframe.Status />
  </VeltIf>
</VeltCommentDialogWireframe.Header>


// New
<VeltCommentDialogWireframe.Status veltIf="{annotation.status.id} === 'OPEN'" />
```

**Conditional CSS Classes:**

``` jsx
<VeltCommentDialogWireframe.ThreadCard.Message veltClass="'color-yellow': {annotation.status.id} === 'in_progress'" />
```

**Wireframe CSS Classes Support:**

``` jsx
<VeltCommentDialogWireframe.ThreadCard.Message className="color-yellow" />
```

</Tab>
<Tab title="Other Frameworks">
**Conditional Component Rendering:**
``` html
<!-- Old -->
<velt-comment-dialog-header-wireframe>
  <velt-if condition="{annotation.status.id} === 'OPEN'" >
      <velt-comment-dialog-status-wireframe></velt-comment-dialog-status-wireframe>
  </velt-if>
</velt-comment-dialog-header-wireframe>


<!-- New -->
<velt-comment-dialog-status-wireframe velt-if="{annotation.status.id} === 'OPEN'" >
</velt-comment-dialog-status-wireframe>
```

**Conditional CSS Classes:**

``` jsx
<velt-comment-dialog-thread-card-message-wireframe velt-class="'color-yellow': {annotation.status.id} === 'in_progress'" > </velt-comment-dialog-thread-card-message-wireframe>
```

**Wireframe CSS Classes Support:**
``` html
<velt-comment-dialog-thread-card-message-wireframe class="color-yellow"> </velt-comment-dialog-thread-card-message-wireframe>
```
</Tab>
</Tabs>

- [**UI Customization**]: Set and render custom state data into Velt components. This data is available in all Velt Wireframes, Velt If and Velt Data components.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Setter
client.setUiState({
    dashboardName: 'MRR Growth',
    anyKey: 'anyValue'
});

// Getter
client.getUiState().subscribe((data) => {
    console.log('UI State: ', data);
});

// Use it in Velt Wireframe
<VeltCommentDialogWireframe.Header>
    <VeltData field={dashboardName} />
</VeltCommentDialogWireframe.Header>

```
</Tab>
<Tab title="Other Frameworks">
```js
// Setter
Velt.setUiState({
    dashboardName: 'MRR Growth',
    anyKey: 'anyValue'
});

// Getter
Velt.getUiState().subscribe((data) => {
    console.log('UI State: ', data);
});

// Use it in Velt Wireframe
<velt-wireframe style="display:none;">
    <velt-comment-dialog-wireframe.header>
        <velt-data field={dashboardName}></velt-data>
    </velt-comment-dialog-wireframe.header>
</velt-wireframe>
```
</Tab>
</Tabs>

- [**Comments**]: Added support for custom autocomplete search for contact list or [custom lists](/async-collaboration/comments/customize-behavior#createcustomlistdataoncomment). You should use this if you have a large dataset that you want to plug into the autocomplete dropdown, and search directly your own data source.

<Tabs>
<Tab title="React / Next.js">
**Enable the feature:**
```jsx
// Enable via props
<VeltComments customAutocompleteSearch={true} />


// Or, enable via Comment Element API
const commentElement = client.getCommentElement();
commentElement.enableCustomAutocompleteSearch();
commentElement.disableCustomAutocompleteSearch();
```

**Set initial list:**
```jsx
// For @mentions feature
contactElement.updateContactList(users);

// For custom list feature
commentElement.createCustomListDataOnComment({
    hotkey: "#",
    type: "custom",
    data: customListData,
});
```

**Handle search event:**
```jsx
commentElement.on('autocompleteSearch').subscribe(async (inputData) => {
    const searchText = inputData.searchText;

    // For @mentions feature
    if (inputData.type === 'contact') {
        const filteredUsersData = await __your_api_call__(searchText);
        contactElement.updateContactList(filteredUsersData, { merge: false });
    }

    // For custom list feature
    if (inputData.type === 'custom') {
        const filteredListData = await __your_api_call__(searchText, autocompleteData);
        commentElement.createCustomListDataOnComment({
            hotkey: "#",
            type: "custom",
            data: filteredListData,
        });
    }
});

interface AutocompleteSearchEvent {
    event: KeyboardEvent | InputEvent | Event;
    searchText: string;
    type?: 'contact' | 'custom';
    metadata?: VeltEventMetadata;
}

```
</Tab>
<Tab title="Other Frameworks">
**Enable the feature:**
```js
// Enable via attribute
<velt-comments custom-autocomplete-search="true"></velt-comments>

// Or, enable via Comment Element API
const commentElement = Velt.getCommentElement();
commentElement.enableCustomAutocompleteSearch();
commentElement.disableCustomAutocompleteSearch();
```

**Set initial list:**
```js
// For @mentions feature
contactElement.updateContactList(users);

// For custom list feature
commentElement.createCustomListDataOnComment({
    hotkey: "#",
    type: "custom",
    data: customListData,
});
```

**Handle search event:**
```js
commentElement.on('autocompleteSearch').subscribe(async (inputData) => {
    const searchText = inputData.searchText;

    // For @mentions feature
    if (inputData.type === 'contact') {
        const filteredUsersData = await __your_api_call__(searchText);
        contactElement.updateContactList(filteredUsersData, { merge: false });
    }

    // For custom list feature
    if (inputData.type === 'custom') {
        const filteredListData = await __your_api_call__(searchText, autocompleteData);
        commentElement.createCustomListDataOnComment({
            hotkey: "#",
            type: "custom",
            data: filteredListData,
        });
    }
});

interface AutocompleteSearchEvent {
    event: KeyboardEvent | InputEvent | Event;
    searchText: string;
    type?: 'contact' | 'custom';
    metadata?: VeltEventMetadata;
}

```
</Tab>
</Tabs>

- [**Comments**]: Added `composerClicked` event to detect when comment composer is clicked.

<Tabs>
<Tab title="React / Next.js">
```jsx
const composerClickEvent = useCommentEventCallback('composerClicked');
```
</Tab>
<Tab title="Other Frameworks">
```js
const commentElement = Velt.getCommentElement();
commentElement.on('composerClicked').subscribe((data) => {
    console.log('Composer clicked', data);
});
```
</Tab>
</Tabs>

### Bug Fixes
- [**Comments**]: Fixed assign comment input double border CSS issue.
</Update>

<Update label="4.0.0-beta.22" description="Feb 13 2025">
### New Features
- [**Folders**]: Introducing Folders! Organize documents hierarchically with granular access control. Modeled after Google Drive's folder structure.
  - Folders can contain documents and other folders.
  - Uses same permission model as Organizations and Documents.
  - APIs:
    - **Frontend**: Subscribe to folders and query by folderId.
    - **Backend**: CRUD operations for folders and access control. [Learn More](/api-reference/rest-apis/folders/add-folder)
    - Added folder support to existing relevant APIs.

- [**Folders**]: API to subscribe to a particular folder and all its documents at the same time.

<Tabs>
<Tab title="React / Next.js">

**Using Hooks:**
```jsx
const { setDocuments } = useSetDocuments();

{/* Subscribe to a folder and all its documents */}
const rootDocument = [
  {
    id: 'document-1',
    metadata: {
      documentName: 'Document 1'
    }
  }
];

setDocuments(
  rootDocument,
  {
    folderId: 'folder1',
    allDocuments: true
  }
);


{/* Subscribe to a folder and some documents */}
const documents = [
  {
    id: 'document-1',
    metadata: {
      documentName: 'Document 1'
    }
  },
  {
    id: 'document-2',
    metadata: {
      documentName: 'Document 2'
    }
  }
];

setDocuments(
  documents,
  {
    folderId: 'folder1',
  }
);
```

**Using API:**
```jsx
{/* Subscribe to a folder and all its documents */}
client.setDocuments(
  rootDocument,
  {
    folderId: 'folder1',
    allDocuments: true
  }
);

{/* Subscribe to a folder and some documents */}
client.setDocuments(
  documents,
  {
    folderId: 'folder1',
  }
);
```
</Tab>
<Tab title="Other Frameworks">
```js
// Subscribe to a folder and all its documents
const rootDocument = [
  {
    id: 'document-1',
    metadata: {
      documentName: 'Document 1'
    }
  }
];

Velt.setDocuments(
  rootDocument,
  {
    folderId: 'folder1',
    allDocuments: true
  }
);

// Subscribe to a folder and some documents

const documents = [
  {
    id: 'document-1',
    metadata: {
      documentName: 'Document 1'
    }
  },
  {
    id: 'document-2',
    metadata: {
      documentName: 'Document 2'
    }
  }
];

Velt.setDocuments(
  documents,
  {
    folderId: 'folder1',
  }
);
``` 
</Tab>
</Tabs>

- [**Folders**]: Added an API to fetch folder metadata and subfolders by organizationId, folderId with pagination.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Get all folders for a specific organization
client.fetchFolders({
  organizationId: 'org1'
});

// Get a specific folder's metadata with its immediate subfolders
client.fetchFolders({
  organizationId: 'org1',
  folderId: 'folder1'
});

interface FetchFoldersRequest {
  organizationId?: string;
  folderId?: string;
}

interface FetchFoldersResponse {
  data: Record<string, FolderMetadata> | null;
  nextPageToken: string;
}
```
</Tab>
<Tab title="Other Frameworks">
```js
// Get all folders for a specific organization
Velt.fetchFolders({
  organizationId: 'org1'
});

// Get a specific folder's metadata with its immediate subfolders
Velt.fetchFolders({
  organizationId: 'org1',
  folderId: 'folder1'
});

interface FetchFoldersRequest {
  organizationId?: string;
  folderId?: string;
}

interface FetchFoldersResponse {
  data: Record<string, FolderMetadata> | null;
  nextPageToken: string;
}
```
</Tab>
</Tabs>


- [**Documents**]: Added an API to fetch document metadata by organizationId, folderId or documentIds with pagination.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Get all documents for a specific folder
client.fetchDocuments({
  organizationId: 'org1', 
  folderId: 'folder1',
  allDocuments: true
});

// Get specific documents by IDs
client.fetchDocuments({
  organizationId: 'org1',
  documentIds: ['doc1', 'doc2']
});

interface FetchDocumentsRequest {
  organizationId?: string;
  documentIds?: string[];
  folderId?: string;
  allDocuments?: boolean;
}

interface FetchDocumentsResponse {
  data: Record<string, DocumentMetadata> | null;
  nextPageToken: string;
}
```
</Tab>
<Tab title="Other Frameworks">
```js
// Get all documents for a specific folder
Velt.fetchDocuments({
  organizationId: 'org1', 
  folderId: 'folder1',
  allDocuments: true
});

// Get specific documents by IDs
Velt.fetchDocuments({
docElement.fetchDocuments({
  organizationId: 'org1',
  documentIds: ['doc1', 'doc2']
});

interface FetchDocumentsRequest {
  organizationId?: string;
  documentIds?: string[];
  folderId?: string;
  allDocuments?: boolean;
}

interface FetchDocumentsResponse {
  data: Record<string, DocumentMetadata> | null;
  nextPageToken: string;
}
```
</Tab>
</Tabs>

- [**Comments**]: Added a new API to fetch comment annotations by organizationId, folderId or documentIds with pagination and filtering options. This is different from the existing subscription API which susbcribes to realtime changes to the comments data.
<Tabs>
<Tab title="React / Next.js">
```jsx
// Get all annotations for a specific folder
const commentElement = client.getCommentElement();
commentElement.fetchCommentAnnotations({
  organizationId: 'org1', 
  folderId: 'folder1',
  allDocuments: true
});

// Get annotations for specific documents
const commentElement = client.getCommentElement();
commentElement.fetchCommentAnnotations({
  organizationId: 'org1',
  documentIds: ['doc1', 'doc2']
});

interface FetchCommentAnnotationsRequest {
  createdAfter?: number;
  createdBefore?: number;
  updatedAfter?: number;
  updatedBefore?: number;
  statusIds?: string[];
  order?: 'asc' | 'desc';
  pageToken?: string;
  allDocuments?: boolean;
  pageSize?: number;
  organizationId?: string;
  locationId?: string;
  documentIds?: string[];
  folderId?: string;
}

interface FetchCommentAnnotationsResponse {
  data: Record<string, CommentAnnotation[]> | null;
  nextPageToken: string;
}
```
</Tab>
<Tab title="Other Frameworks">
```js
// Get all annotations for a specific folder
const commentElement = Velt.getCommentElement();
commentElement.fetchCommentAnnotations({
  organizationId: 'org1', 
  folderId: 'folder1',
  allDocuments: true
});

// Get annotations for specific documents
const commentElement = Velt.getCommentElement();
commentElement.fetchCommentAnnotations({
  organizationId: 'org1',
  documentIds: ['doc1', 'doc2']
});

interface FetchCommentAnnotationsRequest {
  createdAfter?: number;
  createdBefore?: number;
  updatedAfter?: number;
  updatedBefore?: number;
  statusIds?: string[];
  order?: 'asc' | 'desc';
  pageToken?: string;
  allDocuments?: boolean;
  pageSize?: number;
  organizationId?: string;
  locationId?: string;
  documentIds?: string[];
  folderId?: string;
}

interface FetchCommentAnnotationsResponse {
  data: Record<string, CommentAnnotation[]> | null;
  nextPageToken: string;
}
```
</Tab>
</Tabs>
</Update>



<Update label="4.0.0-beta.21" description="Feb 11 2025">

### Features
- [**Security**] You can now self-host your user PII metadata.
  - Send only userId instead of full user object and a client side data provider.
  - Components will automatically fetch the user details from the provider and hydrate the user object.
  - The metadata will not be sent to Velt servers.

<Tabs>
<Tab title="React / Next.js">
``` jsx

const fetchUsersFromDB = async (userIds) => {
    // Fetch users from your DB
    const usersData = await getUsersFromYourDB(userIds);
    return formatUsersToRecord(usersData);
};

const formatUsersToRecord = (users) => {
    // Format users array into a Record object with userId as key and user data as value
    return users.reduce((record, user) => {
        record[user.userId] = {
            userId: user.userId,
            name: user.name,
            // any other fields
        };
        return record;
    }, {});
};

<VeltProvider 
    apiKey='YOUR_API_KEY'
    userDataProvider={{
        getUsers: fetchUsersFromDB
    }}
>
</VeltProvider>

```
</Tab>
<Tab title="Other Frameworks">
``` js

Velt.setUserDataProvider({
    getUsers: fetchUsersFromDB
});

function fetchUsersFromDB(userIds) {
    // Fetch users from your DB
    const usersData = getUsersFromYourDB(userIds);
    return formatUsersToRecord(usersData);
}

function formatUsersToRecord(users) {
    // Format users array into a Record object with userId as key and user data as value
    return users.reduce((record, user) => {
        record[user.userId] = {
            userId: user.userId,
            name: user.name,
            // any other fields
        };
        return record;
    }, {});
}

```
</Tab>
</Tabs>


### Improvements
- [**Core**]: Added core performance improvements throughout the SDK.
- [**Recorder**]: Added new API methods to get the recorded data.

<Tabs>
<Tab title="React / Next.js">
``` jsx
const recorderElement = client.getRecorderElement();
await recorderElement.getRecordingData({
    recorderIds: ['RECORDER_ID']
});
```
</Tab>
<Tab title="Other Frameworks">
``` js
const recorderElement = Velt.getRecorderElement();
await recorderElement.getRecordingData({
    recorderIds: ['RECORDER_ID']
});
```
</Tab>
</Tabs>

- [**Recorder**] Added missing props to disable shadow DOM for recorder components in React SDK.
```jsx
<VeltRecorderNotes shadowDom={false} />
<VeltRecorderTool shadowDom={false} />
<VeltRecorderPlayer shadowDom={false} />
```

</Update>


<Update label="4.0.0-beta.20" description="Feb 10 2025">

### Bug Fixes
- [**Recording**]: Fixed Safari recording compatibility issues across some macOS versions.

</Update>

<Update label="4.0.0-beta.19" description="Jan 31 2025">
### Features
- [**Core**]: Added support for React v19 in `sdk-react` library.

### Improvements
- [**Authentication**]: Made `organizationId` mandatory in `identify` method.
- [**New Accounts**]: New accounts or API keys will have advanced queries turned on by default.

### Bug Fixes
- [**Notifications**]: Fixed an issue where notifications were not working when organizationId was not set.
- [**REST API**]: Fixed an issue where the REST API for adding or updating organizations and documents did not allow custom fields in metadata.

</Update>


<Update label="4.0.0-beta.18" description="Jan 30 2025">

### Improvements
- [**Comments**]: Improved comments performance with optimistic local-first reads and writes.
- [**Notifications**]: Added `documentMetadata` object in the properties that are sent to SendGrid for emails.

### Bug Fixes
- [**Comments**]: Fixed an issue where custom metadata added to a comment using `addContext` was not sent to the first notification event (`newlyAdded`).

</Update>

<Update label="4.0.0-beta.17" description="Jan 29 2025">

### Features

- [**Comments**]: Added a `transcriptionDone` event callback when recording transcription is done.

<Tabs>
<Tab title="React / Next.js">

**Using Hooks:**
```jsx
const onTranscriptionDone = useRecorderEventCallback('transcriptionDone');

useEffect(() => {
    console.log(onTranscriptionDone);
}, [onTranscriptionDone])

```

**Using API:**
```jsx
const recorderElement = client.getRecorderElement();

recorderElement.on('transcriptionDone').subscribe((data) => {
	console.log('transcriptionDone', data);
});

```

</Tab>
<Tab title="Other Frameworks">
  **Using API:**
```js
const recorderElement = Velt.getRecorderElement();

recorderElement.on('transcriptionDone').subscribe((data) => {
	console.log('transcriptionDone', data);
});

```
</Tab>
</Tabs>

### Improvements
- [**Comments**]: Disabled @here in the contacts dropdown by default. You can turn it on using [this](/async-collaboration/comments/customize-behavior#enableathere).

### Bug Fixes
- [**Comments**]: Removed virtual scroll from autocomplete panel and removed fixed height. This was causing weird UI issues. We are rewriting the autocomplete panel with virtual scroll.
- [**Comments**]: Fixed an issue where horizontal scroll was visible on sidebar in some scenarios.
- [**Comments**]: Fixed an issue where the `shadowDom` prop was not passed down to page mode composer in comment sidebar.
- [**Comments**]: Fixed an issue where `sortData` prop was not working in comments sidebar.

</Update>

<Update label="4.0.0-beta.16" description="Jan 28 2025">

### Bug Fixes
- [**Comments**]: Fixed an issue where comments was not working for fresh documents if the advanced queries option wasn't enabled. Note this is mandatory for all versions of v4 SDK.
- [**Comments**]: Fixed an issue where [updateContactList](/async-collaboration/comments/customize-behavior#updatecontactlist) was not working.
- [**Comments**]: Fixed an issue where in inline comments, the resolve button was visible for all messages in a thread.

</Update>

<Update label="4.0.0-beta.15" description="Jan 24 2025">

### Features
- [**Security**] You can now self-host your user PII metadata.
  - Send only userId instead of full user object and a client side data provider.
  - Components will automatically fetch the user details from the provider and hydrate the user object.
  - The metadata will not be sent to Velt servers.

<Tabs>
<Tab title="React / Next.js">
``` jsx

const fetchUsersFromDB = async (userIds) => {
    // Fetch users from your DB
    const usersData = await getUsersFromYourDB(userIds);
    return formatUsersToRecord(usersData);
};

const formatUsersToRecord = (users) => {
    // Format users array into a Record object with userId as key and user data as value
    return users.reduce((record, user) => {
        record[user.userId] = {
            userId: user.userId,
            name: user.name,
            // any other fields
        };
        return record;
    }, {});
};

<VeltProvider 
    apiKey='YOUR_API_KEY'
    userDataProvider={{
        getUsers: fetchUsersFromDB
    }}
>
</VeltProvider>

```
</Tab>

<Tab title="Other Frameworks">
``` js

Velt.setUserDataProvider({
    getUsers: fetchUsersFromDB
});

function fetchUsersFromDB(userIds) {
    // Fetch users from your DB
    const usersData = getUsersFromYourDB(userIds);
    return formatUsersToRecord(usersData);
}

function formatUsersToRecord(users) {
    // Format users array into a Record object with userId as key and user data as value
    return users.reduce((record, user) => {
        record[user.userId] = {
            userId: user.userId,
            name: user.name,
            // any other fields
        };
        return record;
    }, {});
}

```
</Tab>
</Tabs>


### Improvements
- [**Core**]: Added core performance improvements throughout the SDK.
- [**Recorder**]: Added new API methods to get the recorded data.

<Tabs>
<Tab title="React / Next.js">
``` jsx
const recorderElement = client.getRecorderElement();
await recorderElement.getRecordingData({
    recorderIds: ['RECORDER_ID']
});
```
</Tab>
<Tab title="Other Frameworks">
``` js
const recorderElement = Velt.getRecorderElement();
await recorderElement.getRecordingData({
    recorderIds: ['RECORDER_ID']
});
```
</Tab>
</Tabs>

- [**Recorder**] Added missing props to disable shadow DOM for recorder components in React SDK.
```jsx
<VeltRecorderNotes shadowDom={false} />
<VeltRecorderTool shadowDom={false} />
<VeltRecorderPlayer shadowDom={false} />
```

</Update>


<Update label="4.0.0-beta.14" description="Jan 20 2025">

### Bug Fixes
- [**Recording**]: Fixed Safari recording compatibility issues across some macOS versions.

</Update>

<Update label="4.0.0-beta.13" description="Jan 13 2025">
### Features
- [**Core**]: Added support for React v19 in `sdk-react` library.

### Improvements
- [**Authentication**]: Made `organizationId` mandatory in `identify` method.
- [**New Accounts**]: New accounts or API keys will have advanced queries turned on by default.

### Bug Fixes
- [**Notifications**]: Fixed an issue where notifications were not working when organizationId was not set.
- [**REST API**]: Fixed an issue where the REST API for adding or updating organizations and documents did not allow custom fields in metadata.

</Update>


<Update label="4.0.0-beta.12" description="Jan 10 2025">

### Improvements
- [**Comments**]: Improved comments performance with optimistic local-first reads and writes.
- [**Notifications**]: Added `documentMetadata` object in the properties that are sent to SendGrid for emails.

### Bug Fixes
- [**Comments**]: Fixed an issue where custom metadata added to a comment using `addContext` was not sent to the first notification event (`newlyAdded`).

</Update>

<Update label="4.0.0-beta.11" description="Jan 6 2025">
### Bug Fixes
- [**Comments**]: Fixed an issue with `getCommentAnnotationsCount` API when filtering by specific document IDs in the query.
</Update>

<Update label="4.0.0-beta.10" description="Dec 24 2024">
### Improvements
- [**Security**]: Merged security patch in the React package

### Bug Fixes
- [**Recording**]: Fixed an issue where the floating recording player was visible for threaded recorder notes
- [**Comments**]: Fixed an issue where the sidebar button border color was using light mode colors in dark mode
</Update>


<Update label="4.0.0-beta.9" description="Dec 19 2024">
## New APIs

### 1. setDocuments
- Set multiple documents at the same time. You can specify 30 documents at a time.
- The first document in the list will be considered as the root document.
- For features like comments, notifications, recorder, reactions etc. you will be able to read and write to multiple documents at the same time.
- For features like cursors, presence, huddle, live state sync etc. it will default to the root document.
- Sidebar will automatically show data from all the documents.

- Params:
  - `documents`: [Document[]](/api-reference/sdk/models/data-models#document)
  - `options?`: [SetDocumentsRequestOptions](/api-reference/sdk/models/data-models#setdocumentsrequestoptions)

<Tabs>
<Tab title="React / Next.js">

**Using Hooks:**
``` jsx
const documents = [
  {
    id: 'document-1',
    metadata: {
      documentName: 'Document 1'
    }
  },
  {
    id: 'document-2',
    metadata: {
      documentName: 'Document 2'
    }
  }
];
const { setDocuments } = useSetDocuments();
setDocuments(documents);
```

**Using API:**
```jsx
const documents = [
  {
    id: 'document-1',
    metadata: {
      documentName: 'Document 1'
    }
  },
  {
    id: 'document-2',
    metadata: {
      documentName: 'Document 2'
    }
  }
];
client.setDocuments(documents);
```

</Tab>
<Tab title="Other Frameworks">
  **Using API:**
```js
const documents = [
  {
    id: 'document-1',
    metadata: {
      documentName: 'Document 1'
    }
  },
  {
    id: 'document-2',
    metadata: {
      documentName: 'Document 2'
    }
  }
];
Velt.setDocuments(documents);
```
</Tab>
</Tabs>


### 2. getCommentAnnotations
- Get all the comment annotations for all the specified documents.
- You can specify 30 documents at a time.
- If you don't specify any query, it will return data from the documents specified in the `setDocuments` method.

<Tabs>
<Tab title="React / Next.js">

**Using Hooks:**
```jsx
const { data } = useGetCommentAnnotations(query);
// initial data value will be null while the request is in progress
```

**Using API:**
```jsx
const commentElement = client.getCommentElement();
commentElement.getCommentAnnotations(query).subscribe((response) => {
  console.log(response.data);
  // initial data value will be null while the request is in progress
});
```

``` jsx
CommentRequestQuery {
  documentIds!: string[],
  locationIds!: string[],
  statusIds!: string[]
};

GetCommentAnnotationsResponse {
  data: Record<string, CommentAnnotation[]> | null; // Key: documentId, Value: CommentAnnotation[]
};
```

</Tab>

<Tab title="Other Frameworks">
  **Using API:**
```js
const commentElement = Velt.getCommentElement();
commentElement.getCommentAnnotations(query).subscribe((response) => {
  console.log(response.data);
  // initial data value will be null while the request is in progress
});
```

``` js
CommentRequestQuery {
  documentIds!: string[],
  locationIds!: string[],
  statusIds!: string[]
};

GetCommentAnnotationsResponse {
  data: Record<string, CommentAnnotation[]>; // Key: documentId, Value: CommentAnnotation[]
};
```
</Tab>
</Tabs>

### 3. getCommentAnnotationsCount
- Get the total and unread comment annotations count of all the comment annotations for all the specified documents.
- You can specify 30 documents at a time.
- If you don't specify any query, it will return data from the documents specified in the `setDocuments` method.

<Tabs>
<Tab title="React / Next.js">

**Using Hooks:**
```jsx
const { data } = useCommentAnnotationsCount(query);
// initial data value will be null while the request is in progress
```

**Using API:**
```jsx
const commentElement = client.getCommentElement();
commentElement.getCommentAnnotationsCount(query).subscribe((response) => {
  console.log(response.data);
  // initial data value will be null while the request is in progress
});
```

``` jsx
CommentRequestQuery {
  documentIds!: string[],
  locationIds!: string[],
  statusIds!: string[]
};

GetCommentAnnotationsCountResponse {
  data: Record<string, CommentAnnotationsCount> | null; // Key: documentId, Value: CommentAnnotationsCount
};

CommentAnnotationsCount {
  unread: number,
  total: number
}

```

</Tab>

<Tab title="Other Frameworks">
  **Using API:**
```js
const commentElement = Velt.getCommentElement();
commentElement.getCommentAnnotationsCount(query).subscribe((response) => {
  console.log(response.data);
});
```

``` js
CommentRequestQuery {
  documentIds!: string[],
  locationIds!: string[],
  statusIds!: string[]
};

GetCommentAnnotationsCountResponse {
  data: Record<string, CommentAnnotationsCount>; // Key: documentId, Value: CommentAnnotationsCount
};

CommentAnnotationsCount {
  unread: number,
  total: number
}

```
</Tab>
</Tabs>

### 4. Read/Write data from multiple documents on the same page
- If you want to display data (eg: comments) from multiple documents on the same page, you can add `data-velt-document-id` attribute to the container that contains the `document`.
- It will be used to identify which part of the DOM belongs to which document.
```html
<div class="document-container" data-velt-document-id="document-1">
  ...
</div>

<div class="document-container" data-velt-document-id="document-2">
  ...
</div>

<div class="document-container" data-velt-document-id="document-3">
  ...
</div>
```

## Other updates

### New Features
- [**Comments**]: Added support for Status Filter in Comments Sidebar's main filter menu:
  - By default, the status filter is disabled in the main filter menu.
  - Currently, it doesn't support grouping.
  - Added Wireframe support for this. [Learn more](/ui-customization/features/async/comments/comments-sidebar/subcomponents/filter/subcomponents/status).
  - If you were using wireframes before, you will add this to your wireframes.

<Tabs>
<Tab title="React / Next.js">
```jsx
const filterConfig = {
  status: {
    enable: true,
    name: "Status",
    multiSelection: true,
  }
};

<VeltCommentsSidebar filterConfig={filterConfig} />
```

</Tab>

<Tab title="Other Frameworks">
```jsx
const filterConfig = {
  status: {
    enable: true,
    name: "Status",
    multiSelection: true,
  }
};

const commentsSidebar = document.querySelector(`velt-comments-sidebar`);
commentsSidebar?.setAttribute("filter-config",JSON.stringify(filterConfig));
```
</Tab>
</Tabs>


### Bug Fixes
- [**Comments**]: Fixed an issue where empty state visibility was not visible when filter is applied and grouping was disabled.
- [**Comments**]: Fixed an issue where users could click on the comment in the sidebar and navigate to comments when they shouldn't.

</Update>
