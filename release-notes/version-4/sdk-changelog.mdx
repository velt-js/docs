---
title: "Velt SDK Changelog"
rss: true
description: Release Notes of changes added to the core Velt SDK
---

### Libraries
- `@veltdev/react`
- `@veltdev/client`
- `@veltdev/sdk`


<Update label="4.5.6-beta.13" description="October 14, 2025">

### Improvements

- [**Notifications**]: Notifications in "For You" and "Documents" tabs now only show for documents the user has access to. This ensures users only receive notifications for accessible content and prevents email notifications for inaccessible documents. This behavior also applies when using Permission Provider to manage access control.

- [**REST APIs**]: Added `verifyUserPermissions` flag to [`Add Notifications`](https://docs.velt.dev/api-reference/rest-apis/v2/notifications/add-notifications) and [`Update Notifications`](https://docs.velt.dev/api-reference/rest-apis/v2/notifications/update-notifications) REST APIs. When enabled, notifications are only created or updated for users who have access to the specified document.

**Add Notifications API:**
```bash
curl --location 'https://api.velt.dev/v2/notifications/add' \
--header 'Content-Type: application/json' \
--header 'x-velt-api-key: YOUR_API_KEY' \
--header 'x-velt-auth-token: YOUR_AUTH_TOKEN' \
--data '{
  "data": {
    "organizationId": "org1",
    "documentId": "document3",
    "actionUser": {
      "userId": "1.1"
    },
    "verifyUserPermissions": true,
    "displayHeadlineMessageTemplate": "This is main template, you can pass variables using curly brackets like this",
    "displayHeadlineMessageTemplateData": {
      "actionUser": {
        "userId": "1.1"
      },
      "recipientUser": {
        "userId": "2.2"
      }
    },
    "displayBodyMessage": "This is body message (Secondary message)",
    "notifyUsers": [
      {
        "userId": "2.2"
      }
    ],
    "notifyAll": false
  }
}'
```

**Update Notifications API:**
```bash
curl --location 'https://api.velt.dev/v2/notifications/update' \
--header 'Content-Type: application/json' \
--header 'x-velt-api-key: YOUR_API_KEY' \
--header 'x-velt-auth-token: YOUR_AUTH_TOKEN' \
--data '{
  "data": {
    "organizationId": "org1",
    "documentId": "document3",
    "verifyUserPermissions": true,
    "notifications": [
      {
        "id": "1812819846795857",
        "displayBodyMessage": "Updated body message"
      }
    ]
  }
}'
```

</Update>

<Update label="4.5.6-beta.11" description="October 14, 2025">

### New Features

- [**Access Control**]: Added Permission Provider as a new authentication method. Instead of pre-syncing users via REST API or passing details in the `identify` method, Velt now validates access requests in real-time by querying your authorization service. When a user requests access to a resource, Velt calls your provider to determine if access should be granted, then handles user syncing automatically.

<Note>
Set your API key's `defaultDocumentAccessType` to `restricted` so access is denied by default unless explicitly granted through the provider.
</Note>

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using API methods
const client = useVeltClient();

client.setPermissionProvider({
  onResourceAccessRequired: async (requests) => {
    // Implement your authorization logic
    const data = [];
    requests.forEach((request) => {
      if (request.resource.type === 'document') {
        data.push({
          userId: request.userId,
          resourceId: request.resource.id,
          type: request.resource.type,
          hasAccess: true,
          accessRole: 'viewer',
          expiresAt: Date.now() + 10 * 60 * 1000, // 10 mins
        });
      } else {
        data.push({
          userId: request.userId,
          resourceId: request.resource.id,
          type: request.resource.type,
          hasAccess: true,
        });
      }
    });

    // Generate secure signature via REST API
    const result = await fetch('https://api.velt.dev/v2/auth/generate_signature', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-velt-api-key': 'YOUR_API_KEY',
        'x-velt-auth-token': 'YOUR_AUTH_TOKEN',
      },
      body: JSON.stringify({ data })
    }).then(res => res.json());

    return {
      data,
      success: true,
      statusCode: 200,
      signature: result?.result?.data?.signature
    };
  },
  retryConfig: {
    retryCount: 3,
    retryDelay: 2000
  },
  // Set to true if access control changes frequently (e.g., for high-frequency notifications)
  forceRefresh: false,
});
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
Velt.setPermissionProvider({
  onResourceAccessRequired: async (requests) => {
    // Implement your authorization logic
    const data = [];
    requests.forEach((request) => {
      if (request.resource.type === 'document') {
        data.push({
          userId: request.userId,
          resourceId: request.resource.id,
          type: request.resource.type,
          hasAccess: true,
          accessRole: 'viewer',
          expiresAt: Date.now() + 10 * 60 * 1000, // 10 mins
        });
      } else {
        data.push({
          userId: request.userId,
          resourceId: request.resource.id,
          type: request.resource.type,
          hasAccess: true,
        });
      }
    });

    // Generate secure signature via REST API
    const result = await fetch('https://api.velt.dev/v2/auth/generate_signature', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-velt-api-key': 'YOUR_API_KEY',
        'x-velt-auth-token': 'YOUR_AUTH_TOKEN',
      },
      body: JSON.stringify({ data })
    }).then(res => res.json());

    return {
      data,
      success: true,
      statusCode: 200,
      signature: result?.result?.data?.signature
    };
  },
  retryConfig: {
    retryCount: 3,
    retryDelay: 2000
  },
  // Set to true if access control changes frequently (e.g., for high-frequency notifications)
  forceRefresh: false,
});
</script>
```
</Tab>
</Tabs>

### Improvements

- [**Access Control**]: Added `maxDepth` parameter to [`getFolders` REST API](https://docs.velt.dev/api-reference/rest-apis/v2/folders/get-folders). You can now retrieve nested subfolders at any depth level. The response includes `ancestors` array showing parent hierarchy and `inheritAccessFromParent` field indicating whether access is inherited.

```bash
curl --location 'https://api.velt.dev/v2/organizations/folders/get' \
--header 'x-velt-api-key: YOUR_API_KEY' \
--header 'x-velt-auth-token: YOUR_AUTH_TOKEN' \
--header 'Content-Type: application/json' \
--data '{
    "data": {
        "organizationId": "org1",
        "folderId": "folder1",
        "maxDepth": 3
    }
}'
```

- [**Access Control**]: Added `inheritFromParent` parameter to the [update folder access REST API](https://docs.velt.dev/api-reference/rest-apis/v2/folders/update-folder-access). You can now configure a folder to inherit access permissions from its parent folder.

```bash
curl --location 'https://api.velt.dev/v2/organizations/folders/access/update' \
--header 'x-velt-api-key: YOUR_API_KEY' \
--header 'x-velt-auth-token: YOUR_AUTH_TOKEN' \
--header 'Content-Type: application/json' \
--data '{
  "data": {
    "organizationId": "org1",
    "folderIds": ["folder1"],
    "inheritFromParent": true
  }
}'
```

- [**Access Control**]: The [update folder REST API](https://docs.velt.dev/api-reference/rest-apis/v2/folders/update-folder) now handles folder moves correctly. When a folder is moved to a different parent, its `ancestors` array and `accessType` are automatically updated, and all subfolder information is updated accordingly.

- [**Access Control**]: Added `accessType` parameter to the [create folder REST API](https://docs.velt.dev/api-reference/rest-apis/v2/folders/add-folder). You can now set a folder's access permissions during creation.

```bash
curl --location 'https://api.velt.dev/v2/organizations/folders/add' \
--header 'x-velt-api-key: YOUR_API_KEY' \
--header 'x-velt-auth-token: YOUR_AUTH_TOKEN' \
--header 'Content-Type: application/json' \
--data '{
  "data": {
    "organizationId": "org1",
    "folders": [
      {
        "folderId": "folder2025",
        "folderName": "folder2025",
        "accessType": "restricted"
      }
    ]
  }
}'
```

- [**Core**]: The `setDocuments` method now filters out documents the user doesn't have access to instead of failing the entire operation. Previously, if any document in the array was inaccessible, the entire query would fail.

- [**Access Control**]: Document-level access is now prioritized over folder-level access. If the document doesn't have explicit access settings, it inherits from its folder or top parent.

- [**Access Control**]: Folder document limit set to 50 when using `setDocuments` with the `allDocuments` flag. When fetching all documents from a folder, only the first 50 documents are retrieved, and any documents the user doesn't have access to are filtered out.

</Update>

<Update label="4.5.6-beta.9" description="October 10, 2025">

### Bug Fixes

- [**Live State Sync**]: Fixed an issue with the `listenToNewChangesOnly` parameter in the `getLiveStateData()` method. Previously, the method was returning existing data even when `listenToNewChangesOnly` was set to `true`. Now it correctly returns only new changes that are pushed to `liveStateData` after you subscribe to the `getLiveStateData` subscription when `listenToNewChangesOnly` is set to `true`.

</Update>

<Update label="4.5.6-beta.8" description="October 8, 2025">

### Bug Fixes

- [**Comments**]: Fixed an issue where tagged users who don't exist in the database were not displaying correctly in email notifications. Comments now render with the proper format in both the UI and emails.

- [**Comments**]: Fixed an issue where user mentions in email notifications were not resolving with correct user details. Tagged users in comments now display properly with accurate information in all email notifications.

- [**Comments**]: Fixed an issue where user details were not resolving when a user from a different organization added comments in an accessible document. This previously caused skeleton loading states or fallback formatting for existing organization users, but now displays correctly.

</Update>


<Update label="4.5.6-beta.7" description="October 8, 2025">

### New Features

- [**Live State Sync**]: Added `fetchLiveStateData()` method to retrieve synced state data. You can fetch all synced data or retrieve data for a specific `liveStateDataId`.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using Hooks
const liveStateSyncElement = useLiveStateSyncUtils();

/// To get all the data
const data = await liveStateSyncElement.fetchLiveStateData();

/// To get data for specific liveStateDataId
const specificData = await liveStateSyncElement.fetchLiveStateData({
    liveStateDataId: "LIVE_STATE_DATA_ID"
});

// Using API methods
const liveStateSyncElement = client.getLiveStateSyncElement();

/// To get all the data
const data = await liveStateSyncElement.fetchLiveStateData();

/// To get data for specific liveStateDataId
const specificData = await liveStateSyncElement.fetchLiveStateData({
    liveStateDataId: "LIVE_STATE_DATA_ID"
});
```
</Tab>
<Tab title="Other Frameworks">
```jsx
const liveStateSyncElement = Velt.getLiveStateSyncElement();

// To get all the data
const data = await liveStateSyncElement.fetchLiveStateData();

// To get data for specific liveStateDataId
const specificData = await liveStateSyncElement.fetchLiveStateData({
    liveStateDataId: "LIVE_STATE_DATA_ID"
});
```
</Tab>
</Tabs>

</Update>


<Update label="4.5.6-beta.6" description="October 7, 2025">

### Bug Fixes

- [**Live State Sync**]: The useServerConnectionStateChangeHandler hook was sometimes incorrectly reporting an offline state due to the behavior of our special listener in a multi-tab environment. When a browser throttled an idle tab, it would interfere with the shared network activity for this specific listener. This caused the listener in active tabs to momentarily and incorrectly return a false (disconnected) status, even though the primary database connection remained active. We added a 1.5s delay to resolve the network state before emitting the value in the hook.

</Update>


<Update label="4.5.6-beta.5" description="October 6, 2025">

### Improvements

- [**Single Editor Mode**]: Improved offline handling for Single Editor Mode controls. When you're offline and attempt to use the "Edit Here" button or accept/reject actions, these operations are now prevented and a console warning is displayed.

- [**Live State Sync**]: Added timestamp field to Redux action data in Live State Sync. Each action now includes a UTC timestamp for better tracking and debugging.

```json
{
    "id": "ACTION_ID",
    "action": {
        "type": "ACTION_TYPE",
        "payload": "ACTION_PAYLOAD" // optional
    },
    "timestamp": 1759745729823 // UTC timestamp in milliseconds
}
```

</Update>


<Update label="4.5.6-beta.4" description="October 2, 2025">

### Bug Fixes
- [**Recorder**]: Fixed an issue where the control panel was not visible in thread mode.

</Update>


<Update label="4.5.6-beta.3" description="October 2, 2025">

### Bug Fixes
- [**Comments**]: Fixed an issue with manual comment pin selection when working with draft comment annotations.

</Update>


<Update label="4.5.6-beta.2" description="October 1, 2025">

### Bug Fixes
- [**Single Editor Mode**]: Fixed an issue related to switching editor access when heartbeat is disabled.

</Update>


<Update label="4.5.6-beta.1" description="October 1, 2025">

### New Features
- [**Live State Sync**]: Added heartbeat feature for Single Editor Mode. The heartbeat mechanism provides more reliable presence detection in single editor mode scenarios. This feature is enabled by default when single editor mode is enabled.

<Note>
If you want to disable heartbeat functionality, you must disable it before enabling single editor mode.
</Note>

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using Hooks
const liveStateSyncElement = useLiveStateSyncUtils();
liveStateSyncElement.enableHeartbeat();
liveStateSyncElement.disableHeartbeat();

// Using API methods
const liveStateSyncElement = client.getLiveStateSyncElement();
liveStateSyncElement.enableHeartbeat();
liveStateSyncElement.disableHeartbeat();
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
// Using API methods
const liveStateSyncElement = Velt.getLiveStateSyncElement();
liveStateSyncElement.enableHeartbeat();
liveStateSyncElement.disableHeartbeat();
</script>
```
</Tab>
</Tabs>

</Update>


<Update label="4.5.5" description="September 30, 2025">

### Bug Fixes
- [**Comments**]: Fixed an issue where the comment dialog would auto-close after submitting the first comment in popover mode.

</Update>

<Update label="4.5.4" description="September 30, 2025">

### Improvements
- [**Comments**]: Added option to close persistent comment mode with ESC key, even when a thread is active. Use `forceCloseAllOnEsc` (prop/API).

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using props on component
<VeltComments forceCloseAllOnEsc={true} />

// Using API methods
const commentElement = client.getCommentElement();
commentElement.enableForceCloseAllOnEsc();
commentElement.disableForceCloseAllOnEsc();
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Using HTML attribute -->
<velt-comments force-close-all-on-esc="true"></velt-comments>

<script>
// Using API methods
const commentElement = Velt.getCommentElement();
commentElement.enableForceCloseAllOnEsc();
commentElement.disableForceCloseAllOnEsc();
</script>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Comments**]: Fixed an issue where `resolvedCommentsOnDom` was not applying to comment bubbles in the video player timeline.

</Update>

<Update label="4.5.4-beta.4" description="September 29, 2025">

### New Features
- [**Comments**]: Added attachments data support in REST API endpoints for adding and updating comments. You can programmatically include attachment metadata when creating or modifying comments through the REST API.

The `attachments` field supports comprehensive metadata including:
- **File identification**: `attachmentId`, `name`, `bucketPath`
- **File properties**: `size`, `type`, `url`, `thumbnail`, `mimeType`
- **Custom metadata**: Flexible metadata object for dimensions, timestamps, and other custom properties

<Note>
See the full REST API reference:
- [Add Comments API](/api-reference/rest-apis/v2/comments-feature/comments/add-comments)
- [Update Comments API](/api-reference/rest-apis/v2/comments-feature/comments/update-comments)
</Note>

### Bug Fixes
- [**UI Customization**]: Fixed an issue where inline comments section filter dropdown wireframe not rendering correctly.

</Update>

<Update label="4.5.4-beta.3" description="September 27, 2025">

### New Features

- [**Notifications**]: Added ESC key support to close the notification panel.

- [**Comments**]: Added unread badge in CommentPlayerTimeline for annotations.

- [**Recorder**]: Added configuration to control playback behavior on preview click. You can now enable or disable the click-to-play/pause functionality on recording previews.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using props on component
<VeltRecorderPlayer playbackOnPreviewClick={true} />

// Using API methods
const recorderElement = client.getRecorderElement();
recorderElement.enablePlaybackOnPreviewClick();
recorderElement.disablePlaybackOnPreviewClick();
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Using HTML attribute -->
<velt-recorder-player playback-on-preview-click="true"></velt-recorder-player>

<script>
// Using API methods
const recorderElement = Velt.getRecorderElement();
recorderElement.enablePlaybackOnPreviewClick();
recorderElement.disablePlaybackOnPreviewClick();
</script>
```
</Tab>
</Tabs>

- [**Notifications**]: Added `considerAllNotifications` configuration to the notifications tool to control the notification count and unread indicator. When enabled, the notification count and unread badge include items from all tabs; when disabled (default), they only include items from the “For You” tab.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltNotificationsTool considerAllNotifications={true} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-notifications-tool consider-all-notifications="true"></velt-notifications-tool>
```
</Tab>
</Tabs>

- [**Notifications**]: Added ability to filter notifications to the currently set document only. By default it shows notifications for the 15 most recently active documents accessible to the current user in the current organization.

<Tabs>
<Tab title="React / Next.js">
```jsx
const notificationElement = client.getNotificationElement();
notificationElement.enableCurrentDocumentOnly();
notificationElement.disableCurrentDocumentOnly();
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const notificationElement = Velt.getNotificationElement();
notificationElement.enableCurrentDocumentOnly();
notificationElement.disableCurrentDocumentOnly();
</script>
```
</Tab>
</Tabs>

### Improvements
- [**Notifications**]: Added ability to hide notification tabs when only one tab is enabled.

- [**UI Customization**]: Improved CSS variable handling in the ESC button for Persistent Comments Banner.

- [**UI Customization**]: Removed extra space next to the notification icon.

### Bug Fixes
- [**Recorder**]: Fixed an issue where the recording edit done event was not triggering with the correct data.

- [**Recorder**]: Fixed an issue where the countdown timer for the recorder was not working in Firefox.

</Update>

<Update label="4.5.4-beta.2" description="September 25, 2025">

### New Features
- [**UI Customization**]: Added hide reply button wireframe for the comment dialog.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltWireframe>
  <VeltCommentDialogWireframe.Body>
    <VeltCommentDialogWireframe.ToggleReply />
    <VeltCommentDialogWireframe.HideReply />
  </VeltCommentDialogWireframe.Body>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-wireframe style="display:none;">
  <velt-comment-dialog-body-wireframe>
    <velt-comment-dialog-toggle-reply-wireframe></velt-comment-dialog-toggle-reply-wireframe>
    <velt-comment-dialog-hide-reply-wireframe></velt-comment-dialog-hide-reply-wireframe>
  </velt-comment-dialog-body-wireframe>
</velt-wireframe>
```
</Tab>
</Tabs>

- [**UI Customization**]: Added thread card reply button wireframe for the comment dialog to enable quick replies directly from comment thread cards.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltWireframe>
  <VeltCommentDialogWireframe.ThreadCard>
    <VeltCommentDialogWireframe.ThreadCard.Reply />
  </VeltCommentDialogWireframe.ThreadCard>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-wireframe style="display:none;">
  <velt-comment-dialog-thread-card-wireframe>
    <velt-comment-dialog-thread-card-reply-wireframe></velt-comment-dialog-thread-card-reply-wireframe>
  </velt-comment-dialog-thread-card-wireframe>
</velt-wireframe>
```
</Tab>
</Tabs>

- [**UI Customization**]: Added filter dropdown wireframe for the inline comments section.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltWireframe>
  <VeltInlineCommentsSectionWireframe.FilterDropdown>
    <VeltInlineCommentsSectionWireframe.FilterDropdown.Trigger>
      <VeltInlineCommentsSectionWireframe.FilterDropdown.Trigger.Arrow />
      <VeltInlineCommentsSectionWireframe.FilterDropdown.Trigger.Name />
    </VeltInlineCommentsSectionWireframe.FilterDropdown.Trigger>
    <VeltInlineCommentsSectionWireframe.FilterDropdown.Content>
      <VeltInlineCommentsSectionWireframe.FilterDropdown.Content.List>
        <VeltInlineCommentsSectionWireframe.FilterDropdown.Content.List.Item>
          <VeltInlineCommentsSectionWireframe.FilterDropdown.Content.List.Item.Label />
          <VeltInlineCommentsSectionWireframe.FilterDropdown.Content.List.Item.Checkbox />
        </VeltInlineCommentsSectionWireframe.FilterDropdown.Content.List.Item>
      </VeltInlineCommentsSectionWireframe.FilterDropdown.Content.List>
      <VeltInlineCommentsSectionWireframe.FilterDropdown.Content.ApplyButton />
    </VeltInlineCommentsSectionWireframe.FilterDropdown.Content>
  </VeltInlineCommentsSectionWireframe.FilterDropdown>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-wireframe style="display:none;">
  <velt-inline-comments-section-filter-dropdown-wireframe>
    <velt-inline-comments-section-filter-dropdown-trigger-wireframe>
      <velt-inline-comments-section-filter-dropdown-trigger-arrow-wireframe>
      </velt-inline-comments-section-filter-dropdown-trigger-arrow-wireframe>
      <velt-inline-comments-section-filter-dropdown-trigger-name-wireframe>
      </velt-inline-comments-section-filter-dropdown-trigger-name-wireframe>
    </velt-inline-comments-section-filter-dropdown-trigger-wireframe>
    <velt-inline-comments-section-filter-dropdown-content-wireframe>
      <velt-inline-comments-section-filter-dropdown-content-list-wireframe>
        <velt-inline-comments-section-filter-dropdown-content-list-item-wireframe>
          <velt-inline-comments-section-filter-dropdown-content-list-item-label-wireframe>
          </velt-inline-comments-section-filter-dropdown-content-list-item-label-wireframe>
          <velt-inline-comments-section-filter-dropdown-content-list-item-checkbox-wireframe>
          </velt-inline-comments-section-filter-dropdown-content-list-item-checkbox-wireframe>
        </velt-inline-comments-section-filter-dropdown-content-list-item-wireframe>
      </velt-inline-comments-section-filter-dropdown-content-list-wireframe>
      <velt-inline-comments-section-filter-dropdown-content-apply-button-wireframe>
      </velt-inline-comments-section-filter-dropdown-content-apply-button-wireframe>
    </velt-inline-comments-section-filter-dropdown-content-wireframe>
  </velt-inline-comments-section-filter-dropdown-wireframe>
</velt-wireframe>
```
</Tab>
</Tabs>

- [**Comments**]: Added `allowedFileTypes` property to limit file types in comment attachments.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using props on component
<VeltComments allowedFileTypes={['jpg', 'png']} />

// Using API method
const commentElement = client.getCommentElement();
commentElement.setAllowedFileTypes(['jpg', 'png']);
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Using HTML attribute -->
<velt-comments allowed-file-types="['jpg', 'png']"></velt-comments>

<script>
// Using API method
const commentElement = Velt.getCommentElement();
commentElement.setAllowedFileTypes(['jpg', 'png']);
</script>
```
</Tab>
</Tabs>

- [**Comments**]: Added ability to display the attachment filename in the message when a file is attached.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltComments attachmentNameInMessage={true} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments attachment-name-in-message="true"></velt-comments>
```
</Tab>
</Tabs>

- [**Comments**]: Added setComposerFileAttachments() API method to programmatically add file attachments to the comment composer from your application instead of requiring users to select files from the file system.

<Tabs>
<Tab title="React / Next.js">
```jsx
const commentElement = client.getCommentElement();
commentElement.setComposerFileAttachments({
  files: [file1, file2],
  annotationId: 'annotation-123',
  targetElementId: 'element-456',
});
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const commentElement = Velt.getCommentElement();
commentElement.setComposerFileAttachments({
  files: [file1, file2],
  annotationId: 'annotation-123',
  targetElementId: 'element-456',
});
</script>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Comments**]: Fixed an issue where floating mode prop was being incorrectly added in React when enabling embed mode in the sidebar.

</Update>

<Update label="4.5.4-beta.1" description="September 24, 2025">

### New Features
- [**UI Customization**]: Added comment-level reply button wireframe. This button is hidden by default and can be enabled through wireframe customization.

- [**UI Customization**]: Added hide reply button wireframes for the comment dialog body.

### Bug Fixes
- [**Recorder**]: Fixed an issue where the Recorder control panel not being draggable.

- [**Access Control**]: Fixed an issue where Get User Permissions REST API was not returning `permission_denied` errors in the response

<Note>
See the full REST API reference: <a href="/api-reference/rest-apis/v2/auth/get-permissions">Get Permissions</a>.
</Note>

</Update>

<Update label="4.5.3" description="September 20, 2025">

### New Features
- [**Comments**]: Added `readOnly` flag to Comment Bubble component to prevent users from replying or editing existing comments in the target bubble while still displaying them. This is useful when you want to display comments in a read-only mode where users can view but not modify or respond to comments.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using props on component
<VeltCommentBubble readOnly={true} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Using attributes on element -->
<velt-comment-bubble read-only="true"></velt-comment-bubble>
```
</Tab>
</Tabs>

- [**Comments**]: Added `disabled` flag to Comment Tool component to disable the comment tool and prevent users from adding new comments. This is helpful when you want to temporarily or conditionally restrict comment creation while still allowing users to view existing comments.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using props on component
<VeltCommentTool disabled={true} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Using attributes on element -->
<velt-comment-tool disabled="true"></velt-comment-tool>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Comments**]: Fixed an issue where clicking on one comment bubble would unintentionally open multiple comment bubbles. Now clicking on a comment bubble correctly opens only that specific bubble.

- [**Comments**]: Fixed an issue where empty comments were being saved in some scenarios.

</Update>

<Update label="4.5.2" description="September 20, 2025">

### Bug Fixes
- [**Comments**]: Fixed an issue where empty comments were being saved in some scenarios.
- [**Core**]: Released 4.5.2 stable version.

</Update>

<Update label="4.5.2-beta.17" description="September 19, 2025">

### Bug Fixes
- [**Comments**]: Fixed a minor issue with the `fullScreen` prop in the Comments Sidebar.

</Update>

<Update label="4.5.2-beta.16" description="September 19, 2025">

### New Features
- [**Comments**]: Added full-screen mode for Comments Sidebar to maximize space for reviewing and managing comments. This is particularly useful when working with large volumes of feedback or conducting detailed comment reviews. By default, this feature is disabled and only supported in default mode (floating and embed modes are not supported).

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using props on component
<VeltCommentsSidebar fullScreen={true} />

// Using API methods
const commentElement = client.getCommentElement();
commentElement.enableFullScreenInSidebar();
commentElement.disableFullScreenInSidebar();
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Using attributes on element -->
<velt-comments-sidebar full-screen="true"></velt-comments-sidebar>

<script>
// Using API methods
const commentElement = Velt.getCommentElement();
commentElement.enableFullScreenInSidebar();
commentElement.disableFullScreenInSidebar();
</script>
```
</Tab>
</Tabs>

- [**Comments**]: Added fixed annotation numbers to comment pins and dialogs that persist across sessions, making it easier to reference specific comments in discussions and documentation. This replaces the previous temporary numbering system that reset on page refresh.

- [**Comments**]: Added search by annotation number in Comments Sidebar. You can now quickly find specific comments by typing their annotation number (e.g., `#2`) in the search field, making it faster to locate and navigate to referenced comments.

### UI Customization
- [**Comments**]: Added new wireframes to customize the appearance of comment annotation numbers and full-screen button in the Comments Sidebar.

**Comment Dialog Number Wireframe:**

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltWireframe>
  <VeltCommentDialogWireframe>
    <VeltCommentDialogWireframe.CommentNumber />
  </VeltCommentDialogWireframe>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-wireframe style="display:none;">
  <velt-comment-dialog-wireframe>
    <velt-comment-dialog-comment-number-wireframe></velt-comment-dialog-comment-number-wireframe>
  </velt-comment-dialog-wireframe>
</velt-wireframe>
```
</Tab>
</Tabs>

**Comment Pin Number Wireframe:**

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltWireframe>
  <VeltCommentPinWireframe>
    <VeltCommentPinWireframe.Number />
  </VeltCommentPinWireframe>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-wireframe style="display:none;">
  <velt-comment-pin-wireframe>
    <velt-comment-pin-number-wireframe></velt-comment-pin-number-wireframe>
  </velt-comment-pin-wireframe>
</velt-wireframe>
```
</Tab>
</Tabs>

**Comments Sidebar Full-Screen Button Wireframe:**

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltWireframe>
  <VeltCommentsSidebarWireframe>
    <VeltCommentsSidebarWireframe.FullscreenButton />
  </VeltCommentsSidebarWireframe>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-wireframe style="display:none;">
  <velt-comments-sidebar-wireframe>
    <velt-comments-sidebar-fullscreen-button-wireframe></velt-comments-sidebar-fullscreen-button-wireframe>
  </velt-comments-sidebar-wireframe>
</velt-wireframe>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Recorder**]: Fixed Firefox compatibility issue that was preventing recordings from being stopped properly.

- [**Notifications**]: Fixed an issue where Notification Panel was not closing if Velt was not initialized.

</Update>

<Update label="4.5.2-beta.15" description="September 19, 2025">

### Bug Fixes
- [**Core**]: Fixed invalid user name validation to now accept email values in user names. Also improved URL handling by removing content after the last dot (.) to make URLs non-functional, and increased maximum character limit from 20 to 30.

</Update>

<Update label="4.5.2-beta.14" description="September 18, 2025">

### Improvements
- [**Access Control**]: Updated Get User Permissions API to remove `userIds` from the request payload and now returns structured error codes alongside permission denied messages. This provides clearer error handling and makes it easier to diagnose permission issues programmatically.

<Tabs>
<Tab title="React / Next.js">
```ts
// Request Payload
interface GetUserPermissionsRequest {
  organizationId?: string;
  folderIds?: string[];
  documentIds?: string[];
}

// Response Payload
interface GetUserPermissionsResponse {
  [userId: string]: {
    folders?: {
      [folderId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
        errorCode?: UserPermissionAccessRoleResult;
      }
    }
    organization?: {
      [organizationId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
        errorCode?: UserPermissionAccessRoleResult;
      }
    }
    documents?: {
      [documentId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
        errorCode?: UserPermissionAccessRoleResult;
      }
    }
  }
}

enum UserPermissionAccessRoleResult {
  DOES_NOT_EXIST = 'does_not_exist',
  PERMISSION_DENIED = 'permission_denied',
  SOMETHING_WENT_WRONG = 'something_went_wrong',
}

enum UserPermissionAccessRole {
  EDITOR = 'editor',
  VIEWER = 'viewer',
}

// Using API
await client.getUserPermissions(request as GetUserPermissionsRequest);
```
</Tab>
<Tab title="Other Frameworks">
```ts
// Request Payload
interface GetUserPermissionsRequest {
  organizationId?: string;
  folderIds?: string[];
  documentIds?: string[];
}

// Response Payload
interface GetUserPermissionsResponse {
  [userId: string]: {
    folders?: {
      [folderId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
        errorCode?: UserPermissionAccessRoleResult;
      }
    }
    organization?: {
      [organizationId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
        errorCode?: UserPermissionAccessRoleResult;
      }
    }
    documents?: {
      [documentId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
        errorCode?: UserPermissionAccessRoleResult;
      }
    }
  }
}

enum UserPermissionAccessRoleResult {
  DOES_NOT_EXIST = 'does_not_exist',
  PERMISSION_DENIED = 'permission_denied',
  SOMETHING_WENT_WRONG = 'something_went_wrong',
}

enum UserPermissionAccessRole {
  EDITOR = 'editor',
  VIEWER = 'viewer',
}

// Using API
await Velt.getUserPermissions(request as GetUserPermissionsRequest);
```
</Tab>
</Tabs>

- [**Access Control**]: Users with Viewer access can no longer add comments or update metadata through the SDK. This ensures proper permission enforcement on Velt features.

### Bug Fixes
- [**Core**]: Fixed document switch issue where comments were not properly disappearing when navigating between documents, ensuring clean state transitions.

- [**Core**]: Fixed local cache comment persistence issue that was causing stale comment data to remain after document changes.

</Update>

<Update label="4.5.2-beta.13" description="September 17, 2025">

### New Features
- [**Recorder**]: Added maximum recording length feature that allows you to set time limits on recordings. This helps manage storage costs and ensures recordings stay focused and relevant.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using props on components
<VeltRecorderTool maxLength={10} />
<VeltRecorderControlPanel maxLength={10} />

// Using API methods
const recorderElement = client.getRecorderElement();
recorderElement.setMaxLength(10);
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Using attributes on elements -->
<velt-recorder-tool max-length="10"></velt-recorder-tool>
<velt-recorder-control-panel max-length="10"></velt-recorder-control-panel>

<script>
// Using API methods
const recorderElement = client.getRecorderElement();
recorderElement.setMaxLength(10);
</script>
```
</Tab>
</Tabs>

- [**Recorder**]: Added Picture-in-Picture (PiP) mode for screen recordings when camera is enabled. This allows users to continue recording while multitasking, improving workflow efficiency for tutorial creation and documentation.

<Warning>
Picture-in-Picture is only supported in Chrome browsers and only works for screen recordings when the camera is active. This feature is disabled by default.
</Warning>

<Tabs>
<Tab title="React / Next.js">
```jsx
// Enable PiP on components
<VeltRecorderTool pictureInPicture={true} />
<VeltRecorderControlPanel pictureInPicture={true} />

// Control PiP via API
const recorderElement = client.getRecorderElement();
recorderElement.enablePictureInPicture();
recorderElement.disablePictureInPicture();
recorderElement.openPictureInPicture();
recorderElement.exitPictureInPicture();

// Custom PiP button wireframe
<VeltRecorderControlPanelWireframe.FloatingMode.ActionBar.Pip>
    <span>Custom Pip Button</span>
</VeltRecorderControlPanelWireframe.FloatingMode.ActionBar.Pip>
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Enable PiP on elements -->
<velt-recorder-tool picture-in-picture="true"></velt-recorder-tool>
<velt-recorder-control-panel picture-in-picture="true"></velt-recorder-control-panel>

<!-- Custom PiP button wireframe -->
<velt-wireframe style="display:none;">
    <velt-recorder-control-panel-action-bar-pip-wireframe>
        <span>Custom Pip Button</span>
    </velt-recorder-control-panel-action-bar-pip-wireframe>
</velt-wireframe>

<script>
// Control PiP via API
const recorderElement = Velt.getRecorderElement();
recorderElement.enablePictureInPicture();
recorderElement.disablePictureInPicture();
recorderElement.openPictureInPicture();
recorderElement.exitPictureInPicture();
</script>
```
</Tab>
</Tabs>

- [**Recorder**]: Added screen recording preview to let users see their screen recordings preview prior to staring the recording. This helps users make make necessary adjustments before starting the recording. You programmatically ask users for permissions using the new API.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Request screen permission for preview
const recorderElement = client.getRecorderElement();
recorderElement.requestScreenPermission();

// Custom screen player wireframe
<VeltRecordingPreviewStepsDialogWireframe.Video.ScreenPlayer />
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Custom screen player wireframe -->
<velt-wireframe style="display:none;">
    <velt-recording-preview-steps-dialog-screen-player-wireframe>
    </velt-recording-preview-steps-dialog-screen-player-wireframe>
</velt-wireframe>

<script>
// Request screen permission for preview
const recorderElement = Velt.getRecorderElement();
recorderElement.requestScreenPermission();
</script>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Single Editor Mode**]: Fixed heartbeat handling issue when external heartbeat is passed to prevent conflicts with internal presence detection mechanisms.

- [**UI Customization**]: Fixed Angular Material CSS scoping to prevent style conflicts by ensuring Angular Material styles are properly contained within Velt components.

</Update>

<Update label="4.5.2-beta.12" description="September 16, 2025">

### Bug Fixes
- [**Single Editor Mode**]: Fixed issue where editor assignment process wasn't reinitiated when a user regained internet connection or became active again after being offline. This ensures proper editor role management in collaborative editing scenarios.

- [**Single Editor Mode**]: Fixed "Edit here" functionality to properly assign editor role to users even when no existing data is available in the document.

- [**Core**]: Fixed React hook `setDocumentSuccess` event that wasn't triggering properly by adding flush sync method for `initUpdate` events. This ensures proper event handling and state updates in React applications.

</Update>


<Update label="4.5.2-beta.11" description="September 13, 2025">

### New Features
- [**Comments**]: Added `commentPlaceholder` and `replyPlaceholder` props on `VeltComments` so you can tailor input copy to your app’s voice and improve guidance for first-time users.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using Props on VeltComments
<VeltComments commentPlaceholder="Ask a question or propose a change (use @ to mention teammates)" replyPlaceholder="Add context or suggest a fix (use @ to notify others)" />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments comment-placeholder="Ask a question or propose a change (use @ to mention teammates)" reply-placeholder="Add context or suggest a fix (use @ to notify others)"></velt-comments>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Recorder**]: Fixed Recording Preview Dialog width issue.

</Update>

<Update label="4.5.2-beta.10" description="September 11, 2025">

### New Features
- [**Access Control**]: Added User Permissions API to fetch a user's `editor`/`viewer` access across organizations, folders, and documents, for both permanent and temporary users. This helps you enforce read-only experiences.

<Warning>
Users with `viewer` access are read-only; write actions like adding comments are blocked in the SDK.
</Warning>

<Note>
See the [Access Control overview](/key-concepts/overview#access-control) for concepts and detailed guidance.
</Note>

#### REST API
Retrieves user permissions for organizations, folders, and documents in a single API call. Supports both regular and temporary users.

<Note>
See the full REST API reference: <a href="/api-reference/rest-apis/v2/auth/get-permissions">Get Permissions</a>.
</Note>

#### SDK

<Tabs>
<Tab title="React / Next.js">
```ts
// Request Payload
interface GetUserPermissionsRequest {
  organizationId?: string;
  folderIds?: string[];
  documentIds?: string[];
  userIds?: string[];
}

// Response Payload
interface GetUserPermissionsResponse {
  [userId: string]: {
    folders?: {
      [folderId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
      }
    }
    organization?: {
      [organizationId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
      }
    }
    documents?: {
      [documentId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
      }
    }
  }
}

enum UserPermissionAccessRole {
  EDITOR = 'editor',
  VIEWER = 'viewer',
}

// Using API
await client.getUserPermissions(request as GetUserPermissionsRequest);
```
</Tab>
<Tab title="Other Frameworks">
```ts
// Request Payload
interface GetUserPermissionsRequest {
  organizationId?: string;
  folderIds?: string[];
  documentIds?: string[];
  userIds?: string[];
}

// Response Payload
interface GetUserPermissionsResponse {
  [userId: string]: {
    folders?: {
      [folderId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
      }
    }
    organization?: {
      [organizationId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
      }
    }
    documents?: {
      [documentId: string]: {
        accessRole?: UserPermissionAccessRole;
        expiresAt?: number;
        error?: string;
      }
    }
  }
}

enum UserPermissionAccessRole {
  EDITOR = 'editor',
  VIEWER = 'viewer',
}

// Using API
await Velt.getUserPermissions(request as GetUserPermissionsRequest);
```
</Tab>
</Tabs>

</Update>

<Update label="4.5.2-beta.9" description="September 11, 2025">

### New Features
- [**Comments**]: Updated default placeholders and added props to customize placeholders for comment and reply inputs. Added wireframes to allow users to customize how it looks.
  - Default placeholders:
    - Comment: "Comment or add others with @"
    - Reply: "Reply or add others with @"

<Tabs>
<Tab title="React / Next.js">
```jsx
// Wireframe placeholders
<VeltWireframe>
  <VeltCommentDialogWireframe.Composer>
    <VeltCommentDialogWireframe.Composer.Input commentplaceholder="Ask a question or propose a change (use @ to mention teammates)" replyplaceholder="Add context or suggest a fix (use @ to notify others)" />
  </VeltCommentDialogWireframe.Composer>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Wireframe placeholders -->
<velt-wireframe>
  <velt-comment-dialog-composer-wireframe>
    <velt-comment-dialog-composer-input-wireframe commentplaceholder="Ask a question or propose a change (use @ to mention teammates)" replyplaceholder="Add context or suggest a fix (use @ to notify others)">
    </velt-comment-dialog-composer-input-wireframe>
  </velt-comment-dialog-composer-wireframe>
</velt-wireframe>
```
</Tab>
</Tabs>

- [**Comments**]: Added hook to set and get UI state.

<Tabs>
<Tab title="React / Next.js">
```jsx
const { uiState, setUiState } = useUiState();

useEffect(() => {
  console.log('uiState: ', uiState);
}, [uiState]);

<button onClick={() => setUiState({ a: 1, b: 2 })}>Set Data</button>
<button onClick={() => setUiState({ a: null, b: null })}>Set Data Null</button>
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
  // UI state via API
  Velt.setUiState({ a: 1, b: 2 });
  Velt.getUiState().subscribe((data) => {
    console.log('UI State: ', data);
  });
  // Set fields back to null
  Velt.setUiState({ a: null, b: null });
</script>
```
</Tab>
</Tabs>

- [**Comments**]: Added Edited chip in comment thread: Edits are now visibly transparent at a glance, improving auditability and helping reviewers quickly spot updated messages in long discussions. See [Comment Dialog components](/ui-customization/features/async/comments/comment-dialog-components).

**New wireframes added to customize "Edited" Chip:**

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltWireframe>
  <VeltCommentDialogWireframe.ThreadCard.Edited>
    <span>Custom Edited</span>
  </VeltCommentDialogWireframe.ThreadCard.Edited>
</VeltWireframe>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-wifreframe>
  <velt-comment-dialog-thread-card-edited-wireframe>
    <span>Custom Edited</span>
  </velt-comment-dialog-thread-card-edited-wireframe>
</velt-wifreframe>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Comments**]: In `InlineCommentsSection` single-thread mode, count now reflects the number of Comments vs Comment Annotations.
- [**Recorder**]: Fixed an issue where longer recordings were not rendering the preview correctly in recording player and editor.
- [**Recorder**]: Fixed an issue where the host app was not clickable when screen recording was used in floating mode.

</Update>

<Update label="4.5.2-beta.8" description="September 10, 2025">

### Improvements
- [**Single Editor Mode**]: Added additional debugging logs for Single Editor Mode.

### Bug Fixes
- [**UI**]: Scoped `.cdk-overlay-pane` CSS into `.velt-overlay-panel` class to avoid global style leakage.

</Update>

<Update label="4.5.2-beta.7" description="September 9, 2025">

### New Features
- [**Comments**]: Added clickable links of text selection in comments and a link callback to handle link clicks programmatically.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Link callback in comments
<VeltComments linkCallback={true} />

// Hook
const linkEvent = useCommentEventCallback('linkClicked');
useEffect(() => {
  if (linkEvent) {
    // Navigate with your router here
    console.log('linkClicked', linkEvent);
  }
}, [linkEvent]);
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Link callback in comments -->
<velt-comments link-callback="true"></velt-comments>

<script>
  const commentElement = Velt.getCommentElement();
  commentElement.on('linkClicked').subscribe((linkData) => {
    // Navigate with your router here
    console.log('Comment link clicked:', linkData);
  });
</script>
```
</Tab>
</Tabs>

- [**Recorder**]: Added `recorderId` prop to Video Editor.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Video Editor
<VeltVideoEditor recorderId="zK3iEAfvs1Htu3QYPy5S" />
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Video Editor -->
<velt-video-editor recorder-id="zK3iEAfvs1Htu3QYPy5S"></velt-video-editor>
```
</Tab>
</Tabs>

- [**Comments**]: Slack-style link pasting: select text and paste a link to directly convert it into a clickable hyperlink. This speeds up authoring and provides a familiar UX for users.


### Improvements
- [**Comments**]: Removed translation from group name in sidebar to allow special characters.

### Bug Fixes
- [**Recorder**]: Fixed `recorderId` change detection in video player.
- [**Recorder**]: Fixed thread mode UI for screen recordings.


</Update>

<Update label="4.5.2-beta.6" description="September 8, 2025">

### New Features
- [**Comments**]: Added group support for custom lists. Useful for workflows like issue trackers (e.g., group by "Priority" or "Status"), allowing users to quickly refer and insert custom entities from your app. With this feature, you can combine multiple entity types into one drop down just like Linear. See full examples in Customize Behavior → [Create custom list data on comment](/async-collaboration/comments/customize-behavior#createcustomlistdataoncomment).

<Tabs>
<Tab title="React / Next.js">
```ts
const customListWithGroups = {
  hotkey: "$",
  type: "custom",
  groups: [
    { id: "categories", name: "Categories" },
    { id: "priorities", name: "Priorities" }
  ],
  data: [
    // Categories group - 2 items
    {
      id: "bug_1",
      name: "Bug 1",
      description: "Bug report 1",
      groupId: "categories",
      icon: { svg: "<svg></svg>" }
    },
    {
      id: "feature_2",
      name: "Feature Request 2",
      description: "New feature 2",
      groupId: "categories",
      icon: { url: "https://random.png" }
    },
    // Priorities group - 2 items
    {
      id: "high_1",
      name: "High Priority 1",
      description: "Urgent task 1",
      groupId: "priorities",
      icon: { url: "https://random.png" }
    },
    {
      id: "medium_2",
      name: "Medium Priority 2",
      description: "Normal task 2",
      groupId: "priorities",
      icon: { svg: "<svg></svg>" }
    },
    // Ungrouped items - 2 items
    {
      id: "misc_1",
      name: "Miscellaneous 1",
      description: "Other items 1",
      icon: { url: "https://random.png" }
    },
    {
      id: "note_2",
      name: "Note 2",
      description: "General note 2",
      icon: { svg: "<svg></svg>" }
    }
  ]
};

const commentElement = client.getCommentElement();
commentElement.createCustomListDataOnComment(customListWithGroups);
```
</Tab>
<Tab title="Other Frameworks">
```js
const customListWithGroups = {
  hotkey: "$",
  type: "custom",
  groups: [
    { id: "categories", name: "Categories" },
    { id: "priorities", name: "Priorities" }
  ],
  data: [
    { id: "bug_1", name: "Bug 1", description: "Bug report 1", groupId: "categories", icon: { svg: "<svg></svg>" } },
    { id: "feature_2", name: "Feature Request 2", description: "New feature 2", groupId: "categories", icon: { url: "https://random.png" } },
    { id: "high_1", name: "High Priority 1", description: "Urgent task 1", groupId: "priorities", icon: { url: "https://random.png" } },
    { id: "medium_2", name: "Medium Priority 2", description: "Normal task 2", groupId: "priorities", icon: { svg: "<svg></svg>" } },
    { id: "misc_1", name: "Miscellaneous 1", description: "Other items 1", icon: { url: "https://random.png" } },
    { id: "note_2", name: "Note 2", description: "General note 2", icon: { svg: "<svg></svg>" } }
  ]
};

const commentElement = Velt.getCommentElement();
commentElement.createCustomListDataOnComment(customListWithGroups);
```
</Tab>
</Tabs>

</Update>

<Update label="4.5.2-beta.5" description="September 8, 2025">

### Improvements
- [**Single Editor Mode**]: Optimized and made Single Editor Mode more robust.
</Update>

<Update label="4.5.2-beta.4" description="September 6, 2025">

### New Features
- [**Single Editor Mode**]: Added `updateUserPresence` to send heartbeat data from the host app. This helps Velt detect multi-tab activity and resolve who is the active editor when users switch tabs or devices and will use that as a fallback in rare edge cases if it fails to detect multi‑tab/device presence. Most apps don’t need this; use only if you see ambiguity in who’s the active editor.

<Tabs>
<Tab title="React / Next.js">
```ts
export interface LiveStateSingleEditorExternalUserPresence {
  /** True if the same user is present on a different tab. */
  sameUserPresentOnTab?: boolean;
  /** True if a different user is present on a different tab. */
  differentUserPresentOnTab?: boolean;
  /** User IDs of users present on a different tab. */
  userIds?: string[];
}

// API method
const liveStateSyncElement = client.getLiveStateSyncElement();
liveStateSyncElement.updateUserPresence({
  sameUserPresentOnTab: false,
  differentUserPresentOnTab: true,
  userIds: ['user-2']
});
```
</Tab>
<Tab title="Other Frameworks">
```js
// API method
const liveStateSyncElement = Velt.getLiveStateSyncElement();
liveStateSyncElement.updateUserPresence({
  sameUserPresentOnTab: false,
  differentUserPresentOnTab: true,
  userIds: ['user-2']
});
```
</Tab>
</Tabs>

### Improvements
- [**Single Editor Mode**]: Added validations in `setUserAsEditor` to set a user only if no editor is currently assigned.

<Tabs>
<Tab title="React / Next.js">
```ts
export interface SetUserAsEditorResponse {
  error?: ErrorEvent;
}

export type ErrorEvent = {
  error?: string;
  code: string;
  message?: string;
  source?: string;
};

// Method signature
// public setUserAsEditor: () => Promise<SetUserAsEditorResponse | void>;

// Usage with response handling
const liveStateSyncElement = client.getLiveStateSyncElement();
const result = await liveStateSyncElement.setUserAsEditor();
if (result?.error) {
  if (result.error.code === 'same_user_editor_current_tab') {
    // Same user is already editor in current tab
  } else if (result.error.code === 'same_user_editor_different_tab') {
    // Same user is already editor in different tab
  } else if (result.error.code === 'another_user_editor') {
    // Another user is already editor
  }
}
```

```ts
// Possible error values
// For same user current tab error
{
  code: 'same_user_editor_current_tab',
  message: 'Same user is already editor in current tab.',
  source: 'setUserAsEditor',
}

// For same user different tab error
{
  code: 'same_user_editor_different_tab',
  message: 'Same user is already editor in different tab.',
  source: 'setUserAsEditor',
}

// For another user error
{
  code: 'another_user_editor',
  message: 'Another user is already editor.',
  source: 'setUserAsEditor',
}
```
</Tab>
<Tab title="Other Frameworks">
```js
// Method usage
const liveStateSyncElement = Velt.getLiveStateSyncElement();
const result = await liveStateSyncElement.setUserAsEditor();
if (result && result.error) {
  if (result.error.code === 'same_user_editor_current_tab') {
    // Same user already editor in current tab
  } else if (result.error.code === 'same_user_editor_different_tab') {
    // Same user already editor in different tab
  } else if (result.error.code === 'another_user_editor') {
    // Another user already editor
  }
}
```
</Tab>
</Tabs>

- [**Single Editor Mode**]: Optimized and made Single Editor Mode more robust.
</Update>


<Update label="4.5.2-beta.3" description="September 5, 2025">

### New Features
- [**Access Control**]: Added support for viewer and editor roles for permanent and temporary users.

<Info>
**Editor vs Viewer roles**

- **Editor**: Full read/write access to collaboration data on the resource (create/edit/delete comments and replies, add reactions, start recordings, etc.).
- **Viewer**: Read-only access to collaboration data (view comments and replies, presence, cursors, recordings, notifications) without the ability to modify.

Why this matters: You can enforce read-only experiences, safely grant temporary edit windows, and align Velt features with your app’s permission model.
</Info>

For implementation details, see the v2 Auth APIs:

- Generate Token: [/api-reference/rest-apis/v2/auth/generate-token](/api-reference/rest-apis/v2/auth/generate-token)
- Add Permissions: [/api-reference/rest-apis/v2/auth/add-permissions](/api-reference/rest-apis/v2/auth/add-permissions)

<Warning>
`accessRole` is configurable only via the v2 Users and Auth Permissions REST APIs. Frontend SDK methods do not accept or change `accessRole`.

Relevant endpoints:
- [/api-reference/rest-apis/v2/users/add-users](/api-reference/rest-apis/v2/users/add-users)
- [/api-reference/rest-apis/v2/users/update-users](/api-reference/rest-apis/v2/users/update-users)
- [/api-reference/rest-apis/v2/auth/add-permissions](/api-reference/rest-apis/v2/auth/add-permissions)
- [/api-reference/rest-apis/v2/auth/generate-token](/api-reference/rest-apis/v2/auth/generate-token)
</Warning>

<Note>
See the [Access Control overview](/key-concepts/overview#access-control) for concepts and detailed guidance.
</Note>

### Improvements
- [**Single Editor Mode**]: Optimized and made Single Editor Mode more robust.
</Update>

<Update label="4.5.2-beta.2" description="August 25, 2025">

### New Features
- [**Comments**]: Launched a purpose built library for adding comments to Lexical Editor. [Learn more](/async-collaboration/comments/setup/lexical).

### Improvements
- [**Comments**]: Optimized how comment read/unread state is updated internally.
</Update>



<Update label="4.5.2-beta.1" description="August 22, 2025">
### Bug Fixes
- [**UI Customization**]: Fixed an issue where `Velt Button` was not passing internal state to its children in some scenarios.
</Update>



<Update label="4.5.1" description="August 22, 2025">
### Bug Fixes
- [**Core**]: Resolved a race condition in resolving user data. Applied the same fix that was added to the `4.5.0-beta.66-patch.1` version.

<Warning>
  Note after this update, if you plan to go back to older version of the SDK before `4.5.0-beta.43`, then please reach out to Velt Support for a graceful rollback.
</Warning>
</Update>



<Update label="4.5.0-beta.66-patch.1" description="August 22, 2025">
### Bug Fixes
- [**Core**]: Resolved a race condition in resolving user data.
</Update>



<Update label="4.5.0" description="August 20, 2025">
### Improvements
- [**Comments**]: Updated comment annotation count subscription. It now supports getting total and unread Comment Annotations count across Organization, Folder, Document and Multiple Documents levels.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Organization level
const commentElement = client.getCommentElement();
commentElement.getCommentAnnotationsCount({ organizationId: 'org1' }).subscribe((data) => {
  console.log('getCommentAnnotationsCount with organizationId', data);
});

// Folder level
commentElement.getCommentAnnotationsCount({ organizationId: 'org1', folderId: 'folder2', allDocuments: true }).subscribe((data) => {
  console.log('getCommentAnnotationsCount with organizationId and folderId and allDocuments', data);
});

// Document Level
commentElement.getCommentAnnotationsCount().subscribe((data) => {
  console.log('getCommentAnnotationsCount', data);
});

// Aggregate Across Multiple Documents
commentElement.getCommentAnnotationsCount({ aggregateDocuments: true }).subscribe((data) => {
  console.log('getCommentAnnotationsCount with aggregateDocuments', data);
});

```
</Tab>
<Tab title="Other Frameworks">
```js
// Organization level
const commentElement = Velt.getCommentElement();
commentElement.getCommentAnnotationsCount({ organizationId: 'org1' }).subscribe((data) => {
  console.log('getCommentAnnotationsCount with organizationId', data);
});

// Folder level
commentElement.getCommentAnnotationsCount({ organizationId: 'org1', folderId: 'folder2', allDocuments: true }).subscribe((data) => {
  console.log('getCommentAnnotationsCount with organizationId and folderId and allDocuments', data);
});

// Document Level
commentElement.getCommentAnnotationsCount().subscribe((data) => {
  console.log('getCommentAnnotationsCount', data);
});

// Aggregate Across Multiple Documents
commentElement.getCommentAnnotationsCount({ aggregateDocuments: true }).subscribe((data) => {
  console.log('getCommentAnnotationsCount with aggregateDocuments', data);
});
```
</Tab>
</Tabs>

<Warning>
  Note after this update, if you plan to go back to older version of the SDK before `4.5.0-beta.43`, then please reach out to Velt Support for a graceful rollback.
</Warning>

</Update>

<Update label="4.5.0-beta.66" description="August 14, 2025">
### New Features
- [**Comments**]: Added support to filter out ghost comments when retrieving comment annotations count.

<Tabs>
<Tab title="React / Next.js">
```jsx
const commentElement = client.getCommentElement();
commentElement.getCommentAnnotationsCount({ filterGhostComments: true }).subscribe((data) => {
   console.log('getCommentAnnotationsCount with filterGhostComments', data);
});

```
</Tab>
<Tab title="Other Frameworks">
```js
const commentElement = Velt.getCommentElement();
commentElement.getCommentAnnotationsCount({ filterGhostComments: true }).subscribe((data) => {
   console.log('getCommentAnnotationsCount with filterGhostComments', data);
});

```
</Tab>
</Tabs>


</Update>



<Update label="4.5.0-beta.65" description="August 13, 2025">
### New Features
- [**Recorder**]: Added API to programmatically request audio and video permissions from the user.

<Tabs>
<Tab title="React / Next.js">
```jsx
const recorderElement = useRecorderUtils();

recorderElement.askDevicePermission({
  audio: true,
  video: true
});
```
</Tab>
<Tab title="Other Frameworks">
```js
const recorderElement = Velt.getRecorderElement();

recorderElement.askDevicePermission({
  audio: true,
  video: true
});
```
</Tab>
</Tabs>
</Update>




<Update label="4.5.0-beta.64" description="August 8, 2025">
### Improvements
- [**UI Customization**]: Added an alternative approach to evaluate `Velt If` conditions. The default method could be blocked by some strict Content Security Policies (CSP) that disallow `unsafe-eval`.
<Tabs>
<Tab title="React / Next.js">
```javascript
client.enableSafeEval();
client.disableSafeEval();
```
</Tab>

<Tab title="Other Frameworks">
```javascript
Velt.enableSafeEval();
Velt.disableSafeEval();
```
</Tab>
</Tabs>

- [**Multiplayer Editing**]: Now you can encrypt CRDT data before it’s stored in Velt by registering a custom encryption provider. For CRDT methods, input data is of type `Uint8Array | number[]`. [Learn more](/realtime-collaboration/crdt/setup/core#custom-encryption)

</Update>



<Update label="4.5.0-beta.63" description="August 7, 2025">
### Improvements
- [**Comments**]: Added `filterGhostCommentsInSidebar` config in comment sidebar to hide ghost comments from sidebar. Default: `false`

<Tabs>
<Tab title="React / Next.js">
**Using Props:**
```jsx
// Use either of the following
<VeltCommentsSidebar filterGhostCommentsInSidebar={true} />
<VeltSidebarButton filterGhostCommentsInSidebar={true} />
```

**Using APIs:**
```javascript
const commentElement = client.getCommentElement();
commentElement.enableFilterGhostCommentsInSidebar();
commentElement.disableFilterGhostCommentsInSidebar();
```
</Tab>

<Tab title="Other Frameworks">
**Using Props:**
```html
<!-- Use either of the following -->
<velt-comments-sidebar filter-ghost-comments-in-sidebar="true"></velt-comments-sidebar>
<velt-sidebar-button filter-ghost-comments-in-sidebar="true"></velt-sidebar-button>
```

**Using APIs:**
```javascript
const commentElement = Velt.getCommentElement();
commentElement.enableFilterGhostCommentsInSidebar();
commentElement.disableFilterGhostCommentsInSidebar();
```

</Tab>
</Tabs>
</Update>



<Update label="4.5.0-beta.62" description="August 6, 2025">
### Bug Fixes
- [**Recorder**]: Fixed an issue where the `recordingEditDone` event was not firing correctly under certain conditions.
</Update>

<Update label="4.5.0-beta.61" description="July 24, 2025">
### New Features
- [**Notifications**]: Added wireframes to modify the title text of the Velt Notification Panel.
- [**Video Editor**]: Introduced the `VeltVideoEditor`, a new embeddable component for viewing and editing video recordings directly in your application. It can be initialized using a URL, blob, or recorder ID.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltVideoEditor
	blob={blob}
  url="videourl.mp4"
  darkMode={true}
  variant="xyz"
  recorderId="123"
/>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-video-editor
  recorder-id="zK3iEAfvs1Htu3QYPy5S"
  blob="blob"
  url="videourl.mp4"
  dark-mode="true"
  variant="xyz"
></velt-video-editor>
```
</Tab>
</Tabs>
</Update>



<Update label="4.5.0-beta.60" description="July 23, 2025">
### Improvements
- [**Auth**]: When re-authentication occurs after a token expires, `setDocuments` now automatically restores the previous set of documents to maintain session continuity.
</Update>



<Update label="4.5.0-beta.59" description="July 22, 2025">
### New Features
- [**Auth**]: Introduced `authProvider` for more robust and flexible authentication management. This includes automatic token refresh with configurable retry logic. [Learn more](/key-concepts/overview#sign-in-a-user).

- [**Access Control**]: Added a new permissions API to [grant](/api-reference/rest-apis/v2/auth/add-permissions) and [revoke](/api-reference/rest-apis/v2/auth/remove-permissions) user permissions dynamically on demand.
  - Grant permissions on demand vs syncing users to Velt.
  - Grant temporary time based permissions or permanent permissions to Organizations, Folders and Documents.
  - [Learn more](/key-concepts/overview#access-control).

</Update>

<Update label="4.5.0-beta.58" description="July 22, 2025">
### New Features
- [**Multiplayer Editing**]: Introduced versioning support for CRDT stores. You can now save snapshots of your collaborative data, list previously saved versions, and restore the store to a specific version. This feature is currently supported for `text` and `array` data types.
</Update>



<Update label="4.5.0-beta.57" description="July 19, 2025">
### Improvements
- [**Recorder**]: Expanded recorder functionality with a comprehensive set of lifecycle events, allowing you to build more integrated and responsive recording experiences. The following events are now available:
  - `recordingEditDone`: Triggered when the "Done" button is clicked in the recording editor. Fires after edits are saved, or immediately if no edits were made.
  - `recordingStarted`: Triggered when the recording starts.
  - `recordingPaused`: Triggered when the recording is paused.
  - `recordingCancelled`: Triggered when the recording is cancelled.
  - `recordingStopped`: Triggered when the recording is stopped.
  - `recordingResumed`: Triggered when the recording is resumed after being paused.


</Update>


<Update label="4.5.0-beta.56" description="July 19, 2025">
### New Features
- [**Auth**]: Introduced a new streamlined authentication flow to simplify user session management within Velt.

</Update>

<Update label="4.5.0-beta.55" description="July 16, 2025">

### New Features
- [**Auth**]: Added support for on-demand access control. Instead of syncing users to Velt, you can now grant permanent or temporary access to resources (organizations, folders, documents) to users on the fly.
  - If you pass `organizationId` in the `identify` method and set `requireJwtToken` to `true` (in console), you **must** also include access to the same `organizationId` in the `resources` array of your permissions. Otherwise, it will throw an error.

<Tabs>
<Tab title="Backend Endpoint">
``` ts
const authRequest: VeltAuthTokenRequest = {
  apiKey: "API_KEY",
  userId: "USER_ID",
  userProperties: {
    isAdmin: false,
    name: "USER_NAME",
    email: "USER_EMAIL"
  },
  permissions: {
    resources: [
      {
        type: "organization",
        id: "ORGANIZATION_ID"
      },
      {
        type: "document",
        id: "DOCUMENT_ID",
        organizationId: "ORGANIZATION_ID",
        expiresAt: Math.floor(Date.now() / 1000) + 3600 // 1 hour from now
      }
    ]
  }
};

try {
  const response = await fetch('https://api.velt.dev/v2/auth/generate_token', {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(authRequest),
  });

  if (!response.ok) {
    throw new Error(`HTTP error! status: ${response.status}`);
  }

  const responseJson = await response.json();
  const token = responseJson?.result?.data?.token;
  return token;
} catch (error) {
  console.error("Error:", error);
}

```
</Tab>
<Tab title="Frontend">
``` ts
const token = await __yourBackendEndpointToGenerateToken__();
await client.identify(user, {
  authToken: token,
})
```

</Tab>
</Tabs>

- [**Multiplayer Editing (CRDT)**]: Launched Yjs based CRDT libraries for:
  - `@veltdev/crdt`: Framework-agnostic CRDT stores (array, map, text, xml), versioning, subscriptions, and syncing via the Velt client.
  - `@veltdev/crdt-react`: React Hook wrapper for CRDT integration.
  - `@veltdev/tiptap-crdt`: Purpose built CRDT library for Tiptap Editor to enable multiplayer editing.

### Improvements
- [**REST APIs**]: Added support for `context` field on:
  - `Comment` `add` and `update` APIs: Now you can pass `context` field at the comment level.
  - `CommentAnnotation` `add` API: Now you can pass `context` field not only at the comment annotation level but also at the comment level.

</Update>


<Update label="4.5.0-beta.54" description="July 16, 2025">
### Bug Fixes

- [**Recorder**]: Fixed edge cases in Firefox where devices were not appearing in settings, video sometimes remained off during video recording, and screen recording would not start until the browser was focused.
- [**Recorder**]: Fixed an issue where the author was incorrectly shown for audio recordings in floating player.
- [**Notifications**]: Fixed an issue where the Notification Panel and Comments Sidebar would not close if the document was not set.
- [**Seen By**]: Fixed an issue where the "Seen by" list incorrectly included the author.

</Update>

<Update label="4.5.0-beta.53" description="July 15, 2025">
### Improvements
- [**Comments Sidebar**]: Added `sidebarButtonCountType` config to control the count shown on the sidebar button.
  - `default`: Shows the total count of comments in open and in progress states.
  - `filter`: Shows the count of filtered comments.

<Tabs>
<Tab title="React / Next.js">
**Using Props:**
```jsx
  <VeltCommentsSidebar sidebarButtonCountType="filter" />
  <VeltSidebarButton sidebarButtonCountType="filter" />
```
**Using APIs:**
```jsx
const commentElement = useCommentUtils();
commentElement.setSidebarButtonCountType('filter');
```

</Tab>
  <Tab title="Other Frameworks">

**Using Props:**
```html
<velt-comments-sidebar sidebar-button-count-type="filter"></velt-comments-sidebar>
<velt-sidebar-button sidebar-button-count-type="filter"></velt-sidebar-button>
```

**Using APIs:**
```js
const commentElement = Velt.getCommentElement();
commentElement.setSidebarButtonCountType('filter');
```
  </Tab>
</Tabs>

</Update>


<Update label="4.5.0-beta.52" description="July 14, 2025">
### Improvements
- [**User**]: Avatar colors are now generated consistently across frontend and backend when not set manually.
- [**Self-hosting**]: Now we are returning author `userId` in comment and reaction resolver APIs for more flexible querying and filtering.
</Update>

<Update label="4.5.0-beta.51" description="July 14, 2025">
### Improvements
- [**Core**]: Added internal optimzations for realtime data fetching.
</Update>

<Update label="4.5.0-beta.50" description="July 11, 2025">
### New Features
- [**Comments**]: Added "Involved" filter to the comment sidebar to easily find comments where a user is author, mentioned, or assigned.


### Bug Fixes
- [**Recorder**]: Fixed issues with audio/video capture and permission prompts in Firefox.

</Update>


<Update label="4.5.0-beta.49" description="July 10, 2025">
### Improvements
- [**Notifications**]: Added an option to filter notifications based on type in the `getNotificationsData` method.
  - Now this method/hook can accept an optional `GetNotificationsDataQuery` object, which supports a `type` property:
    - `'all'` (default): returns all notifications from the documents the user has access to.
    - `'forYou'`: returns notifications where the current user is involved.
    - `'documents'`: returns notifications for documents where the current user has access to.

<Tabs>
<Tab title="React / Next.js">
```jsx
const notificationsData = useNotificationsData({ type: 'forYou' });

useEffect(() => {
  if (notificationsData) {
    console.log(notificationsData);
  }
}, [notificationsData]);
```
</Tab>
  <Tab title="Other Frameworks">
```js
const notificationElement = Velt.getNotificationElement();
notificationElement.getNotificationsData({ type: 'forYou' }).subscribe((notifications) => {
    console.log(notifications);
});

```
  </Tab>
</Tabs>

### Bug Fixes
- [**Comments**]: Fixed an issue with aggregated comments dialog, where hitting the reply button would close the dialog.
- [**Notifications**]: Fixed empty state issue in the notification API where the data would first return an empty array before returning the actual data.

</Update>


<Update label="4.5.0-beta.48" description="July 10, 2025">
### Bug Fixes
- [**Comments**]: Fixed an issue with the comment tool in popover mode where the tool would not hide sometimes even when the comment was added.

</Update>


<Update label="4.5.0-beta.47" description="July 10, 2025">
### Improvements
- [**Video Editor**]: Added robustness for edge cases with short videos (< 2-3s) that could cause unexpected behavior in the editor. eg: zooming, trimming, etc.
- [**Video Editor**]: Added robustness to playhead action buttons group and tooltip display and position logic for edge cases.
</Update>

<Update label="4.5.0-beta.46" description="July 09, 2025">
### Improvements
- [**Core**]: Added internal optimzations for realtime data fetching.
</Update>

<Update label="4.5.0-beta.45" description="July 09, 2025">

### Updates
- [**Huddle**]: Added `serverFallback` config in huddle. By default Huddle service is peer-to-peer. This will enable or disable the fallback to server-side for connectivity if peer-to-peer fails.

  Default: `true`

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltHuddle serverFallback={false} />
```
</Tab>
  <Tab title="Other Frameworks">
```html
<velt-huddle server-fallback="false"></velt-huddle>
```
  </Tab>
</Tabs>

### Improvements
- [**Notifications**]: Updated `documentName` rendering logic in the notification panel to only render the component if the `documentName` is available. Earlier it was falling back to the `documentId`.
- [**Notifications**]: Added support to open and close the notification panel using APIs.
<Tabs>
<Tab title="React / Next.js">
```jsx
const notificationElement = useNotificationUtils()
notificationElement.openNotificationsPanel()
notificationElement.closeNotificationsPanel()

```
</Tab>
  <Tab title="Other Frameworks">
```html
const notificationElement = Velt.getNotificationElement();
notificationElement.openNotificationsPanel();
notificationElement.closeNotificationsPanel();
```
  </Tab>
</Tabs>



### Bug Fixes
- [**Comments**]: Fixed an issue where DOM changes detection was not working for text comments in some scenarios.
- [**Video Editor**]: Hide video editor tooltips and selection during playback.
- [**Notifications**]: Fixed an issue where notification panel was not closing when clicked on notification tool.

</Update>

<Update label="4.5.0-beta.44" description="July 07 2025">

### New Features
- [**Video Editor**]: Updated video editor with new UI design for improved UX including tooltips, floating action buttons, active/inactive states, etc.
- [**Video Editor**]: Added a retake button on video editor.

<Tabs>
  <Tab title="React / Next.js">
  **Using Props (use any one of the following):**
  ```jsx
  <VeltRecorderPlayer retakeOnVideoEditor={true} />
  <VeltRecorderControlPanel retakeOnVideoEditor={true} />
  <VeltRecorderTool retakeOnVideoEditor={true} />
  ```

**Using APIs:**
  ```jsx
  const recorderElement = useRecorderUtils();
  
  // Enable/disable retake button on video editor
  recorderElement.enableRetakeOnVideoEditor();
  recorderElement.disableRetakeOnVideoEditor();
  ```
  </Tab>
  <Tab title="Other Frameworks">

  **Using Attributes (use any one of the following):**
  ```html
  <velt-recorder-player retake-on-video-editor="true"></velt-recorder-player>
  <velt-recorder-control-panel retake-on-video-editor="true"></velt-recorder-control-panel>
  <velt-recorder-tool retake-on-video-editor="true"></velt-recorder-tool>
  ```

  **Using APIs:**
  ```jsx
  const recorderElement = Velt.getRecorderElement();
  
  // Enable/disable retake button on video editor
  recorderElement.enableRetakeOnVideoEditor();
  recorderElement.disableRetakeOnVideoEditor();
  ```
  </Tab>
  </Tabs>

- [**Video Editor**]: Added onboarding tooltip for new users.

  <Tabs>
  <Tab title="React / Next.js">
  **Using APIs:**
  ```jsx
  const recorderElement = useRecorderUtils();
  
  // Enable/disable onboarding tooltip
  recorderElement.enableOnboardingTooltip();
  recorderElement.disableOnboardingTooltip();
  ```
  </Tab>

  <Tab title="Other Frameworks">
  **Using APIs:**
  ```jsx
  const recorderElement = Velt.getRecorderElement();
  
  // Enable/disable onboarding tooltip
  recorderElement.enableOnboardingTooltip();
  recorderElement.disableOnboardingTooltip();
  ```
  </Tab>
  </Tabs>

</Update>

<Update label="4.5.0-beta.43" description="July 07 2025">
### Improvements
- [**Core**]: Added central DB for user metadata. Going forward, if user metadata changes via REST API or via identify method, it will be reflected across all data rendered in the UI. 
<Warning>
Note after this update, if you plan to go back to older version of the SDK before `4.5.0-beta.43`, then please reach out to Velt Support for a graceful rollback.
</Warning>

</Update>

<Update label="4.5.0-beta.42" description="July 06 2025">
### Bug Fixes
- [**Comments**]: Fixed the issue where context was not applied to freestyle area comments.
</Update>

<Update label="4.5.0-beta.41" description="July 04 2025">
### New Features
- [**Comments**]: Added support to filter and aggregate comment annotations by `locationId` in `InlineCommentsSection`, `VeltCommentPin` and `VeltCommentBubble` components. `folderId` or `documentId` is required.

  <Tabs>
  <Tab title="React / Next.js">

  **Inline Comments Section:**
  ```jsx
  // folderId + locationId
  <VeltInlineCommentsSection folderId="YOUR_FOLDER_ID" locationId="YOUR_LOCATION_ID" />
  // documentId + locationId
  <VeltInlineCommentsSection documentId="YOUR_DOCUMENT_ID" locationId="YOUR_LOCATION_ID" />
  ```

  **Comment Tool - Comment Bubble for popover comments:**
  ```jsx
  // folderId + locationId
  <VeltCommentTool folderId="YOUR_FOLDER_ID" locationId="YOUR_LOCATION_ID" />
  <VeltCommentBubble folderId="YOUR_FOLDER_ID" locationId="YOUR_LOCATION_ID" />
  // documentId + locationId
  <VeltCommentTool documentId="YOUR_DOCUMENT_ID" locationId="YOUR_LOCATION_ID" />
  <VeltCommentBubble documentId="YOUR_DOCUMENT_ID" locationId="YOUR_LOCATION_ID" />
  ```

  **Comment Pin:**
  ```jsx
  // folderId + locationId
  <VeltCommentPin folderId="YOUR_FOLDER_ID" locationId="YOUR_LOCATION_ID" />
  // documentId + locationId
  <VeltCommentPin documentId="YOUR_DOCUMENT_ID" locationId="YOUR_LOCATION_ID" />
  ```
  </Tab>

  <Tab title="Other Frameworks">

  **Inline Comments Section:**
  ```html
  <!-- folderId + locationId -->
  <velt-inline-comments-section folder-id="YOUR_FOLDER_ID" location-id="YOUR_LOCATION_ID"></velt-inline-comments-section>
  <!-- documentId + locationId -->
  <velt-inline-comments-section document-id="YOUR_DOCUMENT_ID" location-id="YOUR_LOCATION_ID"></velt-inline-comments-section>
  ```

  **Comment Tool - Comment Bubble:**
  ```html
  <!-- folderId + locationId -->
  <velt-comment-tool folder-id="YOUR_FOLDER_ID" location-id="YOUR_LOCATION_ID"></velt-comment-tool>
  <velt-comment-bubble folder-id="YOUR_FOLDER_ID" location-id="YOUR_LOCATION_ID"></velt-comment-bubble>
  <!-- documentId + locationId -->
  <velt-comment-tool document-id="YOUR_DOCUMENT_ID" location-id="YOUR_LOCATION_ID"></velt-comment-tool>
  <velt-comment-bubble document-id="YOUR_DOCUMENT_ID" location-id="YOUR_LOCATION_ID"></velt-comment-bubble>
  ```

  **Comment Pin:**
  ```html
  <!-- folderId + locationId -->
  <velt-comment-pin folder-id="YOUR_FOLDER_ID" location-id="YOUR_LOCATION_ID"></velt-comment-pin>
  <!-- documentId + locationId -->
  <velt-comment-pin document-id="YOUR_DOCUMENT_ID" location-id="YOUR_LOCATION_ID"></velt-comment-pin>
  ```
  </Tab>
  </Tabs>

- [**Comments**]: Add ability to filter and aggregate comments by mulitple conditions: `folderId`/`documentId`/`locationId` and `context`. Only those comment annotations that satisfy all the conditions will be visible.

  <Tabs>
  <Tab title="React / Next.js">
  **Inline Comments Section:**
  ```jsx
  <VeltInlineCommentsSection folderId="YOUR_FOLDER_ID" documentId="YOUR_DOCUMENT_ID" locationId="YOUR_LOCATION_ID" context={{ key1: "value1" }} />
  ```

  **Comment Tool - Comment Bubble:**
  ```jsx
  <VeltCommentTool folderId="YOUR_FOLDER_ID" documentId="YOUR_DOCUMENT_ID" locationId="YOUR_LOCATION_ID" context={{ key1: "value1" }} />
  <VeltCommentBubble folderId="YOUR_FOLDER_ID" documentId="YOUR_DOCUMENT_ID" locationId="YOUR_LOCATION_ID" context={{ key1: "value1" }} />
  ```

  **Comment Pin:**
  ```jsx
  <VeltCommentPin folderId="YOUR_FOLDER_ID" documentId="YOUR_DOCUMENT_ID" locationId="YOUR_LOCATION_ID" context={{ key1: "value1" }} />
  ```
  </Tab>

  <Tab title="Other Frameworks">
  **Inline Comments Section:**
  ```jsx
  <velt-inline-comments-section folder-id="YOUR_FOLDER_ID" document-id="YOUR_DOCUMENT_ID" location-id="YOUR_LOCATION_ID" context='{"key1": "value1"}'></velt-inline-comments-section>
  ```

  **Comment Tool - Comment Bubble:**
  ```jsx
  <velt-comment-tool folder-id="YOUR_FOLDER_ID" document-id="YOUR_DOCUMENT_ID" location-id="YOUR_LOCATION_ID" context='{"key1": "value1"}'></velt-comment-tool>
  <velt-comment-bubble folder-id="YOUR_FOLDER_ID" document-id="YOUR_DOCUMENT_ID" location-id="YOUR_LOCATION_ID" context='{"key1": "value1"}'></velt-comment-bubble>
  ```

  **Comment Pin:**
  ```jsx
  <velt-comment-pin folder-id="YOUR_FOLDER_ID" document-id="YOUR_DOCUMENT_ID" location-id="YOUR_LOCATION_ID" context='{"key1": "value1"}'></velt-comment-pin>
  ```
  </Tab>
  </Tabs>

- [**Comments**]: Added support to add context to comment tool in freestyle mode.

- [**Core**]: Added window load event for Velt object after it is initialized. This is useful for developers using pure HTML/JS packages.

  ```jsx
  window.addEventListener('onVeltLoad', (event) => {
      console.log('onVeltLoad', window.Velt);
  });
  ```

### Bug Fixes
- [**Comments**]: Fixed issue where bubble count was showing the total comments count instead of the non-terminal state comments count.
- [**Comments**]: Fixed issue where area comments were not respecting dom id boundaries.


</Update>

<Update label="4.5.0-beta.40" description="July 03 2025">
### New Features
- [**Notifications**]: Added support to enable self notifications. By default notifications api and components exclude notifications where the current user is the action user.
  <Tabs>
  <Tab title="React / Next.js">

  **Using props:**
  ```jsx
  <VeltNotificationsTool selfNotifications={true} />
  <VeltNotificationsPanel selfNotifications={true} />
  ```

  **Using API:**
  ```jsx
  const notificationElement = useNotificationUtils();
  notificationElement.enableSelfNotifications(); // Enables self notifications.
  notificationElement.disableSelfNotifications(); // Disables self notifications.
  ```
  </Tab>
  
  <Tab title="Other Frameworks">
  **Using attributes:**
  ```html
  <velt-notifications-tool self-notifications="true"></velt-notifications-tool>
  <velt-notifications-panel self-notifications="true"></velt-notifications-panel>
  ```

  **Using API:**
  ```jsx
  const notificationElement = Velt.getNotificationElement();
  notificationElement.enableSelfNotifications(); // Enables self notifications.
  notificationElement.disableSelfNotifications(); // Disables self notifications.
  ```
  </Tab>
  </Tabs>

### Bug Fixes
- [**Comments**]: Fixed issue where comment text and HTML content was not being properly stripped during deletion for self-hosted data.

</Update>

<Update label="4.5.0-beta.39" description="July 03 2025">

### New Features
- [**CRDT**]: Added Yjs based CRDT library (`@veltdev/tiptap-crdt) for Tiptap Editor (in beta).
  - This enables live cursors and collaborative editing out of the box.
  - This is framework agnostic and can be used with any Tiptap editor.
  - [Learn more](/realtime-collaboration/crdt/setup/tiptap)


- [**Video Editor**]: Added zoom button in video editor with [wireframes support](/ui-customization/features/async/recorder/video-editor#addzoombutton).
- [**Recorder**]: Added API to turn on/off the microphone on the recorder control panel.
<Tabs>
  <Tab title="React / Next.js">
  **Using API:**
  ```jsx
  const recorderElement = useRecorderUtils();
  recorderElement.enableRecordingMic(); // Enables the microphone.
  recorderElement.disableRecordingMic(); // Disables the microphone.
  ```

  </Tab>
  
  <Tab title="Other Frameworks">
  **Using API:**
  ```jsx
  const recorderElement = Velt.getRecorderElement();
  recorderElement.enableRecordingMic(); // Enables the microphone.
  recorderElement.disableRecordingMic(); // Disables the microphone.
  ```
  </Tab>
  </Tabs>

### Improvements
- [**Video Editor**]: Enabled zoom options dropdown to be positioned at the center of the zoom track.
- [**Comments**]: Enabled standalone comment composer width to be set to 100% of the parent container.

</Update>

<Update label="4.5.0-beta.38" description="July 02 2025">
### New Features
- [**Comments**]: Added reply avatar component with [wireframes support](/ui-customization/features/async/comments/comment-dialog/subcomponents/body/subcomponents/replyavatars). This shows the avatars of unique users who have replied to a comment.
  <Tabs>
  <Tab title="React / Next.js">
  **Using props:**
  ```jsx
  <VeltComments maxReplyAvatars={2} replyAvatars={true} />
  ```

  **Using API:**
  ```jsx
  const commentsElement = client.getCommentsElement();
  commentsElement.enableReplyAvatars(); // Enables the reply avatar component.
  commentsElement.disableReplyAvatars(); // Disables the reply avatar component.
  commentsElement.setMaxReplyAvatars(2); // Sets the maximum number of reply avatars to show.
  ```

  </Tab>
  
  <Tab title="Other Frameworks">
  **Using props:**
  ```html
  <velt-comments max-reply-avatars="2" reply-avatars="true"></velt-comments>
  ```

  **Using API:**
  ```jsx
  const commentsElement = Velt.getCommentsElement();
  commentsElement.enableReplyAvatars(); // Enables the reply avatar component.
  commentsElement.disableReplyAvatars(); // Disables the reply avatar component.
  commentsElement.setMaxReplyAvatars(2); // Sets the maximum number of reply avatars to show.
  ```
  </Tab>
  </Tabs>
- [**Comments**]: Added template variable `totalReplies` for comment wireframes. It displays the total number of replies for a comment.

### Bug Fixes
- [**Comments**]: Fixed locationName logic to use locationId in sidebar for 'This Page' filter.
- [**Comments**]: Fixed "@" dropdown issue where it was not opening after user selection.

</Update>

<Update label="4.5.0-beta.37" description="June 30 2025">
### New Features
- [**Cursors**]: Added wireframes support for `Cursors` component.
</Update>

<Update label="4.5.0-beta.36" description="June 26 2025">
### Improvements
- [**Comments**]: Added sidebar filter dropdown into overlays for better handling of screen and UI edges.

### Bug Fixes
- [**Comments**]: Fixed an issue where inline comments section width was not being set correctly.

</Update>

<Update label="4.5.0-beta.35" description="June 25 2025">
### New Features
- [**Core**]: Added MCP Servers for:
  - **Velt REST APIs**: Allows you to interact with your Velt data directly from various MCP compatible clients, such as Cursor, Windsurf, Claude Desktop, etc. [Learn More](/mcp/mcp).
  - **Velt Docs**: Allows you to search and browse Velt's documentation directly within your MCP-compatible IDEs, like Cursor, Windsurf etc. This enables you to quickly find information about our SDKs, APIs, and features without having to leave your editor, streamlining your development workflow when implementing Velt. [Learn More](/mcp/mcp).

### Bug Fixes
- [**Comments**]: Minor UX fixes:
  - Fixed an issue where composer auto-scroll was not working in sidebar embed mode.
  - The composer now auto-scrolls to the text cursor when a long message is pasted.
  - Mentions are now added at the cursor's position, and the cursor is placed after the mention, not at the end of the input.

### Improvements
- [**Comments**]: Comment timestamps now show the created timestamp by default, and the last updated timestamp as fallback.
- [**Core**]: Added improved error messages for identify method so it's easier to debug scenarios like domain mismatch, token expired, organization mismatch, missing token etc.
- [**Comments**]: Added tooltips to an overlay.
</Update>

<Update label="4.5.0-beta.34" description="June 23 2025">
### New Features
- [**REST APIs**]: Extended v2 endpoints for all APIs. These come with additional schema validation.
  - The previous v1 endpoints will work as usual.

### Bug Fixes
- [**Core**]: Fixed an issue where location metadata, reset etc was not working as expected in some scenarios.
</Update>


<Update label="4.5.0-beta.33" description="June 20 2025">
### Bug Fixes
- [**Comments**]: Minor UX fixes:
  - Fixed mention dropdown opening when typing space at the very start of input.
  - Fixed mention dropdown opening when @ was added at the end of a word. Exceptions: (`,`, `;`, `:`).
  - Updated custom list dropdowns to behave like the default @ dropdown.
  - Fixed `ESC` key not closing the mentions dropdown.
  - When clicking on collapsed composer, it will bring it into view.
  - The composer will auto-scroll to the  text cursor when the inputted text is very long.
  - Comment dialog will come into view when returning from focused thread mode.
  - Fixed an issue where custom filter was getting reset on page refresh.
  - Fixed search placeholder type in React `<VeltCommentsSidebarWireframe.Search placeholder="Search Comments" />`.
  - Fixed composer collapsing when clicking away with text or attachments present - now only collapses when empty.
</Update>

<Update label="4.5.0-beta.32" description="June 19 2025">
### New Features
- [**Debugger**]: Added [Activity Logs](https://console.velt.dev/dashboard/debugger/activity-logs) to the Console.
  - Review the historical Velt events stream of your users.
  - This can help debug issues, user behaviour on Velt features, etc.
  - Currently supports the last 30 days of events.
  - There is a 24-48 hour delay in the events being shown in the console.

### Improvements
- [**Comments**]: Improved autoscroll behavior in comment sidebar for new comment additions, comment dialog clicks, and composer clicks.
- [**Comments**]: Added `system` type support in `filterConfig` for default filters

### Bug Fixes
- [**Comments**]: Fixed autocomplete dropdown opening while typing `@` in a word.
- [**Comments**]: Fixed autocomplete dropdown not closing after `@` followed by immediate space.
- [**Comments**]: Fixed comment sidebar filter type menu closing on outside clicks.
- [**Comments**]: Fixed comment sidebar filter search toggle functionality.

</Update>

<Update label="4.5.0-beta.31" description="June 19 2025">
### Improvements
- [**Comments**]: Added support to aggregate and show comment annotations by `folderId`, `documentId` and `context` in `InlineCommentSection`, `VeltCommentPin`, `VeltCommentTool` and `VeltCommentBubble` components.
  - All the comment annotations matching these props will be aggregated and shown in the component.
  - This will only work when the documents or the relevant folder are initialized first.

  <Tabs>
  <Tab title="React / Next.js">
  **Inline Comments Section:**
  ```jsx
  // Filter by folderId
  <VeltInlineCommentsSection folderId="YOUR_FOLDER_ID" />
  
  // Filter by documentId
  <VeltInlineCommentsSection documentId="YOUR_DOCUMENT_ID" />
  
  // Filter by context
  <VeltInlineCommentsSection context={{ key1: "value1" }} contextOptions={{ partialMatch: true }} />
  ```

  **Comment Tool (Works only in popover mode). This will attach these props to the new comment annotation created by the tool.**
  ```jsx
  // Filter by folderId
  <VeltCommentTool folderId="YOUR_FOLDER_ID" />
  
  // Filter by documentId
  <VeltCommentTool documentId="YOUR_DOCUMENT_ID" />
  
  // Filter by context
  <VeltCommentTool context={{ key1: "value1" }} contextOptions={{ partialMatch: true }} />
  ```

  **Comment Bubble:**
  ```jsx
  // Filter by folderId
  <VeltCommentBubble folderId="YOUR_FOLDER_ID" />
  
  // Filter by documentId
  <VeltCommentBubble documentId="YOUR_DOCUMENT_ID" />
  
  // Filter by context
  <VeltCommentBubble context={{ key1: "value1" }} contextOptions={{ partialMatch: true }} />
  ```

  **Comment Pin:**
  ```jsx
  // Filter by folderId
  <VeltCommentPin folderId="YOUR_FOLDER_ID" />
  
  // Filter by documentId
  <VeltCommentPin documentId="YOUR_DOCUMENT_ID" />
  
  // Filter by context
  <VeltCommentPin context={{ key1: "value1" }} contextOptions={{ partialMatch: true }} />
  ```
  </Tab>
  
  <Tab title="Other Frameworks">
  **Inline Comments Section:**
  ```html
  <!-- Filter by folderId -->
  <velt-inline-comments-section folder-id="YOUR_FOLDER_ID"></velt-inline-comments-section>
  
  <!-- Filter by documentId -->
  <velt-inline-comments-section document-id="YOUR_DOCUMENT_ID"></velt-inline-comments-section>
  
  <!-- Filter by context -->
  <velt-inline-comments-section context='{"key1": "value1"}' context-options='{"partialMatch": true}'></velt-inline-comments-section>
  ```
  **Comment Tool:**
  ```html
  <!-- Filter by folderId -->
  <velt-comment-tool folder-id="YOUR_FOLDER_ID"></velt-comment-tool>
  
  <!-- Filter by documentId -->
  <velt-comment-tool document-id="YOUR_DOCUMENT_ID"></velt-comment-tool>
  
  <!-- Filter by context -->
  <velt-comment-tool context='{"key1": "value1"}' context-options='{"partialMatch": true}'></velt-comment-tool>
  ```

  **Comment Bubble:**
  ```html
  <!-- Filter by folderId -->
  <velt-comment-bubble folder-id="YOUR_FOLDER_ID"></velt-comment-bubble>
  
  <!-- Filter by documentId -->
  <velt-comment-bubble document-id="YOUR_DOCUMENT_ID"></velt-comment-bubble>
  
  <!-- Filter by context -->
  <velt-comment-bubble context='{"key1": "value1"}' context-options='{"partialMatch": true}'></velt-comment-bubble>
  ```

  **Comment Pin:**
  ```html
  <!-- Filter by folderId -->
  <velt-comment-pin folder-id="YOUR_FOLDER_ID"></velt-comment-pin>
  
  <!-- Filter by documentId -->
  <velt-comment-pin document-id="YOUR_DOCUMENT_ID"></velt-comment-pin>
  
  <!-- Filter by context -->
  <velt-comment-pin context='{"key1": "value1"}' context-options='{"partialMatch": true}'></velt-comment-pin>
  ```
  </Tab>
  </Tabs>


</Update>

<Update label="4.5.0-beta.30" description="June 19 2025">
### Improvements
- [**Notifications**]: Modified `getSettings` in notifications from a one-time call to a subscription and added a new hook for it.

  <Tabs>
  <Tab title="React / Next.js">
  **Using Hook:**
  ```jsx
  const { setSettingsInitialConfig, setSettings, settings } = useNotificationSettings();
  // setSettingsInitialConfig will set the default settings for the notifications.
  // setSettings will update the settings for the notifications in the server.
  // settings will return the current settings for the notifications. Initially it will be null and will be updated when the settings are fetched.
  ```

  **Using API:**
  ```jsx
  const notificationsElement = client.getNotificationElement();
  notificationsElement.getSettings().subscribe((settings) => {
    console.log('current settings are', settings);
  });
  ```

  </Tab>
  
  <Tab title="Other Frameworks">
  **Using API:**
  ```jsx
  const notificationsElement = Velt.getNotificationElement();
  notificationsElement.getSettings().subscribe((settings) => {
    console.log('current settings are', settings);
  });
  ```
  </Tab>
  </Tabs>

- [**Documents**]: Added support for `folderId` in `updateDocuments` method.

  <Tabs>
  <Tab title="React / Next.js">
  ```jsx
  await client.updateDocuments({
    organizationId: 'ORGANIZATION_ID',
    folderId: 'FOLDER_ID',
    documents: [
      {
        documentId: 'DOCUMENT_ID',
      }
    ]
  });
  ```
  </Tab>
  
  <Tab title="Other Frameworks">
  ```jsx
  await Velt.updateDocuments({
    organizationId: 'ORGANIZATION_ID',
    folderId: 'FOLDER_ID',
    documents: [
      {
        documentId: 'DOCUMENT_ID',
      }
    ]
  });
  ```
  </Tab>
  </Tabs>

</Update>

<Update label="4.5.0-beta.29" description="June 18 2025">
### Bug Fixes
- [**UI Customization**]: Fixed an issue where the internal state for User variable was not being cleaned up in Velt If component.
</Update>

<Update label="4.5.0-beta.28" description="June 17 2025">
### Improvements
- [**Comments**]: Added support for multiple text format selection and multiple paragraphs selection in [tiptap-velt-comments](https://www.npmjs.com/package/@veltdev/tiptap-velt-comments).

### Bug Fixes
- [**Comments**]: Reverted back sidebar filter panel default layout to checkbox from dropdown.
</Update>

<Update label="4.5.0-beta.27" description="June 17 2025">
### Improvements
- [**Comments**]: Added default value for sidebar filter search input.
- [**Recorder**]: Updated the video editor apply button behavior. Now it will always be enabled whether or not the user edited the video.
- [**Comments**]: Added ability to add custom filters via `FilterConfig`.
  1. First enable custom actions.
  2. Add custom filters in filter config.
  3. Add [custom filters wireframe](/ui-customization/features/async/comments/comments-sidebar/subcomponents/filter/subcomponents/custom) to the sidebar wireframe.
  4. Add callbacks to update sidebar data when the filters are used.

  <Tabs>
  <Tab title="React / Next.js">
  **1. Enable Custom Actions:**
  ```jsx
  <VeltCommentsSidebar customActions={true} />
  ```
  
  **2. Add custom filters in filter config:**
  ```jsx expandable lines
  const filterConfig = {
    location: {
      name: 'Pages',
      enable: true,
      multiSelection: true,
      enableGrouping: true,
      placeholder: 'Search pages',
    },
    // ... Remaining filters
    deviceType: {  // Custom Filter 1
      name: 'Device Type',
      enable: true,
      multiSelection: true,
      enableGrouping: false,
      placeholder: 'Search device type',
      id: 'deviceType',
      type: 'custom',
      options: [
        {
          id: 'desktop',
          name: 'Desktop',
        },
        {
          id: 'mobile',
          name: 'Mobile',
        },
        {
          id: 'tablet',
          name: 'Tablet',
        },
      ]
    },
    otherCustomFilter: { // Custom Filter 2
      name: 'Other Custom Filter',
      enable: true,
      multiSelection: false,
      enableGrouping: false,
      placeholder: 'Search any field',
      id: 'otherCustomFilter',
      type: 'custom',
      options: [
        {
          id: 'field1',
          name: 'Field 1',
        },
        {
          id: 'field2',
          name: 'Field 2',
        },
        {
          id: 'field3',
          name: 'Field 3',
        },
        {
          id: 'field4',
          name: 'Field 4',
        },
        {
          id: 'field5',
          name: 'Field 5',
        },
      ]
    },
  };

  <VeltCommentsSidebar 
    customActions={true}
    filterConfig={filterConfig}
  />
  ```

  **3. Add [custom filters wireframe](/ui-customization/features/async/comments/comments-sidebar/subcomponents/filter/subcomponents/custom) for each custom filter you added in filter config:**
  ```jsx
  <VeltCommentsSidebarFilterWireframe>
    <VeltCommentsSidebarWireframe.Filter.Custom id='deviceType' />
    <VeltCommentsSidebarWireframe.Filter.Custom id='otherCustomFilter' />
    {/* ... remaining filters */}
  </VeltCommentsSidebarFilterWireframe>
  ```

  **4. Add callbacks to update sidebar data when the filters are used:**
   - The following callbacks will contain the `customFilters` field with the custom filter id and its options indicating which options are selected:
    - `commentSidebarDataUpdate`
    - `commentSidebarDataInit`
    - `veltButtonClick`
  ```jsx
    const commentElement = client.getCommentElement();
    
    // Button click callback
    client.on('veltButtonClick').subscribe(contextData => {
      console.log('veltButtonClick', contextData);
    });

    // Sidebar data callbacks
    commentElement.on('commentSidebarDataUpdate').subscribe((contextData) => {
      console.log('commentSidebarDataUpdate', contextData);
    });

    commentElement.on('commentSidebarDataInit').subscribe((contextData) => {
      console.log('commentSidebarDataInit', contextData);
    });
  ```
  </Tab>
  
  <Tab title="Other Frameworks">
  **1. Enable Custom Actions:**
  ```html
  <velt-comments-sidebar custom-actions="true"></velt-comments-sidebar>
  ```
  
  **2. Add Custom Filters:**
  ```javascript expandable lines
  const filterConfig = {
    location: {
      name: 'Pages',
      enable: true,
      multiSelection: true,
      enableGrouping: true,
      placeholder: 'Search pages',
    },
    // ... other default filters
    deviceType: {  // Custom Filter 1
      name: 'Device Type',
      enable: true,
      multiSelection: true,
      enableGrouping: false,
      placeholder: 'Search device type',
      id: 'deviceType',
      type: 'custom',
      options: [
        {
          id: 'desktop',
          name: 'Desktop',
        },
        {
          id: 'mobile',
          name: 'Mobile',
        },
        {
          id: 'tablet',
          name: 'Tablet',
        },
      ]
    },
    anyField: { // Custom Filter 2
      name: 'Any Field',
      enable: true,
      multiSelection: false,
      enableGrouping: false,
      placeholder: 'Search any field',
      id: 'anyField',
      type: 'custom',
      options: [
        {
          id: 'field1',
          name: 'Field 1',
        },
        {
          id: 'field2',
          name: 'Field 2',
        },
        {
          id: 'field3',
          name: 'Field 3',
        },
        {
          id: 'field4',
          name: 'Field 4',
        },
        {
          id: 'field5',
          name: 'Field 5',
        },
      ]
    },
  };

  const commentsSidebar = document.querySelector(`velt-comments-sidebar`);
  commentsSidebar?.setAttribute("filter-config", JSON.stringify(filterConfig));
  ```

  **3. Add custom filters wireframe to the sidebar wireframe:**
  ```html
  <velt-comments-sidebar-filter-wireframe>
    <velt-comments-sidebar-filter-custom-wireframe id="deviceType"></velt-comments-sidebar-filter-custom-wireframe>
    <velt-comments-sidebar-filter-custom-wireframe id="otherCustomFilter"></velt-comments-sidebar-filter-custom-wireframe>
    <!-- ... remaining filters -->
  </velt-comments-sidebar-filter-wireframe>
  ```

  **4. Add callbacks to update sidebar data when the filters are used:**
  ```javascript
  const commentElement = Velt.getCommentElement();
  
  // Button click callback
  client.on('veltButtonClick').subscribe(contextData => {
    console.log('veltButtonClick', contextData);
  });

  // Sidebar data callbacks
  commentElement.on('commentSidebarDataUpdate').subscribe((contextData) => {
    console.log('commentSidebarDataUpdate', contextData);
  });

  commentElement.on('commentSidebarDataInit').subscribe((contextData) => {
    console.log('commentSidebarDataInit', contextData);
  });
  ```
  </Tab>
  </Tabs>


</Update>

<Update label="4.5.0-beta.26" description="June 13 2025">
### Improvements
- [**Comments**]: Renamed `groupMultipleMatch` config to `groupMatchedComments` config for grouping multiple comment annotations in Comment Bubble component when multiple annotations match the provided `context` or `targetElementId`. The old config is still supported.
  - Default: `false`
  
  <Tabs>
  <Tab title="React / Next.js">
  **Using Props:**
  ```jsx
  <VeltComments groupMatchedComments={true} />
  ```
  **Using API:**
  ```jsx
  const commentElement = client.getCommentElement();
  commentElement.enableGroupMatchedComments();
  commentElement.disableGroupMatchedComments();
  ```
  </Tab>
  
  <Tab title="Other Frameworks">
  **Using Props:**
  ```html
  <velt-comments group-matched-comments="true"></velt-comments>
  ```
  **Using API:**
  ```jsx
  const commentElement = Velt.getCommentElement();
  commentElement.enableGroupMatchedComments();
  commentElement.disableGroupMatchedComments();
  ```

  </Tab>
  </Tabs>

</Update>

<Update label="4.5.0-beta.25" description="June 13 2025">
### New Features
- [**Presence**]: Added wireframes support for `Presence` component.
</Update>

<Update label="4.5.0-beta.24" description="June 13 2025">

### Improvements
- [**Comments**]: Added support for setting custom filter placeholders through `filterConfig`. This is used when `filterOptionLayout` is set to `dropdown`.
  <Tabs>
  <Tab title="React / Next.js">
  ```jsx
  const filterConfig = {
    location: {
      name: 'Pages',
      enable: true,
      placeholder: 'Custom Location'
    },
    document: {
      name: 'Documents',
      enable: true,
      placeholder: 'Custom Document'
    }
  };

  <VeltCommentsSidebar filterConfig={filterConfig} />
  ```
  </Tab>
  <Tab title="Other Frameworks">
  ```js
  const filterConfig = {
    location: {
      name: 'Pages',
      enable: true,
      placeholder: 'Custom Location'
    },
    document: {
      name: 'Documents',
      enable: true,
      placeholder: 'Custom Document'
    }
  };
  const commentsSidebar = document.querySelector(`velt-comments-sidebar`);
  commentsSidebar?.setAttribute("filter-config", JSON.stringify(filterConfig));
  ```
  </Tab>
  </Tabs>

- [**Comments**]: Added a `filteredCommentAnnotationsCount` template variable for visible comments in sidebar when a filter is applied.

### Bug Fixes
- [**Comments**]: Fixed an issue where the assign input was not closing when clicked outside in the sidebar.
- [**Comments**]: Fixed an issue where the reaction panel tool was getting hidden when hovered out.
- [**Comments**]: Fixed an issue where users set through `updateContactList` were not visible in tagged and assigned filters.

</Update>


<Update label="4.5.0-beta.23" description="June 12 2025">

### New Features
- [**Comments**]: Added support for grouping multiple comment annotations in Comment Bubble component when multiple annotations match the provided `context` or `targetElementId`
  - Default: `false`
  
  <Tabs>
  <Tab title="React / Next.js">
  **Using Props:**
  ```jsx
  <VeltComments groupMultipleMatch={true} />
  ```
  **Using API:**
  ```jsx
  const commentElement = client.getCommentElement();
  commentElement.enableGroupMultipleMatch();
  commentElement.disableGroupMultipleMatch();
  ```
  </Tab>
  
  <Tab title="Other Frameworks">
  **Using Props:**
  ```html
  <velt-comments group-multiple-match="true"></velt-comments>
  ```
  **Using API:**
  ```jsx
  const commentElement = Velt.getCommentElement();
  commentElement.enableGroupMultipleMatch();
  commentElement.disableGroupMultipleMatch();
  ```

  </Tab>
  </Tabs>

</Update>

<Update label="4.5.0-beta.22" description="June 12 2025">
### Bug Fixes
- [**Comments**]: Fixed an issue that happened on sidebar where the recording service got into a bad state when the user cancelled the recording.
</Update>


<Update label="4.5.0-beta.21" description="June 11 2025">
### Improvements
- [**Comments**]: Added support for `filterCommentsOnDom` when custom sidebar filters are configured.
- [**Comments**]: Added additional testIds in following components:
  - Message input (element with class `velt-composer-input--message`)
  - Container for author (element with class `velt-thread-card--author`)
  - Confirmation dialog (element with class `velt-confirm-dialog`)
  - Velt buttons (elements with class `velt-button`)
- [**Comments**]: Removed quotes from the display message when `notificationSource` is `custom`.
</Update>

<Update label="4.5.0-beta.20" description="June 10 2025">
### Improvements
- [**Core**]: Added `unsetLocationsIds` method to unset locations by passing location IDs as parameters
  
  ```jsx
  client.unsetLocationsIds(['location1', 'location2', 'location3'])
  ```
</Update>

<Update label="4.5.0-beta.19" description="June 9 2025">
### Improvements
- [**Core**]: Improved SDK initialization layer and added new core methods to improve developer experience:
  - Added `rootDocumentId` param in `setDocuments` method to specify which document should act as root. By default 1st document will be set as root document unless `rootDocumentId` is specified.
  
  ```jsx
  client.setDocuments([{id:'doc1'},{id:'doc2'}], {rootDocumentId:'doc2'})
  ```

  - Added `setRootDocument` method to set a different document as root. If user has passed multiple documents and wants to switch the root document:
  
  ```jsx
  client.setRootDocument({id:'doc2'})
  // There won't be any change in the other documents internally. They will remain as is.
  ```

  - Added `setLocations` method to add multiple locations:
  
  ```jsx
  client.setLocations([
    {id:'location1', locationName:'location1'},
    {id:'location2', locationName:'location2'}
  ], {rootLocationId: 'location2'})
  // By default 1st location will be set as root location unless rootLocationId is specified.
  
  // If User wants to append new locations then 'appendLocation' flag needs to be passed.
  client.setLocations([
    {id:'location3', locationName:'location3'},
    {id:'location4', locationName:'location4'}
  ], {appendLocation: true})
  ```

  - Added `setRootLocation` method to set a different location as root:
  
  ```jsx
  client.setRootLocation({id:'location3', locationName:'location3'})
  // There won't be any change in the other locations internally. They will remain as is.
  ```

  - Added `removeLocations` method to remove multiple locations:
  
  ```jsx
  client.removeLocations(
    {id:'location3', locationName:'location3'},
    {id:'location4', locationName:'location4'}
  )
  ```

  - Most init methods now return promises:
    - `await setDocuments`
    - `await setDocument`
    - `await setDocumentId`
    - `await setRootDocument`
    - `await setLocation`
    - `await setLocations`
    - `await setRootLocation`

  - Added a listener event on `ON` method to subscribe to init changes:
  
  ```jsx
  Velt.on('initUpdate').subscribe((e) => console.log('New init event', e))
  ```

  - Most Analytics events now trigger a common naming pattern:
    - `setDocumentsTriggered`
    - `setRootDocumentTriggered`
    - `unsetDocumentsTriggered`
    - `setLocationsTriggered`
    - `setRootLocationTriggered`
    - `removeLocationsTriggered`
    - `setDocumentsSuccess`
    - `unsetDocumentsSuccess`
    - `setLocationsSuccess`
    - `removeLocationsSuccess`


</Update>

<Update label="4.5.0-beta.18" description="June 9 2025">
### New Features
- [**Self-hosting**]: Added support to disable getting user resolver requests for organization, document and folder users. Helps optimize performance by avoiding unnecessary user data requests
  - Sometimes you may have a lot of users within your organization, document or folder. In such cases, you may want to disable user resolver requests for organization, document and folder users and instead use [custom autocomplete feature](/async-collaboration/comments/customize-behavior#customautocompletesearch).
  - Learn more about [user data provider](/self-host-data/users)

<Tabs>
<Tab title="React / Next.js">
``` jsx {19-29} expandable lines
const formatUsersToRecord = (users) => {
    // Format users array into a Record object with userId as key and user data as value
    return users.reduce((record, user) => {
        record[user.userId] = {
            userId: user.userId,
            name: user.name,
            // any other fields
        };
        return record;
    }, {});
};

const fetchUsersFromDB = async (userIds) => {
    // Fetch users from your DB
    const usersData = await __getUsersFromYourDB__(userIds);
    return formatUsersToRecord(usersData);
};

const userDataProvider: UserDataProvider = {
    get: fetchUsersFromDB,
    config: {
        resolveUsersConfig: {
            organization: false, // Disable organization user requests
            folder: false, // Disable folder user requests
            document: true // Enable document user requests
        }
    }
};

<VeltProvider 
    apiKey='YOUR_API_KEY'
    dataProviders={{
        user: userDataProvider
    }}
>
</VeltProvider>

```
</Tab>
<Tab title="Other Frameworks">
``` js {19-28} expandable lines
const formatUsersToRecord = (users) => {
    // Format users array into a Record object with userId as key and user data as value
    return users.reduce((record, user) => {
        record[user.userId] = {
            userId: user.userId,
            name: user.name,
            // any other fields
        };
        return record;
    }, {});
};

const fetchUsersFromDB = async (userIds) => {
    // Fetch users from your DB
    const usersData = await __getUsersFromYourDB__(userIds);
    return formatUsersToRecord(usersData);
};

const userDataProvider = {
    get: fetchUsersFromDB,
    config: {
        resolveUsersConfig: {
            organization: false, // Disable organization user requests
            folder: false, // Disable folder user requests
            document: true // Enable document user requests
        }
    }
};

Velt.setDataProviders({
    user: userDataProvider
});
```
</Tab>
</Tabs>

</Update>

<Update label="4.5.0-beta.17" description="June 9 2025">
### New Features
- [**Comments**]: Added custom metadata support for comment tool and comment bubble components.
  - Works only with `popover` mode comments. Perfect for complex tables with filtering and segmentation needs.
  - Set flexible comment anchoring and filtering logic at the cell level using key-value pairs.
  - **Supports aggregate views:** Eg: comments added in day view can appear in week/month views automatically.
  - **Two new props:**
    - `context`: key-value object for metadata
    - `contextOptions`: matching behavior (default: full match, or set `partialMatch: true` for flexible matching)
  - **How Partial Match Works:**
    - A comment will match if ALL provided filter criteria exist in the comment's context
    - Extra fields in the comment's context don't prevent matching
    - Missing fields in the comment's context prevent matching
    - Example: Comment has `{ day: "01", week: "01", month: "jan", product: "cheese", location: "zurich" }`
      - Filter `{ day: "01", product: "cheese" }` → ✅ matches (both fields exist in comment)
      - Filter `{ day: "01", category: "dairy" }` → ❌ no match (category doesn't exist in comment)
  - **Partial Match Examples:**
    - Comment has `{ day: "01", week: "01", month: "jan", product: "cheese" }`
    - Filter with `{ day: "01", week: "01", month: "jan", product: "cheese" }` → matches (full)
    - Filter with `{ week: "01", month: "jan", product: "cheese" }` → matches (partial)
    - Filter with `{ day: "01", week: "01", month: "jan", product: "cheese", location: "zurich" }` → no match
    <Tabs>
      <Tab title="React / Next.js">
      ```jsx
      <VeltCommentTool context={{ 'key1': 'value1', 'key2': 'value2' }} />
      // Full match
      <VeltCommentBubble context={{ 'key1': 'value1', 'key2': 'value2' }} />
      // Partial match
      <VeltCommentBubble context={{ 'key1': 'value1' }} contextOptions={{ partialMatch: true }} />
      ```
      </Tab>
      <Tab title="Other Frameworks">
      ```html
      <velt-comment-tool context='{"key1": "value1", "key2": "value2"}'></velt-comment-tool>

      <!-- Full match -->
      <velt-comment-bubble context='{"key1": "value1", "key2": "value2"}'></velt-comment-bubble>
      <!-- Partial match -->
      <velt-comment-bubble context='{"key1": "value1"}' context-options='{"partialMatch": true}'></velt-comment-bubble>
      ```
      </Tab>
    </Tabs>

</Update>


<Update label="4.5.0-beta.16" description="June 5 2025">
### Bug Fixes
- [**Recorder**]: Fixed an issue where sometimes the recorder service would not update the saved file url after the processing was completed due to a race condition.
</Update>


<Update label="4.5.0-beta.15" description="June 5 2025">

### New Features
- [**Comments**]: Added ability to filter out comments in the DOM when they are filtered in the sidebar.
  - When the sidebar is closed (default mode) or unmounted (embed mode), the DOM filter will be removed.
  - Default: `false`
    <Tabs>
      <Tab title="React / Next.js">
      **Using Props:**
      ```jsx
      <VeltComments filterCommentsOnDom={true} />
      ```
      **Using API:**
      ```javascript
      const commentElement = client.getCommentElement();
      commentElement.enableFilterCommentsOnDom();
      commentElement.disableFilterCommentsOnDom();
      ```
      </Tab>
      <Tab title="Other Frameworks">
      **Using Props:**
      ```html
      <velt-comments filter-comments-on-dom="true"></velt-comments>
      ```
      **Using API:**
      ```js
      const commentElement = Velt.getCommentElement();
      commentElement.enableFilterCommentsOnDom();
      commentElement.disableFilterCommentsOnDom();
      ```
      </Tab>
    </Tabs>

</Update>

<Update label="4.5.0-beta.14" description="June 4 2025">

### New Features
- [**Notifications**]: Added notification settings feature to allow users to configure their notification preferences.
  - Enable this feature in the [Velt Console](https://console.velt.dev/dashboard/config/notification).
  - Then enable settings on the notifications tool or panel in the UI. [Learn more](/async-collaboration/notifications/customize-behavior#enablesettings)
    <Tabs>
      <Tab title="React / Next.js">
      ```jsx
      // You can enable this on either the tool or the panel
      <VeltNotificationsTool settings={true} />
      <VeltNotificationsPanel settings={true} />
      ```
      </Tab>
      <Tab title="Other Frameworks">
      ```html
      <!-- You can enable this on either the tool or the panel -->
      <velt-notifications-tool settings="true"></velt-notifications-tool>
      <velt-notifications-panel settings="true"></velt-notifications-panel>
      ```
      </Tab>
    </Tabs>
  - Configure default settings with `setSettingsInitialConfig()` API and extend it to add more channels where you intend to send notifications to your users. [Learn more](/async-collaboration/notifications/customize-behavior#setsettingsinitialconfig)
  - Update settings programmatically with `setSettings()` API. [Learn more](/async-collaboration/notifications/customize-behavior#setsettings)
  - Get current settings with `getSettings()` API. [Learn more](/async-collaboration/notifications/customize-behavior#getsettings)
  - Subscribe to settings updates with `settingsUpdated` event. [Learn more](/async-collaboration/notifications/customize-behavior#on)
  - Added wireframe components for notifications panel settings UI. [Learn more](/ui-customization/features/async/notifications/notifications-panel#settings)
  - Added Backend APIs to set and get notifications settings. [Learn more](/api-reference/rest-apis/v2/notifications/set-config)

### Improvements
- [**DevTools**]: Exposed more events and improved the event stream ordering. The latest version is `1.1.6`
- [**Recorder**]: Added `transcription` field to `RecorderDataAsset`.
  ```typescript
  class RecorderDataAsset {
    // ...
    transcription: RecorderDataTranscription;
    // ...
  }
  ```

### Bug Fixes
- [**Recorder**]: Fixed an issue where the mini player wouldn't play or pause the video on click.
- [**Recorder**]: Fixed an issue where the mini player was not playing the latest edited version of the video.
- [**Recorder**]: Fixed the alignment of the play button in the mini player.
- [**Recorder**]: Fixed the responsive behavior of the expanded player.
- [**Comments**]: Fixed an issue in composer wireframe where clicking on attachments, recordings, avatar components inside the composer was closing the composer.

</Update>

<Update label="4.5.0-beta.13" description="May 30 2025">

### Bug Fixes
- [**Comments**]: Reopen the resolved thread if someone replies.
</Update>

<Update label="4.5.0-beta.12" description="May 29 2025">
### New Features
- [**Recorder**]: Added a feature to download the latest version of a recording.
    - It's available in the UI by default. Wireframe added.
    - Added an API method to trigger download programmatically:
      <Tabs>
        <Tab title="React / Next.js">
        ```js
        const recorderElement = client.getRecorderElement();
        await recorderElement.downloadLatestVideo('RECORDER_ID');
        ```
        </Tab>
        <Tab title="Other Frameworks">
        ```js
        const recorderElement = Velt.getRecorderElement();
        await recorderElement.downloadLatestVideo('RECORDER_ID');
        ```
        </Tab>
      </Tabs>

### Improvements
- [**Recorder**]: Changed the background of removed video segments to a diagonal stripe pattern to clearly indicate removal (instead of waveform/thumbnails).
- [**Recorder**]: Added a center focal point to the zoom selection rectangle for better UX.
- [**Recorder**]: Added Edit button Wireframe in the recorder player.

### Bug Fixes
- [**Recorder**]: Implemented several UX fixes for the video editor:
    - Maintained correct aspect ratio for the zoom selection rectangle during resizing.
    - Ensured the zoom selection rectangle maintains its original position while resizing with aspect ratio locked.
    - Ensured video preview displays correct content at responsive widths.
    - Prevented the zoom selection rectangle from moving outside the video content area.
    - Corrected corner dragging behavior to ensure the zoom selection stays within boundaries.
    - Fixed an issue where a small zoom selection at the boundary would go out of bounds when decreasing scale.
    - Updated `recorderTime.duration` logic to store precise millisecond values.
    - Resolved an issue where dragging the trim/scale handler during video playback affected both operations simultaneously.
    - Reduced the drag threshold for improved responsiveness of drag operations.
- [**Recorder**]: Fixed an issue where playback on the mini video player would not stop when the video player was expanded.

</Update>

<Update label="4.5.0-beta.11" description="May 29 2025">
### Bug Fixes
- [**Comments**]: Fixed an issue where folderId was getting unset when switching between documents too quickly.
</Update>

<Update label="4.5.0-beta.10" description="May 29 2025">
### Improvements
- [**Comments**]: Render default comment sidebar only when it is opened. Note this is not applicable for sidebar in embed mode.
- [**Comments**]: Added a dynamic class for unread comment annotation in comment pin component: `velt-comment-pin-unread-comment`.
</Update>

<Update label="4.5.0-beta.9" description="May 28 2025">

### New Features

- [**Presence**]: Added event to track changes in user's presence state: `online`, `offline`, `away`.

<Tabs>
<Tab title="React / Next.js">
  **Using Hook:**
    ```jsx
    const userStateChangeEventData = usePresenceEventCallback('userStateChange');

    useEffect(() => {
        if (userStateChangeEventData) {
            console.log('userStateChange: ', userStateChangeEventData);
        }
    }, [userStateChangeEventData]);
    ```
    **Using API:**
    ```ts
    const presenceElement = client.getPresenceElement();
    presenceElement.on("userStateChange").subscribe((data: PresenceUserStateChangeEvent) => {
        console.log("userStateChange", data);
    });
    ```
    ```ts
    export interface PresenceUserStateChangeEvent {
        user: PresenceUser; // Object containing user details
        state: string;      // New state of the user, e.g., 'online', 'away', 'offline'
    };
    ```
</Tab>
<Tab title="Other Frameworks">
    ```ts
    const presenceElement = Velt.getPresenceElement();
    presenceElement.on("userStateChange").subscribe((data: PresenceUserStateChangeEvent) => {
        console.log("userStateChange", data);
    });
    ```
</Tab>
</Tabs>
- [**Presence**]: Added api and hook to fetch presence data with query filters.

<Tabs>
  <Tab title="React / Next.js">
      **Using Hook:**
      ```jsx
      // Fetch online users
      const onlineUsersPresenceData = usePresenceData({ statuses: ['online'] });
      useEffect(() => {
          if (onlineUsersPresenceData && onlineUsersPresenceData.data) {
              console.log('Presence data (online users): ', onlineUsersPresenceData.data);
          }
      }, [onlineUsersPresenceData]);

      // Fetch all users (no query)
      const allUsersPresenceData = usePresenceData();
      useEffect(() => {
          if (allUsersPresenceData && allUsersPresenceData.data) {
              console.log('Presence data (all users): ', allUsersPresenceData.data);
          }
      }, [allUsersPresenceData]);
      ```
      **Using API:**
      ```ts
      const presenceElement = client.getPresenceElement();
      // Fetch online users
      presenceElement.getData({ statuses: ['online'] }).subscribe((response: GetPresenceDataResponse) => {
          console.log("Presence data (online users): ", response.data);
      });

      // Fetch all users (no query)
      presenceElement.getData().subscribe((response: GetPresenceDataResponse) => {
          console.log("Presence data (all users): ", response.data);
      });
      ```
      ```ts
      PresenceRequestQuery {
          documentId?: string;
          organizationId?: string;
          statuses?: string[]; // Filter by statuses, e.g., ['online', 'away', 'offline']
      }

      GetPresenceDataResponse {
          data: PresenceUser[] | null; // Array of PresenceUser objects or null
      }
      ```
  </Tab>
  <Tab title="Other Frameworks">
      ```ts
      const presenceElement = Velt.getPresenceElement();
      // Fetch online users
      presenceElement.getData({ statuses: ['online'] }).subscribe((response: GetPresenceDataResponse) => {
          console.log("Presence data (online users): ", response.data);
      });

      // Fetch all users (no query)
      presenceElement.getData().subscribe((response: GetPresenceDataResponse) => {
          console.log("Presence data (all users): ", response.data);
      });
      ```
      ```ts
      PresenceRequestQuery {
          documentId?: string;
          organizationId?: string;
          statuses?: string[]; // Filter by statuses, e.g., ['online', 'away', 'offline']
      }

      GetPresenceDataResponse {
          data: PresenceUser[] | null; // Array of PresenceUser objects or null
      }
      ```
  </Tab>
</Tabs>

- [**Workspace**]: Added API to add and delete domains to the allowed domains list. [Learn more](/api-reference/rest-apis/v2/workspace/add-domain)

</Update>

<Update label="4.5.0-beta.8" description="May 27 2025">
### New Features
- [**Comments**]: Added a new `Document Filter Dropdown` component to the Comment Sidebar. This feature allows users to filter comments based on documents.
    - By default, this filter is disabled. You need to enable it in filter config.
    - This works when you are using multiple documents or folders.

<Tabs>
  <Tab title="React / Next.js">
      ```jsx
        const filterConfig = {
          document: {
            enable: true,
            name: "Documents", // Optional: Customize the display name of the filter
            enableGrouping: true, // Optional: Enable grouping of documents
            multiSelection: true, // Optional: Allow multiple documents to be selected
          }
        };

        <VeltCommentsSidebar filterConfig={filterConfig} />
      ```
  </Tab>
  <Tab title="Other Frameworks">
    ```js
    const filterConfig = {
      document: {
        enable: true,
        name: "Documents", // Optional: Customize the display name of the filter
        enableGrouping: true, // Optional: Enable grouping of documents
        multiSelection: true, // Optional: Allow multiple documents to be selected
      }
    };
    const commentsSidebar = document.querySelector(`velt-comments-sidebar`);
    commentsSidebar?.setAttribute("filter-config", JSON.stringify(filterConfig));
    ```
  </Tab>
</Tabs>


</Update>

<Update label="4.5.0-beta.7" description="May 23 2025">
### Improvements
- [**Comments**]: Added support to add `context` in `Velt Comment Tool` component as well. Previously, context for comments could only be added via event callbacks or APIs. With this update, you can now predefine context directly within the `Velt Comment Tool` component itself. Currently, this feature is specific to popover comments, allowing you to, for example, assign unique context to each cell in a table.

<Tabs>
<Tab title="React / Next.js">
  ```jsx
  <VeltCommentTool targetElementId="elementId" context={{ key1: 'value1' }} />
  ```
  </Tab>
  <Tab title="HTML">
  ```html
  <velt-comment-tool target-element-id="elementId" context='{"key1": "value1"}'></velt-comment-tool>
  ```
  </Tab>
</Tabs>

- [**Recorder**]: Enhanced error handling for the recorder by introducing a new `RecordingErrorEvent` event. It will be triggered when the following errors occur:
  - `transcriptionFailed`: When transcription fails.
  - `editFailed`: When a video edit operation fails.
  - `recordingFailed`: When a recording fails.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Hook
const recorderErrorEvent = useRecorderEventCallback('error');
useEffect(() => {
  if (recorderErrorEvent) {
      if (recorderErrorEvent.type === 'transcriptionFailed') {
          console.error('Transcription failed:', recorderErrorEvent);
      } else if (recorderErrorEvent.type === 'editFailed') {
          console.error('Edit failed:', recorderErrorEvent);
      } else if (recorderErrorEvent.type === 'recordingFailed') {
          console.error('Recording failed:', recorderErrorEvent);
      }
  }
}, [recorderErrorEvent]);

// API Method
const recorderElement = client.getRecorderElement();
recorderElement.on('error').subscribe((event) => {
    if (event.type === 'transcriptionFailed') {
        console.error('Transcription failed:', event);
    } else if (event.type === 'editFailed') {
        console.error('Edit failed:', event);
    } else if (event.type === 'recordingFailed') {
        console.error('Recording failed:', event);
    }
});

```
</Tab>

<Tab title="Other Frameworks">
```js
const recorderElement = Velt.getRecorderElement();
recorderElement.on('error').subscribe((event) => {
    if (event.type === 'transcriptionFailed') {
        console.error('Transcription failed:', event);
    } else if (event.type === 'editFailed') {
        console.error('Edit failed:', event);
    } else if (event.type === 'recordingFailed') {
        console.error('Recording failed:', event);
    }
});
```
</Tab>
</Tabs>

  - [**Recorder**]: Added `RecordingSaveInitiatedEvent` event. This event is dispatched before the actual save operation begins for original or edited recording.

  <Tabs>
  <Tab title="React / Next.js">
  ```jsx
  // Using the hook
  const recordingSaveInitiatedEvent = useRecorderEventCallback('recordingSaveInitiated');

  useEffect(() => {
    if (recordingSaveInitiatedEvent) {
      if (recordingSaveInitiatedEvent.type === 'edit') {
        console.log('Edited recording save initiated);
      } else {
        console.log('New recording save initiated.');
      }
    }
  }, [recordingSaveInitiatedEvent]);

  // Using the API method
  const recorderElement = client.getRecorderElement(); 

  recorderElement.on('recordingSaveInitiated').subscribe((event) => {
    if (event.type === 'edit') {
      console.log('Edited recording save initiated');
    } else {
      console.log('New recording save initiated');
    }
  });
  ```
  </Tab>
  <Tab title="Other Frameworks">
  ```js
  const recorderElement = Velt.getRecorderElement();

  recorderElement.on('recordingSaveInitiated').subscribe((event) => {
    if (event.type === 'edit') {
      console.log('Edited recording save initiated');
    } else {
      console.log('New recording save initiated.');
    }
  });
  ```
  </Tab>
  </Tabs>

- [**Recorder**]: Changed background color for video in the editor to gray when the editor is resized to a smaller size.
- [**Recorder**]: Video playback now stops upon reaching the end and the player state is reset.
- [**Recorder**]: Improved type for the legacy `onRecordedData` callback.

</Update>


<Update label="4.5.0-beta.6" description="May 22 2025">
### Bug Fixes
- [**Single Editor Mode**]: Fixed an issue where the editor sometimes lost edit access when opening the document in another tab when additional users were also present in the document.
</Update>

<Update label="4.5.0-beta.5" description="May 22 2025">
### Improvements
- [**Recorder**]: Added wireframes for Timeline and Zoom feature.

</Update>

<Update label="4.5.0-beta.4" description="May 22 2025">
### Features
- [**SDK**]: Added `apiProxyDomain` support, allowing Velt API calls to be proxied through your own domain. [Learn more](/security/proxy-server#proxying-velt-api-calls).
<Tabs>
  <Tab title="React / Next.js">
  ```jsx
  <VeltProvider
    config={{
        apiProxyDomain: 'https://api.yourdomain.com'
    }}
  ></VeltProvider>
  ```
  </Tab>
  <Tab title="Other Frameworks">
 ```jsx
  const client = await initVelt('YOUR_API_KEY', {
    apiProxyDomain: 'https://api.yourdomain.com'
  });
  ```
  </Tab>
</Tabs>

### Bug Fixes
- [**Comments**]: Fixed an issue where Thread Card Dropdown Options: Delete Thread and Delete Comment button wireframes text was not updated correctly.

</Update>

<Update label="4.5.0-beta.3" description="May 21 2025">

### Improvements
- [**Recorder**]: Improved the post processing speed for zoom in effect by 90%.
- [**Recorder**]: Added configuration API to specify [recording quality constraints](/async-collaboration/recorder/customize-behavior#setrecordingqualityconstraints) and [encoding options](/async-collaboration/recorder/customize-behavior#setrecordingencodingoptions). This provides finer control over the video and audio output of recordings.

  <Tabs>
  <Tab title="React / Next.js">
  ```jsx
  const recorderElement = useRecorderUtils();

  recorderElement.setRecordingQualityConstraints({
      'other': {
          'video': {
              width: { exact: 3024  },
              height: { exact: 1542 },
              frameRate: { exact: 20 },
          }
      }
  });

  recorderElement.setRecordingEncodingOptions({
      'other': {
          videoBitsPerSecond: 2000000,
          audioBitsPerSecond: 128000
      }
  });
  ```
  </Tab>
  <Tab title="Other Frameworks">
  ```js
  const recorderElement = Velt.getRecorderElement();

  recorderElement.setRecordingQualityConstraints({
      'other': {
          'video': {
              width: { exact: 3024  },
              height: { exact: 1542 },
              frameRate: { exact: 20 },
          }
      }
  });

  recorderElement.setRecordingEncodingOptions({
      'other': {
          videoBitsPerSecond: 2000000,
          audioBitsPerSecond: 128000
      }
  });
  ```
  </Tab>
  </Tabs>

### Bug Fixes
- [**Recorder**]: Removed loading animation in the apply button which was causing performance issues.
- [**Recorder**]: Fixed the issue where disabled buttons were still clickable.


</Update>

<Update label="4.5.0-beta.2" description="May 21 2025">
### Improvements
- [**Presence**]: Added ability to configure when user is considered offline after being inactive. Default value: `600000`ms (10 minutes).

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltPresence offlineInactivityTime={600000} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-presence offline-inactivity-time="600000"></velt-presence>
```
</Tab>
</Tabs>

- [**Presence**]: Added `isUserIdle` and `isTabAway` fields in presence user objects.
  - When a user navigates away from the current tab, their status will be marked as `away`, and the `isTabAway` field in their presence object will be set to `true`.
  - If a user remains inactive (no mouse movement) for a duration defined by `inactivityTime` (default: 5 minutes), their status will be set to `away`, and the `isUserIdle` field in their presence object will be set to `true`.



- [**Single Editor Mode**]: Added new events for Single Editor Mode, enabling finer-grained tracking of collaborative states and user interactions.
  The new events are:
  - `accessRequested`: When a user requests editor access.
  - `accessRequestCanceled`: When a user cancels their request for editor access.
  - `accessAccepted`: When a user's request for editor access is accepted.
  - `accessRejected`: When a user's request for editor access is rejected.
  - `editorAssigned`: When a user is assigned as the editor.
  - `viewerAssigned`: When a user is assigned as a viewer.
  - `editorOnDifferentTabDetected`: When the current editor navigates away to a different browser tab or window.

  <Tabs>
  <Tab title="React / Next.js">

  **Using Hooks:**
  ```jsx
  // Replace "EVENT_TYPE" with an actual event string. eg: "accessRequested".
  const eventData = useLiveStateSyncEventCallback("EVENT_TYPE"); 

  useEffect(() => {
    if (eventData) { 
      console.log("EVENT_TYPE data: ", eventData);
    }
  }, [eventData]);
  ```

  **Using API:**
  ```jsx
  const liveStateSyncElement = useLiveStateSyncUtils();
  // Replace "EVENT_TYPE" with an actual event string. eg: "accessRequested".
  liveStateSyncElement.on("EVENT_TYPE").subscribe((eventData) => {
    console.log("EVENT_TYPE data: ", eventData);
  });
  ```
  </Tab>

  <Tab title="Other Frameworks">
  ```javascript
  const liveStateSyncElement = Velt.getLiveStateSyncElement();
  // Replace "EVENT_TYPE" with an actual event string. eg: "accessRequested".
  liveStateSyncElement.on("EVENT_TYPE").subscribe((eventData) => {
    console.log("EVENT_TYPE data: ", eventData);
  });
  ```
  </Tab>
  </Tabs>

- [**Comments**]: The `updateContext` method is now supported even when multiple documents are initialized.




</Update>

<Update label="4.5.0-beta.1" description="May 20 2025">
### New Features
- [**Recorder**]: Added zooming functionality. Users can now add smooth zoom in and out effects on the video scenes. Note: This is in beta and currently the processing time for zoom in effect is quite high. We are working to optimize it.

### Improvements
- [**Recorder**]: Improved wireframes for video editor elements with mouse events to remove all styles if children are provided in the wireframe. Earlier for these elements, some residual styles were required to be overridden via CSS.
- [**Recorder**]: Added the `recordingEditDone` event. This event fires the recording edits are done processing and the new recording file is generated.
  <Tabs>
  <Tab title="React / Next.js">
  ```jsx
  const recordingEditDoneEvent = useRecorderEventCallback('recordingEditDone');
  useEffect(() => {
      if (recordingEditDoneEvent) {
          console.log('recordingEditDone: ', recordingEditDoneEvent);
      }
  }, [recordingEditDoneEvent]);

  ```
  </Tab>
  <Tab title="Other Frameworks">
  ```javascript
  const recorderelement = Velt.getRecorderElement();
  recorderelement.on('recordingEditDone').subscribe((event) => {
      console.log('recording edit done:' , event);
  });

  ```
  </Tab>
  </Tabs>

- [**Recorder**]: Added the `deleteRecordings` API method to delete recordings.
<Tabs>
<Tab title="React / Next.js">
**Using API:**
```ts
const recorderelement = client.getRecorderElement();
await recorderelement.deleteRecordings({
    recorderIds: ['RECORDER_ID_1']
});

```
</Tab>
<Tab title="Other Frameworks">
```js
const recorderelement = Velt.getRecorderElement();
await recorderelement.deleteRecordings({
    recorderIds: ['RECORDER_ID_1']
});
```
</Tab>
</Tabs>

</Update>


<Update label="4.4.0" description="May 16 2025">
### Bug Fixes
- [**Core**]: Release 4.4.0 stable version.
</Update>

<Update label="4.4.0-beta.17" description="May 16 2025">
### Bug Fixes
- [**Comments**]: Fixed an issue where the `velt-comment-sidebar-filter-item--Added` class was not being applied correctly in the people filter.
- [**Notifications**]: Fixed an issue where `setNotificationAsRead` was not working as expected in some scenarios.

</Update>

<Update label="4.4.0-beta.16" description="May 15 2025">
### Bug Fixes
- [**Live State Sync**]: Fixed an issue where `serverConnectionState` value was not updating correctly in some scenarios.

</Update>

<Update label="4.4.0-beta.15" description="May 14 2025">
### Improvements
- [**Comments**]: Added support to specify whether the system filters (e.g., "me", "this page") should be combined with an "and" or "or" operator. Default is `and`.

<Tabs>
<Tab title="React / Next.js">
**Using Props:**
```tsx
<VeltCommentsSidebar systemFiltersOperator='or' />
```

**Using API:**
```ts
const commentElement = client.getCommentElement();
commentElement.setSystemFiltersOperator('or');
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments-sidebar system-filters-operator="or"></velt-comments-sidebar>
```
</Tab>
</Tabs>

- [**Comments**]: Improved filters for comments author in the sidebar.


</Update>


<Update label="4.4.0-beta.14" description="May 13 2025">
### Bug Fixes
- [**SDK**]: Fixed an issue where delete notification REST API was causing some older notifications to be hidden in the frontend component.

</Update>

<Update label="4.4.0-beta.13" description="May 13 2025">
### Improvements
- [**REST APIs**]: Added support for persisting read notifications in "For You" tab through `Update Notifications` REST API. You can pass `persistReadForUsers` param as true.

### Bug Fixes
- [**SDK**]: Fixed an issue where the `setAllNotificationsAsRead` SDK API method was not working as expected.

</Update>

<Update label="4.4.0-beta.12" description="May 10 2025">
### Improvements
- [**REST APIs**]: Added realtime updates to SDK when notifications are deleted via the REST APIs.
- [**REST APIs**]: Added support for marking notifications as read through `Update Notifications` REST API.


### Bug Fixes
- [**Single Editor Mode**]: Fixed accept reject buttons disappearing issue when multiple users request access in single editor mode.

</Update>

<Update label="4.4.0-beta.11" description="May 08 2025">
### Improvements
- [**Live State Sync**]: Improved types in `getLiveStateData`, `setLiveStateData` methods and hooks.
- [**Comments Sidebar**]: Ensured that "me" and "this page" options are on the top of the comments sidebar filters.
- [**Notifications**]: Added missing `panelOpenMode` prop to `VeltNotificationsPanel` in React.
  ```tsx
  <VeltNotificationsPanel panelOpenMode='sidebar'/>
  ```


### Bug Fixes
- [**Comments**]: Fixed an edge case where Tiptap comments were not being added when `commentToNearestAllowedElement` is enabled and comment mode is on.

</Update>

<Update label="4.4.0-beta.10" description="May 02 2025">
### New Features
- [**Comments**]: Added ability to attach comment pins to the closest allowed element when clicking on a non-allowed element. Default: `false`

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltComments commentToNearestAllowedElement={true} />
```

**Using API:**
```jsx
const commentElement = client.getCommentElement();
commentElement.enableCommentToNearestAllowedElement();
commentElement.disableCommentToNearestAllowedElement();
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments comment-to-nearest-allowed-element="true"></velt-comments>
```

**Using API:**
```js
const commentElement = Velt.getCommentElement();
commentElement.enableCommentToNearestAllowedElement();
commentElement.disableCommentToNearestAllowedElement();
```
</Tab>
</Tabs>

- [**Comments**]: Added ability to enable/disable draft mode in comments. Default: `true`

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltComments draftMode={false} />
```

**Using API:**
```jsx
const commentElement = client.getCommentElement();
commentElement.enableDraftMode();
commentElement.disableDraftMode();
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments draft-mode="false"></velt-comments>
```

**Using API:**
```js
const commentElement = Velt.getCommentElement();
commentElement.enableDraftMode();
commentElement.disableDraftMode();
```
</Tab>
</Tabs>

- [**Presence**]: Added ability to turn off shadow DOM in Presence component. Default: `true`

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltPresence shadowDom={false} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-presence shadow-dom="false"></velt-presence>
```
</Tab>
</Tabs>

### Improvements
- [**Webhooks**]: Added `assigned: true` in comment added event when someone is assigned to the comment during creation.
- [**Live State Sync**]: Enhanced Redux middleware with support to dynamically update configuration options:
  - `allowedActionTypes`
  - `disabledActionTypes` 
  - `allowAction`

</Update>


<Update label="4.4.0-beta.9" description="Apr 30 2025">
### Bug Fixes
- [**Core**]: Added additional compatibility for Safari v16 and older versions.
</Update>

<Update label="4.4.0-beta.8" description="Apr 29 2025">
### Improvements
- [**Recorder**]: Added ability to control whether recorded videos play in full-screen mode.
  - You can use this prop on any of the following components:
    - `Velt Recorder Notes`
    - `Velt Recorder Control Panel`
    - `Velt Recorder Player`
  - Its turned on by default for Comments feature and off by default for standalone Recorder feature.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Change behaviour globally
<VeltRecorderNotes playVideoInFullScreen={true} />
<VeltRecorderControlPanel playVideoInFullScreen={true} />
// Change behaviour for specific player 
<VeltRecorderPlayer playVideoInFullScreen={true} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-recorder-notes play-video-in-full-screen="true"></velt-recorder-notes>
<velt-recorder-control-panel play-video-in-full-screen="true"></velt-recorder-control-panel>
<velt-recorder-player play-video-in-full-screen="true"></velt-recorder-player>
```
</Tab>
</Tabs>


- [**Recorder**]: Added keyboard shortcuts in video editor for improved editing experience:
  - `s`: Split the video at the selected frame.
  - `d`, `delete`, or `backspace`: Delete the selected video section.
  - `space`: Toggle video play/pause.

- [**Single Editor Mode**]: Added wireframe for Single Editor Mode Panel.
- [**Single Editor Mode**]: Added embeddable component for Single Editor Mode Panel.

  <Tabs>
  <Tab title="React / Next.js">
  ```jsx
  <VeltSingleEditorModePanel shadowDom={false} darkMode={true} variant="custom-ui" />
  ```
  </Tab>
  <Tab title="Other Frameworks">
  ```html
  <velt-single-editor-mode-panel shadow-dom="false" dark-mode="true" variant="custom-ui"></velt-single-editor-mode-panel>
  ```
  </Tab>
  </Tabs>

</Update>

<Update label="4.4.0-beta.7" description="Apr 28 2025">
### Improvements
- [**UI Customization**]: Added dynamic key support and square bracket notation support in Velt If conditions for more flexible conditional logic.

### Bug Fixes
- [**Follow Mode**]: Fixed an issue where follow mode was not working as expected.
- [**Comments**]: Fixed "All" status filter not displaying all comments in sidebar.

</Update>

<Update label="4.4.0-beta.6" description="Apr 25 2025">

### New Features
- [**UI Customization**]: Added support of adding dynamic id on Velt Button. You can use template variables to set the id.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltButtonWireframe id="someStaticId" type="button-toggle" />
<VeltButtonWireframe id="{annotation.annotationId}" type="button-toggle" />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-button-wireframe id="someStaticId" type="button-toggle"></velt-button-wireframe>
<velt-button-wireframe id="{annotation.annotationId}" type="button-toggle"></velt-button-wireframe>
```
</Tab>
</Tabs>


### Improvements
- [**Recorder**]: Improved video editor UX for trimming and splitting videos.
- [**Single Editor Mode**]: Return `undefined` value in `isUserEditor` when there are no current editors available in single editor mode.
- [**Presence**]: Added `locationId` support in presence component.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltPresence locationId={"YOUR_LOCATION_ID"} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-presence location-id="YOUR_LOCATION_ID"></velt-presence>
```
</Tab>
</Tabs>

### Bug Fixes
- [**Comments**]: Fixed an issue where comment dialog composer in sidebar was getting autofocused when `fullExpanded` mode was enabled.


</Update>

<Update label="4.4.0-beta.5" description="Apr 24 2025">

### New Features
- [**UI Customization**]: Added `resetVeltButtonState` method to reset the state of Velt Button components.

  ```ts
  // Reset state for a specific button in a given group
  client.resetVeltButtonState({id: 'openSidebar', group: 'multi'})

  // Reset state for all buttons in a given group
  client.resetVeltButtonState({group: 'multi'})

  // Reset state for a specific button in all groups
  client.resetVeltButtonState({id: 'openSidebar'})

  // Reset state for all buttons
  client.resetVeltButtonState()
  ```

### Improvements
- [**Comments**]: Updated copy and icons for sidebar filter buttons.
- [**Recorder**]: Made the transition to editor smoother when `autoOpenVideoEditor` is enabled.
- [**Recorder**]: Improved the control panel embedded settings menu UX.
- [**Recorder**]: Added keyboard shortcuts for Play, Pause, Split, and Delete actions in video editor.


### Bug Fixes
- [**Comments**]: Fixed an issue where the dialog might close if the user clicked outside the dialog while a recording was in progress.


</Update>

<Update label="4.4.0-beta.4" description="Apr 23 2025">
### New Features
- [**Self Hosting**]: Added support for self-hosting file attachments in comments.

### Improvements
- [**Self Hosting**]: Added retries for GET operations.
- [**Analytics**]: Exposed additional events to Velt Debugger.
- [**Live State Sync**]: Added config to choose between merging and replacing live state data.

<Tabs>
<Tab title="React / Next.js">
**Using Hooks:**
```ts
const liveStateData = {
  'yourKey': 'yourValue'
};

useSetLiveStateData('LIVE_STATE_DATA_KEY',liveStateData, { merge: true });
```

**Using API:**
```ts
const liveStateSyncElement = useLiveStateSyncUtils();
const liveStateData = {
  'yourKey': 'yourValue'
};
liveStateSyncElement.setLiveStateData('LIVE_STATE_DATA_KEY', liveStateData, {
    merge: true
});
```
</Tab>
<Tab title="Other Frameworks">
```ts
const liveStateSyncElement = Velt.getLiveStateSyncElement();
const liveStateData = {
  'yourKey': 'yourValue'
};
liveStateSyncElement.setLiveStateData('LIVE_STATE_DATA_KEY', liveStateData, {
    merge: true
});
```
</Tab>
</Tabs>

### Bug Fixes
- [**Live State Sync**]: Fixed an issue in the Redux Middleware where the middleware was not initializing when Velt Provider was added conditionally.


</Update>

<Update label="4.4.0-beta.3" description="Apr 23 2025">

### Bug Fixes
- [**Single Editor Mode**]: Fixed an issue where `contenteditable` div's access was not syncing properly when editor state changed.

</Update>

<Update label="4.4.0-beta.2" description="Apr 22 2025">
### Improvements
- [**Recorder**]: Added missing audio waveform visualization for screen recordings.
- [**Recorder**]: Made query parameter optional for `fetchRecordings` method.
- [**Recorder**]: Improved metadata handling to ensure clean object state.
  ```typescript
  export class RecorderData {
    recorderId!: string;
    from?: User | null; 
    metadata?: RecorderMetadata;
    assets: RecorderDataAsset[] = [];
    transcription: RecorderDataTranscription = new RecorderDataTranscription();
  }
  ```
</Update>


<Update label="4.4.0-beta.1" description="Apr 21 2025">

### Improvements
- [**Recorder**]: Added additional props in `Recorder Control Panel` component:
  - `settingsEmbedded`: If set to true, the settings will be embedded in the control panel vs a menu. Default is `false`. Please use this together with the Control Panel Wireframes so that you can move the settings panel in a different part of the control panel UI.
  - `autoOpenVideoEditor`: If set to true, the video editor will be opened automatically when the recording is done. Default is `false`.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltRecorderControlPanel autoOpenVideoEditor={true} settingsEmbedded={true} />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-recorder-control-panel auto-open-video-editor="true" settings-embedded="true"></velt-recorder-control-panel>
```
</Tab>
</Tabs>

- [**Recorder**]: Added wireframe for recording preview in recording control panel.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltRecorderControlPanelWireframe.FloatingMode.Screen />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-recorder-control-panel-screen-wireframe></velt-recorder-control-panel-screen-wireframe>
```
</Tab>
</Tabs>

</Update>

<Update label="4.3.0" description="Apr 18 2025">

### New Features
- [**Comments**]: Added `fullExpanded` mode to control the expanded state of comments.
  - When enabled, comments will be shown in fully expanded state by default.
  - Available on all comment-related components and can be controlled via props or API methods.

<Tabs>
<Tab title="React / Next.js">
Using Props:
```jsx
// Apply this change globally to all types of comments
<VeltComments fullExpanded={true} />

// Apply this change only in comments sidebar
<VeltCommentsSidebar fullExpanded={true} />

// Apply this change only in inline comments section
<VeltInlineCommentsSection fullExpanded={true} />

// Apply this change only in the standalone comment thread
<VeltCommentThread fullExpanded={true} />

```
Using API:
```js
const commentElement = client.getCommentElement();
commentElement.enableFullExpanded();
commentElement.disableFullExpanded();
```
</Tab>
<Tab title="Other Frameworks">
Using Props:
```html
<!-- Apply this change globally to all types of comments -->
<velt-comments full-expanded="true"></velt-comments>

<!-- Apply this change only in comments sidebar -->
<velt-comments-sidebar full-expanded="true"></velt-comments-sidebar>

<!-- Apply this change only in inline comments section -->
<velt-inline-comments-section full-expanded="true"></velt-inline-comments-section>

<!-- Apply this change only in the standalone comment thread -->
<velt-comment-thread full-expanded="true"></velt-comment-thread>

```
Using API:
```js
const commentElement = Velt.getCommentElement();
commentElement.enableFullExpanded();
commentElement.disableFullExpanded();
```
</Tab>
</Tabs>

</Update>

<Update label="4.3.0-beta.7" description="Apr 17 2025">

### New Features
- [**Dev Tools**]: Published beta version of Velt Devtools Chrome extension. It allows you to inspect and debug your Velt implementation. If you are interested in trying it out, please reach out to us.
- [**Console**]: Added support for viewing folders, recordings and notifications data in the console data page.
- [**Console**]: Added support for additional filters in the console data page: organizationId, folderId, documentId, userId.
- [**Comments**]: Added support for folder users in `@` mentions dropdown.
- [**Recorder**]: Added an API to subscribe to all recorder data in the current document.
  - Param: `RecorderRequestQuery`, optional, Gets the data for the provided query.
  - Returns: `Observable<GetRecordingsResponse>`, Subscription of the recorder data.

<Tabs>
<Tab title="React / Next.js">

**Using Hook:**
```jsx
const recordings = useRecordings(); 

useEffect(() => {
  console.log('recordings', recordings);
}, [recordings]);
```

**Using API:**
```js
const recorderElement = useRecorderUtils();
recorderElement.getRecordings().subscribe((data) => {
    console.log('recordings', data);
});

```
</Tab>
<Tab title="Other Frameworks">
```js
const recorderElement = Velt.getRecorderElement();
recorderElement.getRecordings().subscribe((data) => {
    console.log('recordings', data);
});
```
</Tab>
</Tabs>

- [**Recorder**]: Extended the `on` event subscription API to include:
  - `recordingDone`: Triggered when recording is completed.
  - `deleteRecording`: Triggered when a recording is deleted.

<Tabs>
<Tab title="React / Next.js">

**Using Hook:**
```jsx
const recordingDoneEvent = useRecorderEventCallback('recordingDone');
const recordingDeleteEvent = useRecorderEventCallback('deleteRecording');

useEffect(() => {
    console.log('recordingDoneEvent', recordingDoneEvent);
}, [recordingDoneEvent]);

useEffect(() => {
    console.log('recordingDeleteEvent', recordingDeleteEvent);
}, [recordingDeleteEvent]);

```

**Using API:**
```js
const recorderElement = useRecorderUtils();

recorderElement.on('recordingDone').subscribe((data) => {
    console.log('recordingDone:' , data);
});

recorderElement.on('deleteRecording').subscribe((data) => {
    console.log('deleteRecording:' , data);
});
```

</Tab>
<Tab title="Other Frameworks">
```js
const recorderElement = Velt.getRecorderElement();

recorderElement.on('deleteRecording').subscribe((data) => {
    console.log('deleteRecording:' , data);
});

recorderElement.on('recordingDone').subscribe((data) => {
    console.log('recordingDone:' , data);
});
```
</Tab>
</Tabs>


### Improvements
- [**UI**]: Made custom list search case insensitive.
- [**Recorder**]: Make the video preview responsive in video editor.
- [**Recorder**]: Improved types for all APIs and Props for the recording feature.

</Update>

<Update label="4.3.0-beta.6" description="Apr 16 2025">

### New Features
- [**Core**]: Added the following events in `on` method of Velt client:
  - `userUpdate`: Triggered when the Velt user is updated.
  - `documentInit`: Triggered when the Velt document is initialized.
  - `error`: Triggered when an error occurs. Currently this is only triggered for `token_expired` error. In future, this will be extended for other relevant errors.

<Tabs>
<Tab title="React / Next.js">
**Using Hook:**
```jsx
const userUpdateEvent = useVeltEventCallback('userUpdate');
const documentInitEvent = useVeltEventCallback('documentInit');
const errorEvent = useVeltEventCallback('error');

useEffect(() => {
    console.log('userUpdate', userUpdateEvent);
}, [userUpdateEvent]);

useEffect(() => {
    console.log('documentInit', documentInitEvent);
}, [documentInitEvent]);

useEffect(() => {
    // for token expired, error.code = 'token_expired'
    console.log('error', errorEvent);
}, [errorEvent]);
```

**Using API:**
```js
client.on('userUpdate').subscribe((user) => {
    console.log('userUpdate', user);
});

client.on('documentInit').subscribe((documentInit) => {
    console.log('documentInit', documentInit);
});

client.on('error').subscribe((error) => {
    // for token expired, error.code = 'token_expired'
    console.log('error', error);
});
```

</Tab>
<Tab title="Other Frameworks">
```js
Velt.on('userUpdate').subscribe((user) => {
    console.log('userUpdate', user);
});

Velt.on('documentInit').subscribe((documentInit) => {
    console.log('documentInit', documentInit);
});

Velt.on('error').subscribe((error) => {
    // for token expired, error.code = 'token_expired'
    console.log('error', error);
});
```
</Tab>
</Tabs>


- [**Recorder**]: Added ability to enable/disable video editor via props on `Velt Recorder Player` and `Velt Recorder Control Panel` components. You could use any of these.

<Tabs>
<Tab title="React / Next.js">
```jsx
 <VeltRecorderPlayer videoEditor={true}  />
 <VeltRecorderControlPanel videoEditor={true}/>
```
</Tab>
<Tab title="Other Frameworks">
```html
 <velt-recorder-player video-editor="true"></velt-recorder-player>
 <velt-recorder-control-panel video-editor="true"></velt-recorder-control-panel>
```
</Tab>
</Tabs>


- [**Recorder**]: Added `recordingCountdown` and `recordingTranscription` props on `Velt Recorder Notes` and `Velt Recorder Control Panel` components.

<Tabs>
<Tab title="React / Next.js">
```jsx
 <VeltRecorderNotes recordingTranscription={false} recordingCountdown={false} />
 <VeltRecorderControlPanel recordingTranscription={false} recordingCountdown={false} />
```
</Tab>
<Tab title="Other Frameworks">
```html
 <velt-recorder-notes recording-countdown="false" recording-transcription="false"></velt-recorder-notes>
 <velt-recorder-control-panel recording-countdown="false" recording-transcription="false"></velt-recorder-control-panel>
```
</Tab>
</Tabs>

- [**Recorder**]: Added video editor wireframes.

### Improvements
- [**Core**]: Improved types for data resolvers.
- [**Recorder**]: Removed drag functionality from recording control panel and player.
- [**Recorder**]: If a `null` value is set for `recorder Id` prop in `Velt Recorder Player` component, a warning will be thrown.

### Bug Fixes
- [**Comments**]: Added a check to prevent an error in @mentions dropdown if the user group has no users and the `expandMentionGroups` config is set to true.

</Update>


<Update label="4.3.0-beta.5" description="Apr 16 2025">
### New Features
- [**Comments**]: Added support for new filters in `fetchCommentAnnotations` method:
  - `resolvedBy`: `string`, Filter comments by user who resolved the comment
  - `userIds`: `string[]`, Filter comments by comment annotation author
  - `mentionedUserIds`: `string[]`, Filter comments if the provided users are tagged in the comment

- [**Contacts**]: Added API and Hook to get the list of users added to organization, document, user groups or the ones overwritten using the `updateContactList` API.

<Tabs>
<Tab title="React / Next.js">
```jsx

export interface UserGroup {
    groupId!: string;
    groupName!: string;
    users?: User[];
}

export interface GetContactListResponse {
    organizationUsers?: User[];
    folderUsers?: User[];
    documentUsers?: User[];
    userGroups?: UserGroup[];
    updatedContactList?: User[];
}


// React Hook
const contactList = useContactList();
console.log(contactList); // initial value will be null

// API method
const contactElement = client.getContactElement();
contactElement.getContactList().subscribe((response) => {
  console.log(response); // initial value will be null
});
```
</Tab>
<Tab title="Other Frameworks">
```js
export interface UserGroup {
    groupId!: string;
    groupName!: string;
    users?: User[];
}

export interface GetContactListResponse {
    organizationUsers?: User[];
    folderUsers?: User[];
    documentUsers?: User[];
    userGroups?: UserGroup[];
    updatedContactList?: User[];
}

// API method
const contactElement = Velt.getContactElement();
contactElement.getContactList().subscribe((response) => {
  console.log(response); // initial value will be null
});
```
</Tab>
</Tabs>

</Update>


<Update label="4.3.0-beta.4" description="Apr 14 2025">

### New Features
- [**Comments**]: Added a config to show expanded user groups inside the @mentions dropdown menu.
  - Added [new wireframes](/ui-customization/features/async/comments/comment-dialog/subcomponents/autocomplete-group-option) to customize the display of user groups.
  - Here are some props to control the display of user groups:
    - `expandMentionGroups`: Whether to expand the user groups and show individual users inside the groups in the @mentions dropdown menu.
    - `showMentionGroupsFirst`: Whether to show the user groups in the @mentions dropdown menu before the non-group users.
    - `showMentionGroupsOnly`: Whether to show only the user groups in the @mentions dropdown menu and not the non-group users.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltComments 
      expandMentionGroups={true} 
      showMentionGroupsFirst={false} 
      showMentionGroupsOnly={false} 
/>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments 
     expand-mention-groups="true" 
     show-mention-groups-first="false"
     show-mention-groups-only="true"
></velt-comments>
```
</Tab>
</Tabs>

- [**Comments Sidebar**]: Added two new default system filters and their wireframes to the sidebar:
  - `Tagged`: Filter comments by specifying the user who was tagged in the comment. ([Wireframe](/ui-customization/features/async/comments/comments-sidebar/subcomponents/filter/subcomponents/tagged))
  - `Assigned`: Filter comments by specifying the user who was assigned to the comment. ([Wireframe](/ui-customization/features/async/comments/comments-sidebar/subcomponents/filter/subcomponents/assigned))

  ```typescript
  class CommentSidebarFilterConfig {
      // ... existing properties ...
      tagged?: FilterTypeConfig;
      assigned?: FilterTypeConfig;
      // ... existing properties ...
  }
  ```
- [**Comments Sidebar**]: Added another UI pattern for filters options: searchable dropdown with checklist. ([Example Wireframe](/ui-customization/features/async/comments/comments-sidebar/subcomponents/filter/subcomponents/tagged))

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltCommentsSidebar filterOptionLayout="dropdown | checkbox"/>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments-sidebar filter-option-layout="dropdown | checkbox"></velt-comments-sidebar>
```
</Tab>
</Tabs>

- [**Comments Sidebar**]: Added a reset filter button. ([Wireframe](/ui-customization/features/async/comments/comments-sidebar/subcomponents/filter/subcomponents/reset-button))
- [**Comments Sidebar**]: Added prop to disable count calculation for sidebar filter options.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltCommentsSidebar filterCount={false}/>
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comments-sidebar filter-count="false"></velt-comments-sidebar>
```
</Tab>
</Tabs>

</Update>


<Update label="4.3.0-beta.3" description="Apr 11 2025">
### Improvements
- [**Comments**]: Updated `getCommentAnnotations()` method to now [query](/api-reference/sdk/models/data-models#commentrequestquery) and subscribe to comments data even if its not the currently set document.
- [**Comments**]: Improved comment dialog positioning on text comments when the text is at the bottom edge of the page.
- [**Notifications**]: Added support in `getNotificationsData()` for retrieving custom notifications created with `notifyAll: false`.
- [**REST API**]: Improved the performance of [GDPR Delete API](/api-reference/rest-apis/v2/gdpr/delete-all-user-data-gdpr) and made it 90%+ faster and more efficient.

### Bug Fixes
- [**Comments**]: Fixed an issue with SlateJS comments where comment was not being added when the text was selected from right to left.

</Update>

<Update label="4.3.0-beta.2" description="Apr 7 2025">
### Improvements
- [**Recorder**]: Optimized the video recording performance: 50% smaller files with 90% faster uploads!
</Update>

<Update label="4.3.0-beta.1" description="Apr 7 2025">
### Improvements
- [**Core**]: Upgraded several dependency packages to new versions.
</Update>

<Update label="4.2.1-beta.11" description="Apr 4 2025">
### Improvements
- [**REST API**]: Added support to get all user data for GDPR requests. [Learn more](/api-reference/rest-apis/v2/gdpr/get-all-user-data-gdpr).
</Update>

<Update label="4.2.1-beta.11" description="Apr 3 2025">
### Improvements
- [**Localization**]: Added additional null checks for provided localization strings.
- [**REST API**]: Added support for special characters (`_`, `-`) while creating custom notifications.
</Update>

<Update label="4.2.1-beta.10" description="Apr 3 2025">
### New Features
- [**Localization**]: Added support for localization for all static strings visible in the SDK Components.
  - You can get the complete list of strings that can be localized [here](https://firebasestorage.googleapis.com/v0/b/snippyly.appspot.com/o/external%2Flocalization-strings-map.json?alt=media&token=0cdd2b52-10ed-4033-a08a-5c2b622ce7df).
<Tabs>
<Tab title="React / Next.js">
```jsx
// Provide the localization object for the languages you want to support.
client.setTranslations({
  'en': {
    'All comments': 'All comments',
  },
  'fr': {
    'All comments': 'Tous les commentaires',
  },
  // Add more languages as needed.
});

// Set one of the languages you've provided the translations for.
client.setLanguage('en');
```
</Tab>
<Tab title="Other Frameworks">
```js
// Provide the localization object for the languages you want to support.
Velt.setTranslations({
  'en': {
    'All comments': 'All comments',
  },
  'fr': {
    'All comments': 'Tous les commentaires',
  },
  // Add more languages as needed.
});

// Set one of the languages you've provided the translations for.
Velt.setLanguage('en');
```
</Tab>
</Tabs>

- [**Comments**]: Added support for `.txt` file attachments in Comments.

</Update>

<Update label="4.2.1-beta.9" description="Apr 2 2025">
### New Features
- [**Comments, Notifications**]: Added a first-party [extension](https://www.npmjs.com/package/@veltdev/slate-velt-comments) for [SlateJS](https://www.slatejs.org/) to allow comments and notifications on text content.

</Update>

<Update label="4.2.1-beta.8" description="Apr 2 2025">
### Bug Fixes
- [**UI Customization**]: Fixed an issue where empty wireframes for repeated components were not being rendered in some scenarios.

### Improvements
- [**Comments**]: Changed default value of `pin-highlighter` to false for better initial experience.
- [**REST API**]: Added `deleteAll` parameter to [`/v1/organizations/usergroups/users/delete`](/api-reference/rest-apis/v2/user-groups/delete-users-from-group) remove all users from a group.
- [**REST API**]: Added `metadata` field on the returned comment annotation objects. It will contain documentId, organizationId, folderId, etc.

</Update>

<Update label="4.2.1-beta.7" description="Mar 31 2025">
### Improvements
- [**Recorder**]: Improved the video editor to be smoother and enabled "select and delete" feature.
- [**Recorder**]: Added support for audio waveform visualization in video recordings.
- [**Recorder**]: Reduced the size of the video recordings by 50%.
</Update>

<Update label="4.2.1-beta.6" description="Mar 28 2025">
### New Features
- [**Reactions**]: Added support for self hosting reactions data.

### Improvements
- [**Core**]: Improved signature of User Resolver (used for self hosting user PII) for better consistency with backward compatibility.
- [**Core**]: Extended data resolvers with an option to configure retries and optimized operation order to prioritize client-side execution. Learn more [here](/api-reference/sdk/models/data-models#resolverconfig).
- [**REST API**]: Added support for updating users in existing comment annotations via REST APIs. Learn more [here](/api-reference/rest-apis/v2/comments-feature/comment-annotations/update-comment-annotations#param-update-users).
</Update>

<Update label="4.2.1-beta.5" description="Mar 26 2025">
### Improvements
- [**Core**]: Added support for automatic folder creation from the frontend when folders don't exist. New documents without existing data are now automatically added to the currently set folder.
- [**REST API**]: Added support for user mentions via REST APIs. Learn more [here](/api-reference/rest-apis/v2/comments-feature/comment-annotations/add-comment-annotations).

### Bug Fixes
- [**Comments**]: Fixed an issue where deleting inline comments in multi-document scenarios wasn't always updating the UI state.

</Update>

<Update label="4.2.1-beta.4" description="Mar 21 2025">

### New Features
- [**Core**]: Added `updateLocations` method to update location(s) metadata. Previously this could only be done via REST APIs.

```js
client.updateLocations({
  organizationId: 'org1', 
  documentIds: ['doc1', 'doc2'], 
  locations: [{
    id: 'location1', 
    locationName: 'MyLocation'
  }]
})

export interface UpdateLocationsRequest<T = unknown> {
    organizationId?: string;
    documentIds?: string[];
    locations?: UpdateLocationMetadata<T>[];
}

export interface UpdateLocationMetadata<T = unknown> {
    id: string;
    [key: string]: T | string;
}
```

### Improvements
- [**Core**]: Improved types for `updateDocuments` method.

```js
client.updateDocuments({
  organizationId: 'org1', 
  documents: [{
    documentId: 'doc1', 
    documentName: 'MyDoc'
  }]
})

export interface UpdateDocumentsRequest<T = unknown> {
    organizationId?: string;
    documents?: UpdateDocumentMetadata<T>[];
}

export interface UpdateDocumentMetadata<T = unknown> {
    documentId: string;
    [key: string]: T | string;
}
```
- [**Core**]: Added support for location persistence by after debounced document updates.
- [**Core**]: Show the most updated location metadata in features like sidebar and notifications even if the features have stale data.
- [**Core**]: `client.getMetadata()` method now provides most updated information about organization, folders documents and locations for debugging purposes.
- [**Core**]: Added logs for get API methods like `fetchCommentAnnotations` if it's called without an authenticated user.
- [**Core**]: SDK state and location are preserved after auto-relogin when browser extensions clear indexedDb during idle periods of >1hr.
- [**Core**]: Enhanced `disableLogs` method with more granular control:
  - `disableLogs()`: turns off only warnings
  - `disableLogs({suppressAll: true})`: turns off all logs
  - `disableLogs({warning: false, suppressAll: true})`: Keeps the warning logs but turns off all other logs

</Update>

<Update label="4.2.1-beta.3" description="Mar 20 2025">

### Improvements
- [**Core**]: Auto-relogin user in rare scenarios where after an hour of idle time indexedDb is cleared by browser extensions.
</Update>

<Update label="4.2.1-beta.2" description="Mar 20 2025">

### New Features
- [**Comments**]: Added `svgAsImg` configuration in comments to treat SVGs as images instead layered elements. Default is `false`.
<Tabs>
<Tab title="React / Next.js">
**Using Props:**
```jsx
<VeltComments svgAsImg={true} />
```

**Using API:**
```jsx
const commentElement = client.getCommentElement();
commentElement.enableSvgAsImg();
commentElement.disableSvgAsImg();
```
</Tab>
<Tab title="Other Frameworks">
**Using Props:**
```html
<velt-comments svg-as-img="true"></velt-comments>
```

**Using API:**
```html
const commentElement = client.getCommentElement();
commentElement.enableSvgAsImg();
commentElement.disableSvgAsImg();
```
</Tab>
</Tabs>

### Improvements
- [**Comments**]: Added `data-velt-comment-dialog-comments-priority` attribute in comment dialog if a comment priority is set. This can be used to style comments differently based on their priority.
- [**Notifications**]: Changed min height to 300px in Notification panel.
- [**Comments**]: Added ability to apply filters via API before mounting the Sidebar (in embed mode).

</Update>

<Update label="4.2.1-beta.1" description="Mar 19 2025">

### Improvements
- [**Comments**]: Now, if both inline and popover comments are used, clicking on a comment in the inline comments section will not activate comment bubble.
- [**Comments**]: Added additional classes to inline comments section's container divs to allow for more precise custom styling.
- [**Core**]: Added configuration options to aggressively suppress error messages especially on Safari related to index db and network errors.
```js
client.disableLogs({suppressAll:true})
```

### Bug Fixes
- [**Comments**]: Added missing type for `placeholder` field in `createCustomListDataOnAnnotation` in React.
- [**Comments**]: Fixed minor bugs with Custom Lists wireframes.

</Update>

<Update label="4.2.0" description="Mar 18 2025">

### Improvements
- [**Notifications**]: Added minimum height to notification panel to prevent layout shift when there is just one notification.
- [**Notifications**]: Removed default styling from notifications tool when Wireframe is used.
- [**Comments**]: Added active state support in Tiptap comments mark tags.

### Bug Fixes
- [**Comments**]: Fixed an issue with `onCommentAdd` event that was not triggered once the comments component was unmounted and remounted during the session.

</Update>

<Update label="4.2.0-beta.5" description="Mar 13 2025">

### New Features
- [**Debugging**]: Added events for `unsetDocuments` and `unsetLocations`.
- [**Comments**]: Added type for `fetchCommentAnnotations` in `CommentElement` for React.
- [**Documents**]: Added `updateDocuments` method to update document(s) metadata.
```js
client.updateDocuments({
  organizationId: 'org1',
  documents: [
    {
      documentId: 'document-id',
      documentName: 'document-name'
    }, 
    {
      documentId: 'document-id-2',
      documentName: 'document-name-2'
    }
  ]
});

export interface UpdateDocumentsRequest {
    organizationId?: string;
    documents?: {documentId: string; [key: string]: any}[];
}
```

- [**Debugging**]: Added `folderId` property in `Velt.getMetadata()` response.

</Update>

<Update label="4.2.0-beta.4" description="Mar 12 2025">

### Improvements
- [**Notifications**]: Improved the notification tool component to prevent layout shift when notification count was updated.

### Bug Fixes
- [**Comments**]: Added missing type definition for Sidebar Filter Config in React to include status property.

</Update>

<Update label="4.2.0-beta.3" description="Mar 11 2025">

### Improvements
- [**Comments**]: Improved type names for comment resolver.

```ts
// Data models
export interface VeltDataProvider {
    comment?: CommentAnnotationDataProvider;
    user?: UserDataProvider;
}

export interface CommentAnnotationDataProvider {
    get: (request: GetCommentResolverRequest) => Promise<Record<string, PartialCommentAnnotation>>;
    save: (request: SaveCommentResolverRequest) => Promise<void>;
    delete: (request: DeleteCommentResolverRequest) => Promise<void>;
    resolveTimeout?: number; // optional. In milliseconds. Expected timeout to get a response from your API.
}

export interface GetCommentResolverRequest {
    organizationId: string;
    commentAnnotationIds?: string[];
    documentIds?: string[];
    folderId?: string;
    allDocuments?: boolean;
}

export interface SaveCommentResolverRequest {
    commentAnnotation: { [key: string]: PartialCommentAnnotation };
}

export interface PartialComment {
    commentId: string | number;
    commentHtml?: string;
    commentText?: string;
}

export interface PartialCommentAnnotation {
    annotationId: string;
    metadata?: VeltMetadata;
    comments: {
        [commentId: string]: PartialComment;
    };
}
```

</Update>

<Update label="4.2.0-beta.2" description="Mar 7 2025">

### New Features
- [**Recorder**]: Added Video Editing feature allowing users to edit recorded videos.

<Tabs>
<Tab title="React / Next.js">
**Using Props:**
```jsx
<VeltRecorderNotes videoEditor={true} />
```

**Using API:**
```jsx
const recorderElement = client.getRecorderElement();
recorderElement.enableVideoEditor();
recorderElement.disableVideoEditor();
```
</Tab>
<Tab title="Other Frameworks">
**Using Props:**
```html
<velt-recorder-notes video-editor="true"></velt-recorder-notes>
```

**Using API:**
```html
const recorderElement = Velt.getRecorderElement();
recorderElement.enableVideoEditor();
recorderElement.disableVideoEditor();
```
</Tab>
</Tabs>

### Improvements
- [**Recorder**]: Improved Recorder player UX.

</Update>

<Update label="4.2.0-beta.1" description="Mar 7 2025">

### New Features
- [**Comments**]: Comments Self Hosting now available. Store and retrieve comment and notification text on your own backend while using Velt's UI components.
  - Combined with existing user PII self hosting, you can now store all sensitive data on your infrastructure.
  - Support for self-hosted attachments and recordings coming soon.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Define your comment data provider
const commentDataProvider = {
  get: async (request) => {
    const result = await getDataFromYourServer(request);
    // Ensure the result is in the required format
    return result;
  },
  save: async (request) => {
    const result = await saveDataOnYourServer(request);
    return result;
  },
  delete: async (request) => {
    await deleteDataFromYourServer(request.commentAnnotationId);
  },
};

// Set the data provider
<VeltProvider
  apiKey="YOUR_API_KEY_HERE"
  dataProviders={{ comment: commentDataProvider }}>
  {/* Your app content */}
</VeltProvider>
```

**Request Objects:**
```js
// GET Request:
{
    organizationId: string;
    commentAnnotationIds?: string[];
    documentIds?: string[];
    folderId?: string;
    allDocuments?: boolean;
}

// Save Request:
{
    commentAnnotation: { [key: string]: IStrippedCommentAnnotation };
}

// IStrippedCommentAnnotation:
{
    annotationId: string;
    metadata?: any;
    comments: {
        [commentId: string]: StrippedComment;
    };
}

// StrippedComment:
{
    commentId: string | number;
    commentHtml?: string;
    commentText?: string;
}

// Delete Request:
{
    commentAnnotationId: string;
    metadata?: any;
}
```
</Tab>

<Tab title="Other Frameworks">
```js
// Define your comment data provider
const commentDataProvider = {
  get: async (request) => {
    const result = await getDataFromYourServer(request);
    // Ensure the result is in the required format
    return result;
  },
  save: async (request) => {
    const result = await saveDataOnYourServer(request);
    return result;
  },
  delete: async (request) => {
    await deleteDataFromYourServer(request.commentAnnotationId);
  },
};

// Set the data provider
client.setDataProviders({
  comment: commentDataProvider,
});
```

**Request Objects:**
```js
// GET Request:
{
    organizationId: string;
    commentAnnotationIds?: string[];
    documentIds?: string[];
    folderId?: string;
    allDocuments?: boolean;
}

// Save Request:
{
    commentAnnotation: { [key: string]: IStrippedCommentAnnotation };
}

// IStrippedCommentAnnotation:
{
    annotationId: string;
    metadata?: any;
    comments: {
        [commentId: string]: StrippedComment;
    };
}

// StrippedComment:
{
    commentId: string | number;
    commentHtml?: string;
    commentText?: string;
}

// Delete Request:
{
    commentAnnotationId: string;
    metadata?: any;
}
```
</Tab>
</Tabs>
</Update>

<Update label="4.1.1" description="Mar 5 2025">
### Improvements
- [**Comments**]: Added mobile support for inline comment section, improving the user experience on smaller screens.
- [**Debugging**]: Now `client.getMetadata()` method only returns the currently set documents instead of all documents used in the current session.

</Update>

<Update label="4.1.0" description="Mar 4 2025">

### New Features
- [**Comments**]: Tiptap comments marks are now persisted automatically by default. This simplifies implementation as you no longer need to store marks yourself or modify your editor's content handling.
- [**Comments**]: Added Sorting Dropdown Wireframe support for inline comments section. [Learn more](/ui-customization/features/async/comments/inline-comments-section/subcomponents/panel/sorting-dropdown)

### Improvements
- [**Comments**]: Made the freestyle comment pins adapt to DOM elements with complex layouts.
- [**Comments**]: Improved loading skeleton in inline comments section to match comment card width and adapt responsively to smaller widths.
- [**Comments**]: Improved the alignment of the assign to dropdown in inline comments section when the width of the section is large.
- [**Comments**]: Added dark mode styling for the new sorting dropdown in inline comments section.

### Bug Fixes
- [**Comments**]: Fixed an issue where the comment bubble was not keeping the dialog open when a fresh annotation was added.

</Update>

<Update label="4.0.0-beta.27" description="Feb 28 2025">

### New Features
- [**Comments**]: Added a default sorting UI component in the inline comments section. This was one of the most requested features.
- [**Comments**]: Added config to prevent deleting the entire thread when the first comment is deleted.

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltComments deleteThreadWithFirstComment={false} />
```
</Tab>
<Tab title="Other Frameworks">
```js
<velt-comments delete-thread-with-first-comment="false"></velt-comments>
```
</Tab>
</Tabs>

### Improvements
- [**Comments**]: Improved the overall UI/UX of the inline comments section based on user feedback, including: loading state, inner padding, layout shift etc.

### Bug Fixes
- [**Comments**]: Fixed an issue where inline comments sorting was not working when the prop was changed dynamically.
- [**Comments**]: Fixed issue in single-threaded mode where delete thread label now correctly appears on the root comment regardless of sorting order.

</Update>

<Update label="4.0.0-beta.26" description="Feb 25 2025">

### New Features
- [**Core**]: Added ability to enable or disable Velt's logs/warnings in Browser Console.

<Tabs>
<Tab title="React / Next.js">
```jsx
client.enableLogs();
client.disableLogs();
```
</Tab>
<Tab title="Other Frameworks">
```js
Velt.enableLogs();
Velt.disableLogs();
```
</Tab>
</Tabs>

### Improvements
- [**Core**]: Added performance improvements for scenarios where the user accesses and switches between large number of documents at a high frequency.

</Update>



<Update label="4.0.0-beta.25" description="Feb 20 2025">

### Improvements
- [**Recorder**]: Improved [`TranscriptionDoneEvent`](/api-reference/sdk/models/data-models#transcriptiondoneevent) object.

- [**Comments**]: Fixed `useSetDocuments` hook to properly support `setDocuments` method in dependency array in React `useEffect`:
```jsx
const { setDocuments } = useSetDocuments();
useEffect(() => {
    setDocuments(yourDocuments);
}, [setDocuments]);
```
- [**Comments**]: Made small UI improvements:
  - Removed 0 from Velt bubble count.
  - Fixed Velt bubble wireframe layout shift issue.

### Bug Fixes
- [**Comments**]: Fixed small UI issues:
  - Fixed an issue where draft comments were showing up when reaction was updated.
  - Fixed an issue where selecting a comment in inline comment section was also opening the Velt Comment bubble.
  - Fixed an issue where focused thread mode scroll was not working as expected.
</Update>

<Update label="4.0.0-beta.24" description="Feb 17 2025">
### Bug Fixes
- [**Comments**]: Fixed an issue where the SeenBy dropdown wasn't opening on the first click.
- [**Comments**]: Fixed an issue where clicking @mention button was not opening the mention dropdown. Typing @ was working as expected.
- [**Comments**]: Fixed a re-rendering issue when adding reactions.

</Update>

<Update label="4.0.0-beta.23" description="Feb 15 2025">
### New Features
- [**Core**]: Added `getUser` method to get the current user.

<Tabs>
<Tab title="React / Next.js">
```jsx
const user = client.getUser();
console.log(user);
```
</Tab>
<Tab title="Other Frameworks">
```js
const user = Velt.getUser();
console.log(user);
```
</Tab>
</Tabs>

- [**UI Customization**]: Simplified how UI can be customized using wireframes.
  - Conditional Component Rendering: Conditionally render any component directly without needing to specify parent or sibling wireframes.
  - Conditional CSS Classes: Classes can now be conditionally applied to components based on the data in the component.
  - Wireframe CSS Classes Support: CSS Classes added to wireframes components are automatically applied to the related rendered components.
  
<Tabs>
<Tab title="React / Next.js">
**Conditional Component Rendering:**

``` jsx
// Old
<VeltCommentDialogWireframe.Header>
  <VeltIf condition="{annotation.status.id} === 'OPEN'" >
      <VeltCommentDialogWireframe.Status />
  </VeltIf>
</VeltCommentDialogWireframe.Header>


// New
<VeltCommentDialogWireframe.Status veltIf="{annotation.status.id} === 'OPEN'" />
```

**Conditional CSS Classes:**

``` jsx
<VeltCommentDialogWireframe.ThreadCard.Message veltClass="'color-yellow': {annotation.status.id} === 'in_progress'" />
```

**Wireframe CSS Classes Support:**

``` jsx
<VeltCommentDialogWireframe.ThreadCard.Message className="color-yellow" />
```

</Tab>
<Tab title="Other Frameworks">
**Conditional Component Rendering:**
``` html
<!-- Old -->
<velt-comment-dialog-header-wireframe>
  <velt-if condition="{annotation.status.id} === 'OPEN'" >
      <velt-comment-dialog-status-wireframe></velt-comment-dialog-status-wireframe>
  </velt-if>
</velt-comment-dialog-header-wireframe>


<!-- New -->
<velt-comment-dialog-status-wireframe velt-if="{annotation.status.id} === 'OPEN'" >
</velt-comment-dialog-status-wireframe>
```

**Conditional CSS Classes:**

``` jsx
<velt-comment-dialog-thread-card-message-wireframe velt-class="'color-yellow': {annotation.status.id} === 'in_progress'" > </velt-comment-dialog-thread-card-message-wireframe>
```

**Wireframe CSS Classes Support:**
``` html
<velt-comment-dialog-thread-card-message-wireframe class="color-yellow"> </velt-comment-dialog-thread-card-message-wireframe>
```
</Tab>
</Tabs>

- [**UI Customization**]: Set and render custom state data into Velt components. This data is available in all Velt Wireframes, Velt If and Velt Data components.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Setter
client.setUiState({
    dashboardName: 'MRR Growth',
    anyKey: 'anyValue'
});

// Getter
client.getUiState().subscribe((data) => {
    console.log('UI State: ', data);
});

// Use it in Velt Wireframe
<VeltCommentDialogWireframe.Header>
    <VeltData field={dashboardName} />
</VeltCommentDialogWireframe.Header>

```
</Tab>
<Tab title="Other Frameworks">
```js
// Setter
Velt.setUiState({
    dashboardName: 'MRR Growth',
    anyKey: 'anyValue'
});

// Getter
Velt.getUiState().subscribe((data) => {
    console.log('UI State: ', data);
});

// Use it in Velt Wireframe
<velt-wireframe style="display:none;">
    <velt-comment-dialog-wireframe.header>
        <velt-data field={dashboardName}></velt-data>
    </velt-comment-dialog-wireframe.header>
</velt-wireframe>
```
</Tab>
</Tabs>

- [**Comments**]: Added support for custom autocomplete search for contact list or [custom lists](/async-collaboration/comments/customize-behavior#createcustomlistdataoncomment). You should use this if you have a large dataset that you want to plug into the autocomplete dropdown, and search directly your own data source.

<Tabs>
<Tab title="React / Next.js">
**Enable the feature:**
```jsx
// Enable via props
<VeltComments customAutocompleteSearch={true} />


// Or, enable via Comment Element API
const commentElement = client.getCommentElement();
commentElement.enableCustomAutocompleteSearch();
commentElement.disableCustomAutocompleteSearch();
```

**Set initial list:**
```jsx
// For @mentions feature
contactElement.updateContactList(users);

// For custom list feature
commentElement.createCustomListDataOnComment({
    hotkey: "#",
    type: "custom",
    data: customListData,
});
```

**Handle search event:**
```jsx
commentElement.on('autocompleteSearch').subscribe(async (inputData) => {
    const searchText = inputData.searchText;

    // For @mentions feature
    if (inputData.type === 'contact') {
        const filteredUsersData = await __your_api_call__(searchText);
        contactElement.updateContactList(filteredUsersData, { merge: false });
    }

    // For custom list feature
    if (inputData.type === 'custom') {
        const filteredListData = await __your_api_call__(searchText, autocompleteData);
        commentElement.createCustomListDataOnComment({
            hotkey: "#",
            type: "custom",
            data: filteredListData,
        });
    }
});

interface AutocompleteSearchEvent {
    event: KeyboardEvent | InputEvent | Event;
    searchText: string;
    type?: 'contact' | 'custom';
    metadata?: VeltEventMetadata;
}

```
</Tab>
<Tab title="Other Frameworks">
**Enable the feature:**
```js
// Enable via attribute
<velt-comments custom-autocomplete-search="true"></velt-comments>

// Or, enable via Comment Element API
const commentElement = Velt.getCommentElement();
commentElement.enableCustomAutocompleteSearch();
commentElement.disableCustomAutocompleteSearch();
```

**Set initial list:**
```js
// For @mentions feature
contactElement.updateContactList(users);

// For custom list feature
commentElement.createCustomListDataOnComment({
    hotkey: "#",
    type: "custom",
    data: customListData,
});
```

**Handle search event:**
```js
commentElement.on('autocompleteSearch').subscribe(async (inputData) => {
    const searchText = inputData.searchText;

    // For @mentions feature
    if (inputData.type === 'contact') {
        const filteredUsersData = await __your_api_call__(searchText);
        contactElement.updateContactList(filteredUsersData, { merge: false });
    }

    // For custom list feature
    if (inputData.type === 'custom') {
        const filteredListData = await __your_api_call__(searchText, autocompleteData);
        commentElement.createCustomListDataOnComment({
            hotkey: "#",
            type: "custom",
            data: filteredListData,
        });
    }
});

interface AutocompleteSearchEvent {
    event: KeyboardEvent | InputEvent | Event;
    searchText: string;
    type?: 'contact' | 'custom';
    metadata?: VeltEventMetadata;
}

```
</Tab>
</Tabs>

- [**Comments**]: Added `composerClicked` event to detect when comment composer is clicked.

<Tabs>
<Tab title="React / Next.js">
```jsx
const composerClickEvent = useCommentEventCallback('composerClicked');
```
</Tab>
<Tab title="Other Frameworks">
```js
const commentElement = Velt.getCommentElement();
commentElement.on('composerClicked').subscribe((data) => {
    console.log('Composer clicked', data);
});
```
</Tab>
</Tabs>

### Bug Fixes
- [**Comments**]: Fixed assign comment input double border CSS issue.
</Update>

<Update label="4.0.0-beta.22" description="Feb 13 2025">
### New Features
- [**Folders**]: Introducing Folders! Organize documents hierarchically with granular access control. Modeled after Google Drive's folder structure.
  - Folders can contain documents and other folders.
  - Uses same permission model as Organizations and Documents.
  - APIs:
    - **Frontend**: Subscribe to folders and query by folderId.
    - **Backend**: CRUD operations for folders and access control. [Learn More](/api-reference/rest-apis/v2/folders/add-folder)
    - Added folder support to existing relevant APIs.

- [**Folders**]: API to subscribe to a particular folder and all its documents at the same time.

<Tabs>
<Tab title="React / Next.js">

**Using Hooks:**
```jsx
const { setDocuments } = useSetDocuments();

{/* Subscribe to a folder and all its documents */}
const rootDocument = [
  {
    id: 'document-1',
    metadata: {
      documentName: 'Document 1'
    }
  }
];

setDocuments(
  rootDocument,
  {
    folderId: 'folder1',
    allDocuments: true
  }
);


{/* Subscribe to a folder and some documents */}
const documents = [
  {
    id: 'document-1',
    metadata: {
      documentName: 'Document 1'
    }
  },
  {
    id: 'document-2',
    metadata: {
      documentName: 'Document 2'
    }
  }
];

setDocuments(
  documents,
  {
    folderId: 'folder1',
  }
);
```

**Using API:**
```jsx
{/* Subscribe to a folder and all its documents */}
client.setDocuments(
  rootDocument,
  {
    folderId: 'folder1',
    allDocuments: true
  }
);

{/* Subscribe to a folder and some documents */}
client.setDocuments(
  documents,
  {
    folderId: 'folder1',
  }
);
```
</Tab>
<Tab title="Other Frameworks">
```js
// Subscribe to a folder and all its documents
const rootDocument = [
  {
    id: 'document-1',
    metadata: {
      documentName: 'Document 1'
    }
  }
];

Velt.setDocuments(
  rootDocument,
  {
    folderId: 'folder1',
    allDocuments: true
  }
);

// Subscribe to a folder and some documents

const documents = [
  {
    id: 'document-1',
    metadata: {
      documentName: 'Document 1'
    }
  },
  {
    id: 'document-2',
    metadata: {
      documentName: 'Document 2'
    }
  }
];

Velt.setDocuments(
  documents,
  {
    folderId: 'folder1',
  }
);
``` 
</Tab>
</Tabs>

- [**Folders**]: Added an API to fetch folder metadata and subfolders by organizationId, folderId with pagination.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Get all folders for a specific organization
client.fetchFolders({
  organizationId: 'org1'
});

// Get a specific folder's metadata with its immediate subfolders
client.fetchFolders({
  organizationId: 'org1',
  folderId: 'folder1'
});

interface FetchFoldersRequest {
  organizationId?: string;
  folderId?: string;
}

interface FetchFoldersResponse {
  data: Record<string, FolderMetadata> | null;
  nextPageToken: string;
}
```
</Tab>
<Tab title="Other Frameworks">
```js
// Get all folders for a specific organization
Velt.fetchFolders({
  organizationId: 'org1'
});

// Get a specific folder's metadata with its immediate subfolders
Velt.fetchFolders({
  organizationId: 'org1',
  folderId: 'folder1'
});

interface FetchFoldersRequest {
  organizationId?: string;
  folderId?: string;
}

interface FetchFoldersResponse {
  data: Record<string, FolderMetadata> | null;
  nextPageToken: string;
}
```
</Tab>
</Tabs>


- [**Documents**]: Added an API to fetch document metadata by organizationId, folderId or documentIds with pagination.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Get all documents for a specific folder
client.fetchDocuments({
  organizationId: 'org1', 
  folderId: 'folder1',
  allDocuments: true
});

// Get specific documents by IDs
client.fetchDocuments({
  organizationId: 'org1',
  documentIds: ['doc1', 'doc2']
});

interface FetchDocumentsRequest {
  organizationId?: string;
  documentIds?: string[];
  folderId?: string;
  allDocuments?: boolean;
}

interface FetchDocumentsResponse {
  data: Record<string, DocumentMetadata> | null;
  nextPageToken: string;
}
```
</Tab>
<Tab title="Other Frameworks">
```js
// Get all documents for a specific folder
Velt.fetchDocuments({
  organizationId: 'org1', 
  folderId: 'folder1',
  allDocuments: true
});

// Get specific documents by IDs
Velt.fetchDocuments({
docElement.fetchDocuments({
  organizationId: 'org1',
  documentIds: ['doc1', 'doc2']
});

interface FetchDocumentsRequest {
  organizationId?: string;
  documentIds?: string[];
  folderId?: string;
  allDocuments?: boolean;
}

interface FetchDocumentsResponse {
  data: Record<string, DocumentMetadata> | null;
  nextPageToken: string;
}
```
</Tab>
</Tabs>

- [**Comments**]: Added a new API to fetch comment annotations by organizationId, folderId or documentIds with pagination and filtering options. This is different from the existing subscription API which susbcribes to realtime changes to the comments data.
<Tabs>
<Tab title="React / Next.js">
```jsx
// Get all annotations for a specific folder
const commentElement = client.getCommentElement();
commentElement.fetchCommentAnnotations({
  organizationId: 'org1', 
  folderId: 'folder1',
  allDocuments: true
});

// Get annotations for specific documents
const commentElement = client.getCommentElement();
commentElement.fetchCommentAnnotations({
  organizationId: 'org1',
  documentIds: ['doc1', 'doc2']
});

interface FetchCommentAnnotationsRequest {
  createdAfter?: number;
  createdBefore?: number;
  updatedAfter?: number;
  updatedBefore?: number;
  statusIds?: string[];
  order?: 'asc' | 'desc';
  pageToken?: string;
  allDocuments?: boolean;
  pageSize?: number;
  organizationId?: string;
  locationId?: string;
  documentIds?: string[];
  folderId?: string;
}

interface FetchCommentAnnotationsResponse {
  data: Record<string, CommentAnnotation[]> | null;
  nextPageToken: string;
}
```
</Tab>
<Tab title="Other Frameworks">
```js
// Get all annotations for a specific folder
const commentElement = Velt.getCommentElement();
commentElement.fetchCommentAnnotations({
  organizationId: 'org1', 
  folderId: 'folder1',
  allDocuments: true
});

// Get annotations for specific documents
const commentElement = Velt.getCommentElement();
commentElement.fetchCommentAnnotations({
  organizationId: 'org1',
  documentIds: ['doc1', 'doc2']
});

interface FetchCommentAnnotationsRequest {
  createdAfter?: number;
  createdBefore?: number;
  updatedAfter?: number;
  updatedBefore?: number;
  statusIds?: string[];
  order?: 'asc' | 'desc';
  pageToken?: string;
  allDocuments?: boolean;
  pageSize?: number;
  organizationId?: string;
  locationId?: string;
  documentIds?: string[];
  folderId?: string;
}

interface FetchCommentAnnotationsResponse {
  data: Record<string, CommentAnnotation[]> | null;
  nextPageToken: string;
}
```
</Tab>
</Tabs>
</Update>



<Update label="4.0.0-beta.21" description="Feb 11 2025">

### Features
- [**Self-hosting**] You can now self-host your user PII metadata.
  - Send only userId instead of full user object and a client side data provider.
  - Components will automatically fetch the user details from the provider and hydrate the user object.
  - The metadata will not be sent to Velt servers.

<Tabs>
<Tab title="React / Next.js">
``` jsx

const fetchUsersFromDB = async (userIds) => {
    // Fetch users from your DB
    const usersData = await getUsersFromYourDB(userIds);
    return formatUsersToRecord(usersData);
};

const formatUsersToRecord = (users) => {
    // Format users array into a Record object with userId as key and user data as value
    return users.reduce((record, user) => {
        record[user.userId] = {
            userId: user.userId,
            name: user.name,
            // any other fields
        };
        return record;
    }, {});
};

<VeltProvider 
    apiKey='YOUR_API_KEY'
    userDataProvider={{
        getUsers: fetchUsersFromDB
    }}
>
</VeltProvider>

```
</Tab>
<Tab title="Other Frameworks">
``` js

Velt.setUserDataProvider({
    getUsers: fetchUsersFromDB
});

function fetchUsersFromDB(userIds) {
    // Fetch users from your DB
    const usersData = getUsersFromYourDB(userIds);
    return formatUsersToRecord(usersData);
}

function formatUsersToRecord(users) {
    // Format users array into a Record object with userId as key and user data as value
    return users.reduce((record, user) => {
        record[user.userId] = {
            userId: user.userId,
            name: user.name,
            // any other fields
        };
        return record;
    }, {});
}

```
</Tab>
</Tabs>


### Improvements
- [**Core**]: Added core performance improvements throughout the SDK.
- [**Recorder**]: Added new API methods to get the recorded data.

<Tabs>
<Tab title="React / Next.js">
``` jsx
const recorderElement = client.getRecorderElement();
await recorderElement.getRecordingData({
    recorderIds: ['RECORDER_ID']
});
```
</Tab>
<Tab title="Other Frameworks">
``` js
const recorderElement = Velt.getRecorderElement();
await recorderElement.getRecordingData({
    recorderIds: ['RECORDER_ID']
});
```
</Tab>
</Tabs>

- [**Recorder**] Added missing props to disable shadow DOM for recorder components in React SDK.
```jsx
<VeltRecorderNotes shadowDom={false} />
<VeltRecorderTool shadowDom={false} />
<VeltRecorderPlayer shadowDom={false} />
```

</Update>


<Update label="4.0.0-beta.20" description="Feb 10 2025">

### Bug Fixes
- [**Recorder**]: Fixed Safari recording compatibility issues across some macOS versions.

</Update>

<Update label="4.0.0-beta.19" description="Jan 31 2025">
### Features
- [**Core**]: Added support for React v19 in `sdk-react` library.

### Improvements
- [**Authentication**]: Made `organizationId` mandatory in `identify` method.
- [**New Accounts**]: New accounts or API keys will have advanced queries turned on by default.

### Bug Fixes
- [**Notifications**]: Fixed an issue where notifications were not working when organizationId was not set.
- [**REST API**]: Fixed an issue where the REST API for adding or updating organizations and documents did not allow custom fields in metadata.

</Update>


<Update label="4.0.0-beta.18" description="Jan 30 2025">

### Improvements
- [**Comments**]: Improved comments performance with optimistic local-first reads and writes.
- [**Notifications**]: Added `documentMetadata` object in the properties that are sent to SendGrid for emails.

### Bug Fixes
- [**Comments**]: Fixed an issue where custom metadata added to a comment using `addContext` was not sent to the first notification event (`newlyAdded`).

</Update>

<Update label="4.0.0-beta.17" description="Jan 29 2025">

### Features

- [**Comments**]: Added a `transcriptionDone` event callback when recording transcription is done.

<Tabs>
<Tab title="React / Next.js">

**Using Hooks:**
```jsx
const onTranscriptionDone = useRecorderEventCallback('transcriptionDone');

useEffect(() => {
    console.log(onTranscriptionDone);
}, [onTranscriptionDone])

```

**Using API:**
```jsx
const recorderElement = client.getRecorderElement();

recorderElement.on('transcriptionDone').subscribe((data) => {
	console.log('transcriptionDone', data);
});

```

</Tab>
<Tab title="Other Frameworks">
  **Using API:**
```js
const recorderElement = Velt.getRecorderElement();

recorderElement.on('transcriptionDone').subscribe((data) => {
	console.log('transcriptionDone', data);
});

```
</Tab>
</Tabs>

### Improvements
- [**Comments**]: Disabled @here in the contacts dropdown by default. You can turn it on using [this](/async-collaboration/comments/customize-behavior#enableathere).

### Bug Fixes
- [**Comments**]: Removed virtual scroll from autocomplete panel and removed fixed height. This was causing weird UI issues. We are rewriting the autocomplete panel with virtual scroll.
- [**Comments**]: Fixed an issue where horizontal scroll was visible on sidebar in some scenarios.
- [**Comments**]: Fixed an issue where the `shadowDom` prop was not passed down to page mode composer in comment sidebar.
- [**Comments**]: Fixed an issue where `sortData` prop was not working in comments sidebar.

</Update>

<Update label="4.0.0-beta.16" description="Jan 28 2025">

### Bug Fixes
- [**Comments**]: Fixed an issue where comments was not working for fresh documents if the advanced queries option wasn't enabled. Note this is mandatory for all versions of v4 SDK.
- [**Comments**]: Fixed an issue where [updateContactList](/async-collaboration/comments/customize-behavior#updatecontactlist) was not working.
- [**Comments**]: Fixed an issue where in inline comments, the resolve button was visible for all messages in a thread.

</Update>

<Update label="4.0.0-beta.15" description="Jan 24 2025">

### Features
- [**Self-hosting**] You can now self-host your user PII metadata.
  - Send only userId instead of full user object and a client side data provider.
  - Components will automatically fetch the user details from the provider and hydrate the user object.
  - The metadata will not be sent to Velt servers.

<Tabs>
<Tab title="React / Next.js">
``` jsx

const fetchUsersFromDB = async (userIds) => {
    // Fetch users from your DB
    const usersData = await getUsersFromYourDB(userIds);
    return formatUsersToRecord(usersData);
};

const formatUsersToRecord = (users) => {
    // Format users array into a Record object with userId as key and user data as value
    return users.reduce((record, user) => {
        record[user.userId] = {
            userId: user.userId,
            name: user.name,
            // any other fields
        };
        return record;
    }, {});
};

<VeltProvider 
    apiKey='YOUR_API_KEY'
    userDataProvider={{
        getUsers: fetchUsersFromDB
    }}
>
</VeltProvider>

```
</Tab>

<Tab title="Other Frameworks">
``` js

Velt.setUserDataProvider({
    getUsers: fetchUsersFromDB
});

function fetchUsersFromDB(userIds) {
    // Fetch users from your DB
    const usersData = getUsersFromYourDB(userIds);
    return formatUsersToRecord(usersData);
}

function formatUsersToRecord(users) {
    // Format users array into a Record object with userId as key and user data as value
    return users.reduce((record, user) => {
        record[user.userId] = {
            userId: user.userId,
            name: user.name,
            // any other fields
        };
        return record;
    }, {});
}

```
</Tab>
</Tabs>


### Improvements
- [**Core**]: Added core performance improvements throughout the SDK.
- [**Recorder**]: Added new API methods to get the recorded data.

<Tabs>
<Tab title="React / Next.js">
``` jsx
const recorderElement = client.getRecorderElement();
await recorderElement.getRecordingData({
    recorderIds: ['RECORDER_ID']
});
```
</Tab>
<Tab title="Other Frameworks">
``` js
const recorderElement = Velt.getRecorderElement();
await recorderElement.getRecordingData({
    recorderIds: ['RECORDER_ID']
});
```
</Tab>
</Tabs>

- [**Recorder**] Added missing props to disable shadow DOM for recorder components in React SDK.
```jsx
<VeltRecorderNotes shadowDom={false} />
<VeltRecorderTool shadowDom={false} />
<VeltRecorderPlayer shadowDom={false} />
```

</Update>


<Update label="4.0.0-beta.14" description="Jan 20 2025">

### Bug Fixes
- [**Recorder**]: Fixed Safari recording compatibility issues across some macOS versions.

</Update>

<Update label="4.0.0-beta.13" description="Jan 13 2025">
### Features
- [**Core**]: Added support for React v19 in `sdk-react` library.

### Improvements
- [**Authentication**]: Made `organizationId` mandatory in `identify` method.
- [**New Accounts**]: New accounts or API keys will have advanced queries turned on by default.

### Bug Fixes
- [**Notifications**]: Fixed an issue where notifications were not working when organizationId was not set.
- [**REST API**]: Fixed an issue where the REST API for adding or updating organizations and documents did not allow custom fields in metadata.

</Update>


<Update label="4.0.0-beta.12" description="Jan 10 2025">

### Improvements
- [**Comments**]: Improved comments performance with optimistic local-first reads and writes.
- [**Notifications**]: Added `documentMetadata` object in the properties that are sent to SendGrid for emails.

### Bug Fixes
- [**Comments**]: Fixed an issue where custom metadata added to a comment using `addContext` was not sent to the first notification event (`newlyAdded`).

</Update>

<Update label="4.0.0-beta.11" description="Jan 6 2025">
### Bug Fixes
- [**Comments**]: Fixed an issue with `getCommentAnnotationsCount` API when filtering by specific document IDs in the query.
</Update>

<Update label="4.0.0-beta.10" description="Dec 24 2024">
### Improvements
- [**Security**]: Merged security patch in the React package

### Bug Fixes
- [**Recorder**]: Fixed an issue where the floating recording player was visible for threaded recorder notes
- [**Comments**]: Fixed an issue where the sidebar button border color was using light mode colors in dark mode
</Update>


<Update label="4.0.0-beta.9" description="Dec 19 2024">
## New APIs

### 1. setDocuments
- Set multiple documents at the same time. You can specify 30 documents at a time.
- The first document in the list will be considered as the root document.
- For features like comments, notifications, recorder, reactions etc. you will be able to read and write to multiple documents at the same time.
- For features like cursors, presence, huddle, live state sync etc. it will default to the root document.
- Sidebar will automatically show data from all the documents.

- Params:
  - `documents`: [Document[]](/api-reference/sdk/models/data-models#document)
  - `options?`: [SetDocumentsRequestOptions](/api-reference/sdk/models/data-models#setdocumentsrequestoptions)

<Tabs>
<Tab title="React / Next.js">

**Using Hooks:**
``` jsx
const documents = [
  {
    id: 'document-1',
    metadata: {
      documentName: 'Document 1'
    }
  },
  {
    id: 'document-2',
    metadata: {
      documentName: 'Document 2'
    }
  }
];
const { setDocuments } = useSetDocuments();
setDocuments(documents);
```

**Using API:**
```jsx
const documents = [
  {
    id: 'document-1',
    metadata: {
      documentName: 'Document 1'
    }
  },
  {
    id: 'document-2',
    metadata: {
      documentName: 'Document 2'
    }
  }
];
client.setDocuments(documents);
```

</Tab>
<Tab title="Other Frameworks">
  **Using API:**
```js
const documents = [
  {
    id: 'document-1',
    metadata: {
      documentName: 'Document 1'
    }
  },
  {
    id: 'document-2',
    metadata: {
      documentName: 'Document 2'
    }
  }
];
Velt.setDocuments(documents);
```
</Tab>
</Tabs>


### 2. getCommentAnnotations
- Get all the comment annotations for all the specified documents.
- You can specify 30 documents at a time.
- If you don't specify any query, it will return data from the documents specified in the `setDocuments` method.

<Tabs>
<Tab title="React / Next.js">

**Using Hooks:**
```jsx
const { data } = useGetCommentAnnotations(query);
// initial data value will be null while the request is in progress
```

**Using API:**
```jsx
const commentElement = client.getCommentElement();
commentElement.getCommentAnnotations(query).subscribe((response) => {
  console.log(response.data);
  // initial data value will be null while the request is in progress
});
```

``` jsx
CommentRequestQuery {
  documentIds!: string[],
  locationIds!: string[],
  statusIds!: string[]
};

GetCommentAnnotationsResponse {
  data: Record<string, CommentAnnotation[]> | null; // Key: documentId, Value: CommentAnnotation[]
};
```

</Tab>

<Tab title="Other Frameworks">
  **Using API:**
```js
const commentElement = Velt.getCommentElement();
commentElement.getCommentAnnotations(query).subscribe((response) => {
  console.log(response.data);
  // initial data value will be null while the request is in progress
});
```

``` js
CommentRequestQuery {
  documentIds!: string[],
  locationIds!: string[],
  statusIds!: string[]
};

GetCommentAnnotationsResponse {
  data: Record<string, CommentAnnotation[]>; // Key: documentId, Value: CommentAnnotation[]
};
```
</Tab>
</Tabs>

### 3. getCommentAnnotationsCount
- Get the total and unread comment annotations count of all the comment annotations for all the specified documents.
- You can specify 30 documents at a time.
- If you don't specify any query, it will return data from the documents specified in the `setDocuments` method.

<Tabs>
<Tab title="React / Next.js">

**Using Hooks:**
```jsx
const { data } = useCommentAnnotationsCount(query);
// initial data value will be null while the request is in progress
```

**Using API:**
```jsx
const commentElement = client.getCommentElement();
commentElement.getCommentAnnotationsCount(query).subscribe((response) => {
  console.log(response.data);
  // initial data value will be null while the request is in progress
});
```

``` jsx
CommentRequestQuery {
  documentIds!: string[],
  locationIds!: string[],
  statusIds!: string[]
};

GetCommentAnnotationsCountResponse {
  data: Record<string, CommentAnnotationsCount> | null; // Key: documentId, Value: CommentAnnotationsCount
};

CommentAnnotationsCount {
  unread: number,
  total: number
}

```

</Tab>

<Tab title="Other Frameworks">
  **Using API:**
```js
const commentElement = Velt.getCommentElement();
commentElement.getCommentAnnotationsCount(query).subscribe((response) => {
  console.log(response.data);
});
```

``` js
CommentRequestQuery {
  documentIds!: string[],
  locationIds!: string[],
  statusIds!: string[]
};

GetCommentAnnotationsCountResponse {
  data: Record<string, CommentAnnotationsCount>; // Key: documentId, Value: CommentAnnotationsCount
};

CommentAnnotationsCount {
  unread: number,
  total: number
}

```
</Tab>
</Tabs>

### 4. Read/Write data from multiple documents on the same page
- If you want to display data (eg: comments) from multiple documents on the same page, you can add `data-velt-document-id` attribute to the container that contains the `document`.
- It will be used to identify which part of the DOM belongs to which document.
```html
<div class="document-container" data-velt-document-id="document-1">
  ...
</div>

<div class="document-container" data-velt-document-id="document-2">
  ...
</div>

<div class="document-container" data-velt-document-id="document-3">
  ...
</div>
```

## Other updates

### New Features
- [**Comments**]: Added support for Status Filter in Comments Sidebar's main filter menu:
  - By default, the status filter is disabled in the main filter menu.
  - Currently, it doesn't support grouping.
  - Added Wireframe support for this. [Learn more](/ui-customization/features/async/comments/comments-sidebar/subcomponents/filter/subcomponents/status).
  - If you were using wireframes before, you will add this to your wireframes.

<Tabs>
<Tab title="React / Next.js">
```jsx
const filterConfig = {
  status: {
    enable: true,
    name: "Status",
    multiSelection: true,
  }
};

<VeltCommentsSidebar filterConfig={filterConfig} />
```

</Tab>

<Tab title="Other Frameworks">
```jsx
const filterConfig = {
  status: {
    enable: true,
    name: "Status",
    multiSelection: true,
  }
};

const commentsSidebar = document.querySelector(`velt-comments-sidebar`);
commentsSidebar?.setAttribute("filter-config",JSON.stringify(filterConfig));
```
</Tab>
</Tabs>


### Bug Fixes
- [**Comments**]: Fixed an issue where empty state visibility was not visible when filter is applied and grouping was disabled.
- [**Comments**]: Fixed an issue where users could click on the comment in the sidebar and navigate to comments when they shouldn't.

</Update>
