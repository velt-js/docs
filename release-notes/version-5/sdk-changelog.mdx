---
title: "Velt SDK Changelog"
rss: true
description: Release Notes of changes added to the core Velt SDK
---

### Libraries
- `@veltdev/react`
- `@veltdev/client`
- `@veltdev/sdk`


<Update label="5.0.0-beta.10" description="February 3, 2026">

### New Features

- [**Comments**]: Added `batchedPerDocument` mode for `getCommentAnnotationsCount()` that reduces Firestore listeners by up to 80% while maintaining per-document granularity. For dashboards with 100 documents, this reduces listeners from 100 to ~20.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using hook
const commentElement = useCommentUtils();
const counts = commentElement.getCommentAnnotationsCount({
  documentIds: ['doc-1', 'doc-2', ..., 'doc-100'],
  batchedPerDocument: true
});

// Using API method
const client = useVeltClient();
const commentElement = client.getCommentElement();
const counts = commentElement.getCommentAnnotationsCount({
  documentIds: ['doc-1', 'doc-2', ..., 'doc-100'],
  batchedPerDocument: true,
  debounceMs: 5000
});
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const commentElement = Velt.getCommentElement();
const counts = commentElement.getCommentAnnotationsCount({
  documentIds: ['doc-1', 'doc-2', ..., 'doc-100'],
  batchedPerDocument: true
});

const countsWithDebounce = commentElement.getCommentAnnotationsCount({
  documentIds: ['doc-1', 'doc-2', ..., 'doc-100'],
  batchedPerDocument: true,
  debounceMs: 5000
});
</script>
```
</Tab>
</Tabs>

**Return Format:**
```typescript
{
  data: {
    "doc-1": { total: 10, unread: 2 },
    "doc-2": { total: 15, unread: 5 }
  }
}
```

</Update>


<Update label="5.0.0-beta.9" description="January 31, 2026">

### New Features

- [**Comments**]: Added draft mode for comment dialogs that preserves partial comments when the dialog is closed. Draft content includes composer text, attachments, and recordings. [Learn more](/async-collaboration/comments/customize-behavior#draftmode)

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using hook
const commentElement = useCommentUtils();
commentElement.enableDraftMode();

// Using API method
const client = useVeltClient();
const commentElement = client.getCommentElement();
commentElement.enableDraftMode();
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const commentElement = Velt.getCommentElement();
commentElement.enableDraftMode();
</script>
```
</Tab>
</Tabs>

**Behavior:**
- Partial comments are saved as drafts with `isDraft: true` when dialog closes.
- Dialog shows shake animation on first click outside if there's unsaved content.
- Draft attribute `data-velt-annotation-draft` is set on dialogs with unsaved content.

### Bug Fixes
- [**Comments**]: Fixed draft mode not working properly. Draft content is now preserved when the dialog is closed and the shake animation now works as expected.

- [**Comments**]: Fixed context property access in `velt-data` elements. Templates can now access context properties using `{context.propertyName}` patterns.

- [**Comments**]: Fixed edit mode state persisting after dialog close. Reopening the dialog now shows the normal view instead of the edit composer.

- [**Comments**]: Fixed text reappearing when using select-all-and-delete in edit mode composer. Users can now properly delete all text in edit mode.

- [**Comments**]: Fixed links in comment body not clickable. Clicking links in comment text now opens them in a new tab.

- [**Comments**]: Fixed paste handling. Pasting a URL over selected text creates a hyperlink, multiline text preserves line breaks, and images paste as attachments.

- [**Comments**]: Fixed ghost comment banners not displaying. "Comment is syncing..." messages now properly show while annotation data is loading.

- [**Comments**]: Fixed priority selection not working on new annotations. Users can now set priority before submitting the first comment.

- [**Comments**]: Fixed email detection after @ symbol. Typing `@user@example.com` and pressing space now creates an email mention.

- [**Comments**]: Fixed recording in progress flag not clearing. Dialog now properly closes on click outside after recording finishes.

- [**Comments**]: Fixed links and @here mentions not highlighted in comment text. URLs are now styled as clickable links and @here mentions are properly highlighted.

</Update>


<Update label="5.0.0-beta.8" description="January 30, 2026">

### New Features

- [**Comments**]: Introducing Private Comments feature: Added `updateVisibility()` method to programmatically set comment access (public, organization, or private). [Learn more](/async-collaboration/comments/customize-behavior#updatevisibility)

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using hook
const commentElement = useCommentUtils();

// Set comment to organization-only
commentElement.updateVisibility({
  annotationId: "annotationId",
  type: 'organization',
  organizationId: 'org-123'
});

// Set comment to private (specific users)
commentElement.updateVisibility({
  annotationId: "annotationId",
  type: 'self',
  userIds: ['user-1', 'user-2']
});

// Set comment to public
commentElement.updateVisibility({
  annotationId: "annotationId",
  type: 'public'
});

// Using API method
const client = useVeltClient();
const commentElement = client.getCommentElement();
commentElement.updateVisibility({
  annotationId: "annotationId",
  type: 'organization',
  organizationId: 'org-123'
});
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const commentElement = Velt.getCommentElement();

// Set comment to organization-only
commentElement.updateVisibility({
  annotationId: "annotationId",
  type: 'organization',
  organizationId: 'org-123'
});

// Set comment to private (specific users)
commentElement.updateVisibility({
  annotationId: "annotationId",
  type: 'self',
  userIds: ['user-1', 'user-2']
});

// Set comment to public
commentElement.updateVisibility({
  annotationId: "annotationId",
  type: 'public'
});
</script>
```
</Tab>
</Tabs>

### Bug Fixes

- [**Comments**]: Fixed mentioned users not receiving notifications. Users @mentioned in comments now correctly receive notifications.

- [**Comments**]: Fixed notification action type validation. Clients only receive data for valid event types.

- [**Comments**]: Fixed status reset when deleting comments. Status now only resets when current status is terminal.

</Update>


<Update label="5.0.0-beta.7" description="January 28, 2026">

### New Features

- [**Comments**]: Added `addCommentAnnotationDraft` event to dynamically set context when creating comment annotations. Triggered before `addCommentAnnotation` event clicks on the comment tool and the composer is rendered.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using hook
const addCommentAnnotationDraftEvent = useCommentEventCallback('addCommentAnnotationDraft');

useEffect(() => {
    if (addCommentAnnotationDraftEvent?.addContext) {
        addCommentAnnotationDraftEvent.addContext({
            questionId: '123',
            questionText: 'What is the capital of France?',
        });
    }
}, [addCommentAnnotationDraftEvent]);

// Using API method
const client = useVeltClient();
const commentElement = client.getCommentElement();
commentElement.on('addCommentAnnotationDraft').subscribe((event) => {
    if (event?.addContext) {
        event.addContext({
            questionId: '123',
            questionText: 'What is the capital of France?',
        });
    }
});
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const commentElement = Velt.getCommentElement();
commentElement.on('addCommentAnnotationDraft').subscribe((event) => {
    if (event?.addContext) {
        event.addContext({
            questionId: '123',
            questionText: 'What is the capital of France?',
        });
    }
});
</script>
```
</Tab>
</Tabs>

### Improvements

- [**Comments**]: Added `setContextProvider` method to set a global context provider for all comment annotations. Also added `useSetContextProvider` hook for React applications.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using hook
import { useCallback, useEffect } from 'react';
import { useSetContextProvider } from '@veltdev/react';

const contextProvider = useCallback((documentId, location) => {
    return {
        questionId: '123',
        questionText: 'What is the capital of France?',
    }
}, []);

const { setContextProvider } = useSetContextProvider();

useEffect(() => {
    if (setContextProvider && contextProvider) {
        setContextProvider(contextProvider);
    }
}, []);

// Using API method
const client = useVeltClient();
const commentElement = client.getCommentElement();
commentElement.setContextProvider((documentId, location) => {
    return {
        questionId: '123',
        questionText: 'What is the capital of France?',
    }
});
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const commentElement = Velt.getCommentElement();
commentElement.setContextProvider((documentId, location) => {
    return {
        questionId: '123',
        questionText: 'What is the capital of France?',
    }
});
</script>
```
</Tab>
</Tabs>

</Update>


<Update label="5.0.0-beta.6" description="January 28, 2026">

### Bug Fixes

- [**Core**]: Fixed package integrity issue in v5.0.0-beta.5.

</Update>


<Update label="5.0.0-beta.5" description="January 28, 2026">

### Bug Fixes

- [**Comments**]: Fixed page mode and multi-thread annotation ID not found error. Page mode and multi-thread comments now work as expected.

- [**Comments**]: Fixed `updateOverlayPosition` function not triggering. Comment dialog now opens in the correct position.

- [**Comments**]: Fixed unread status issues in inline and focused thread modes. Annotations are now marked as read when opened or clicked.

- [**Comments**]: Fixed three-dot menu not visible in sidebar.

- [**Comments**]: Fixed composer not being focused when opened.

- [**Comments**]: Fixed comments navigating on click. Comments now only navigate when the navigation button is clicked.

</Update>


<Update label="5.0.0-beta.4" description="January 23, 2026">

### Bug Fixes

- [**Comments**]: Fixed `lastUpdated` timestamp not being updated when changing context in comment annotation via SDK. Ensures context updates are properly synced to other users.

</Update>


<Update label="5.0.0-beta.3" description="January 22, 2026">

### Improvements

- [**Core**]: Added robustness to initialization when `VeltProvider` was re-rendered multiple times over a slow network.


### Bug Fixes

- [**Comments**]: Refactored `submitComment` method to fix resolver issue for `velt-comment-composer`. Now follows the standard comment submission flow.

- [**Comments**]: Fixed unread status not updating correctly in bottom sheet. This was a regression in v5.

- [**Comments**]: Fixed navigation button not working properly. This was a regression in v5.

- [**Comments**]: Fixed disable recording option not working in `velt-comment-composer`. This was a regression in v5.

</Update>


<Update label="5.0.0-beta.2" description="January 22, 2026">

### New Features

- [**Core**]: Added `globalStyles` option to control whether Velt's global CSS is loaded. Set to `false` to disable default styles when implementing custom theming.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using VeltProvider
<VeltProvider apiKey='API_KEY' config={{
    globalStyles: false
}}>
    {/* Your app content */}
</VeltProvider>

// Using API method
const client = useVeltClient();
client.initConfig('API_KEY', {
  globalStyles: false
});
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
Velt.initConfig('API_KEY', {
  globalStyles: false
});
</script>
```
</Tab>
</Tabs>

- [**Comments**]: Added `submitComment(targetElementId)` method to programmatically trigger comment submission. Enables custom buttons or keyboard shortcuts for submitting comments. [Learn more](/async-collaboration/comments/customize-behavior#submitcomment)

<Tabs>
<Tab title="React / Next.js">
```jsx

<VeltCommentComposer targetElementId="composer-1" />
<VeltCommentDialogComposer targetElementId="composer-2" />

// Using hook
const commentElement = useCommentUtils();
commentElement.submitComment('composer-1');

// Using API method
const client = useVeltClient();
const commentElement = client.getCommentElement();
commentElement.submitComment('composer-1');
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comment-composer target-element-id="composer-1"></velt-comment-composer>
<velt-comment-dialog-composer target-element-id="composer-2"></velt-comment-dialog-composer>

<button onclick="submitComment('composer-1')">Send 1</button>
<button onclick="submitComment('composer-2')">Send 2</button>

<script>
  function submitComment(targetElementId) {
    const commentElement = Velt.getCommentElement();
    commentElement.submitComment(targetElementId);
  }
</script>
```
</Tab>
</Tabs>

- [**Comments**]: Added `placeholder` prop to customize input placeholder text in comment composer. Overrides default placeholders. [Learn more](/ui-customization/features/async/comments/standalone-components/comment-composer#placeholder)

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltCommentComposer placeholder="Share your thoughts..." />
<VeltCommentDialogComposer placeholder="Add a comment..." />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comment-composer placeholder="Share your thoughts..."></velt-comment-composer>
<velt-comment-dialog-composer placeholder="Add a comment..."></velt-comment-dialog-composer>
```
</Tab>
</Tabs>

- [**Comments**]: Added `composerTextChange` event that fires when text changes in any comment composer. Enables features like auto-save drafts, character counters, or real-time validation. [Learn more](/async-collaboration/comments/customize-behavior#event-subscription)

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using hook
const composerTextChangeEvent = useCommentEventCallback('composerTextChange');
useEffect(() => {
    if (composerTextChangeEvent) {
        console.log('Text changed:', composerTextChangeEvent.text);
    }
}, [composerTextChangeEvent]);

// Using API method
const client = useVeltClient();
const commentElement = client.getCommentElement();
commentElement.on('composerTextChange').subscribe((event) => {
    console.log('Text changed:', event.text);
});
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const commentElement = Velt.getCommentElement();
commentElement.on('composerTextChange').subscribe((event) => {
    console.log('Text changed:', event.text);
});
</script>
```
</Tab>
</Tabs>

</Update>


<Update label="5.0.0-beta.1" description="January 21, 2026">

### Bug Fixes

#### Comment Dialog Primitives

Released 115+ primitive components for building custom comment dialogs. Each subcomponent can now be used independently without requiring the full dialog structure.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Pattern 1: ID-Based (Standalone)
<VeltCommentDialogHeader annotationId="abc123" />
<VeltCommentDialogComposer annotationId="abc123" />

// Pattern 2: Context Wrapper
<VeltCommentDialogContextWrapper annotationId="abc123">
  <VeltCommentDialogHeader />
  <VeltCommentDialogComposer />
  <VeltCommentDialogBody />
</VeltCommentDialogContextWrapper>
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Pattern 1: ID-Based (Standalone) -->
<velt-comment-dialog-header annotation-id="abc123"></velt-comment-dialog-header>
<velt-comment-dialog-composer annotation-id="abc123"></velt-comment-dialog-composer>

<!-- Pattern 2: Context Wrapper -->
<velt-comment-dialog-context-wrapper annotation-id="abc123">
  <velt-comment-dialog-header></velt-comment-dialog-header>
  <velt-comment-dialog-composer></velt-comment-dialog-composer>
  <velt-comment-dialog-body></velt-comment-dialog-body>
</velt-comment-dialog-context-wrapper>
```
</Tab>
</Tabs>

**Available Components:**
- **Header/Body**: Header, Body, CloseButton
- **Thread**: ThreadCard with Avatar, Name, Time, Message, Reactions, Recordings, Reply, Options, and more
- **Composer**: Composer, ComposerInput, ComposerActionButton, ComposerAttachmentButton, ComposerRecorderButton, ComposerRecorderPlayer, ComposerFiles
- **Dropdowns**: StatusDropdown, PriorityDropdown, OptionsDropdown, CustomAnnotationDropdown (each with full sub-component breakdown)
- **Additional**: ReplyAvatars, AssigneeBanner, ResolveButton, UnresolveButton, CopyLink, DeleteButton, PrivateBanner, NavigationButton, and 90+ more

[View full documentation â†’](/ui-customization/features/async/comments/comment-dialog-primitives/overview) | [API Methods](/api-reference/sdk/api/api-methods#comment-dialog-primitives) | [Data Models](/api-reference/sdk/models/data-models#comment-dialog-primitives)

</Update>
