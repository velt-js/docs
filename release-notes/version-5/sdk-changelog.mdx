---
title: "Velt SDK Changelog"
rss: true
description: Release Notes of changes added to the core Velt SDK
---

### Libraries
- `@veltdev/react`
- `@veltdev/client`
- `@veltdev/sdk`


<Update label="5.0.0-beta.9" description="January 31, 2026">

### New Features

- [**Comments**]: Added draft mode that preserves partial comments when dialog closes. Saves composer text, attachments, and recordings to prevent data loss.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using hook
const commentElement = useCommentUtils();
commentElement.enableDraftMode();

// Using API method
const client = useVeltClient();
const commentElement = client.getCommentElement();
commentElement.enableDraftMode();
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const commentElement = Velt.getCommentElement();
commentElement.enableDraftMode();
</script>
```
</Tab>
</Tabs>

**Behavior:**
- Partial comments saved as drafts with `isDraft: true` when dialog closes
- Dialog shows shake animation on first click outside if unsaved content exists
- Draft attribute `data-velt-annotation-draft` set on dialogs with unsaved content

### Improvements

- [**Comments**]: Refactored `@-mention` contact selection to use static imports instead of dynamic imports. Code is cleaner and more maintainable.

### Bug Fixes

- [**Comments**]: Fixed context property access for `velt-data` elements. Templates can now correctly use `{context.propertyName}` patterns.

- [**Comments**]: Fixed edit mode state preserved after closing dialog by clicking outside. Edit mode now properly clears when dialog is destroyed.

- [**Comments**]: Fixed "select all and delete" not working in edit mode composer. Text deletion now works correctly without content reappearing.

- [**Comments**]: Fixed links in comment body not clickable. Clicking links now properly opens them in a new tab.

- [**Comments**]: Fixed paste handling missing features. URL + selected text now creates hyperlinks, line breaks preserved, images paste as attachments.

- [**Comments**]: Fixed ghost comments not showing for new contexts. "Comment is syncing..." banners now display correctly while annotation data loads.

- [**Comments**]: Fixed priority change not working for new annotations. Priority can now be set before submitting first comment.

- [**Comments**]: Fixed email detection after `@` symbol. Typing `@user@example.com` and pressing space now creates email mention.

- [**Comments**]: Fixed dialog not closing after recording finishes. Recording-in-progress flag now clears correctly when recording completes.

- [**Comments**]: Fixed links and `@here` mentions not highlighted. URLs now styled as clickable links, `@here` mentions properly highlighted.

</Update>

<Update label="5.0.0-beta.8" description="January 30, 2026">

### New Features

#### Comment Visibility Control

Added `updateVisibility()` method to programmatically set comment access (public, organization, or private). [Learn more](/api-reference/sdk/api/api-methods#updatevisibility)

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using hook
const commentElement = useCommentUtils();

// Set comment to organization-only
commentElement.updateVisibility(annotationId, {
  type: 'organization',
  organizationId: 'org-123'
});

// Set comment to private (specific users)
commentElement.updateVisibility(annotationId, {
  type: 'self',
  userIds: ['user-1', 'user-2']
});

// Set comment to public
commentElement.updateVisibility(annotationId, {
  type: 'public'
});

// Using API method
const client = useVeltClient();
const commentElement = client.getCommentElement();
commentElement.updateVisibility(annotationId, {
  type: 'organization',
  organizationId: 'org-123'
});
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const commentElement = Velt.getCommentElement();

// Set comment to organization-only
commentElement.updateVisibility(annotationId, {
  type: 'organization',
  organizationId: 'org-123'
});

// Set comment to private (specific users)
commentElement.updateVisibility(annotationId, {
  type: 'self',
  userIds: ['user-1', 'user-2']
});

// Set comment to public
commentElement.updateVisibility(annotationId, {
  type: 'public'
});
</script>
```
</Tab>
</Tabs>

### Improvements

- [**Self-Hosting**]: Added comprehensive unit, integration, and contract tests for `CommentAnnotationsResolverService`, `ReactionAnnotationsResolverService`, and `AttachmentResolverService`. Tests serve as living documentation of event contracts for self-hosting integrations.

- [**Self-Hosting**]: Created shared test utilities with builder patterns, event assertion helpers, and mock data factories for faster test development.

### Bug Fixes

- [**Comments**]: Fixed mentioned users not receiving notifications. Users @mentioned in comments now correctly receive notifications.

- [**Comments**]: Fixed notification action type validation. Clients only receive data for valid event types.

- [**Comments**]: Fixed status reset when deleting comments. Status now only resets when current status is terminal.

</Update>


<Update label="5.0.0-beta.7" description="January 28, 2026">

### New Features

#### Add Comment Annotation Draft Event

Added `addCommentAnnotationDraft` event to dynamically set context when creating comment annotations. Triggered when a user starts creating a new comment annotation.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using hook
const addCommentAnnotationDraftEvent = useCommentEventCallback('addCommentAnnotationDraft');

useEffect(() => {
    if (addCommentAnnotationDraftEvent?.addContext && typeof addCommentAnnotationDraftEvent.addContext === 'function') {
        addCommentAnnotationDraftEvent.addContext({
            // your context object here
        });
    }
}, [addCommentAnnotationDraftEvent]);

// Using API method
const client = useVeltClient();
const commentElement = client.getCommentElement();
commentElement.on('addCommentAnnotationDraft').subscribe((event) => {
    if (event?.addContext && typeof event.addContext === 'function') {
        event.addContext({
            // your context object here
        });
    }
});
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const commentElement = Velt.getCommentElement();
commentElement.on('addCommentAnnotationDraft').subscribe((event) => {
    if (event?.addContext && typeof event.addContext === 'function') {
        event.addContext({
            // your context object here
        });
    }
});
</script>
```
</Tab>
</Tabs>

### Improvements

#### Context Provider Method

Added `setContextProvider` method to set a global context provider for all comment annotations. Also added `useSetContextProvider` hook for React applications.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using hook
import { useCallback, useEffect } from 'react';
import { useSetContextProvider } from '@veltdev/react';

const contextProvider = useCallback((documentId, location) => {
    return {
        // your context object here
    }
}, []);

const { setContextProvider } = useSetContextProvider();

useEffect(() => {
    if (setContextProvider && contextProvider) {
        setContextProvider(contextProvider);
    }
}, []);

// Using API method
const client = useVeltClient();
const commentElement = client.getCommentElement();
commentElement.setContextProvider((documentId, location) => {
    return {
        // your context object here
    }
});
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const commentElement = Velt.getCommentElement();
commentElement.setContextProvider((documentId, location) => {
    return {
        // your context object here
    }
});
</script>
```
</Tab>
</Tabs>

**Type Definition:**
```typescript
export type CommentContextProviderResponse = CommentContext | null | undefined;

export type CommentContextProvider = (documentId: string, location?: Location) => CommentContextProviderResponse | Promise<CommentContextProviderResponse>;
```

</Update>


<Update label="5.0.0-beta.6" description="January 28, 2026">

### Bug Fixes

- [**Core**]: Fixed integrity issue in 5.0.0-beta.5.

</Update>


<Update label="5.0.0-beta.5" description="January 28, 2026">

### Bug Fixes

- [**Comments**]: Fixed page mode and multi-thread annotation ID not found error. Page mode and multi-thread comments now work as expected.

- [**Comments**]: Fixed `updateOverlayPosition` function not triggering. Comment dialog now opens in the correct position.

- [**Comments**]: Fixed unread status issues in inline and focused thread modes. Annotations are now marked as read when opened or clicked.

- [**Comments**]: Fixed three-dot menu not visible in sidebar.

- [**Comments**]: Fixed composer not being focused when opened.

- [**Comments**]: Fixed comments navigating on click. Comments now only navigate when the navigation button is clicked.

</Update>


<Update label="5.0.0-beta.4" description="January 23, 2026">

### Bug Fixes

- [**Comments**]: Fixed `lastUpdated` timestamp not being updated when changing context in comment annotation via SDK. Ensures context updates are properly synced to other users.

</Update>


<Update label="5.0.0-beta.3" description="January 22, 2026">

### Improvements

- [**Core**]: Fixed initialization issue when `VeltProvider` renders multiple times during slow network conditions. Ensures proper Velt initialization in React SDK.


### Bug Fixes

- [**Comments**]: Refactored `submitComment` method to fix resolver issue for `velt-comment-composer`. Now follows the standard comment submission flow.

- [**Comments**]: Fixed unread status not updating correctly in bottom sheet. Resolves issue from primitives logic migration.

- [**Comments**]: Fixed navigation button not working properly. Resolves issue from primitives logic migration.

- [**Comments**]: Fixed disable recording option not working in `velt-comment-composer`. Resolves issue from primitives logic migration.

</Update>


<Update label="5.0.0-beta.2" description="January 22, 2026">

### New Features

#### Global Styles Configuration

Added `globalStyles` option to control whether Velt's global CSS is loaded. Set to `false` to disable default styles when implementing custom theming.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using VeltProvider
<VeltProvider apiKey='API_KEY' config={{
    globalStyles: false
}}>
    {/* Your app content */}
</VeltProvider>

// Using API method
const client = useVeltClient();
client.initConfig('API_KEY', {
  globalStyles: false
});
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
Velt.initConfig('API_KEY', {
  globalStyles: false
});
</script>
```
</Tab>
</Tabs>

#### Submit Comment Method

Added `submitComment(targetElementId)` method to programmatically trigger comment submission. Enables custom buttons or keyboard shortcuts for submitting comments. [Learn more](/api-reference/sdk/api/api-methods#submitcomment)

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using hook
const commentElement = useCommentUtils();
commentElement.submitComment('composer-1');

// Using API method
const client = useVeltClient();
const commentElement = client.getCommentElement();
commentElement.submitComment('composer-1');
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comment-composer target-element-id="composer-1"></velt-comment-composer>
<velt-comment-dialog-composer target-element-id="composer-2"></velt-comment-dialog-composer>

<button onclick="submitComment('composer-1')">Send 1</button>
<button onclick="submitComment('composer-2')">Send 2</button>

<script>
  function submitComment(targetElementId) {
    const commentElement = Velt.getCommentElement();
    commentElement.submitComment(targetElementId);
  }
</script>
```
</Tab>
</Tabs>

#### Composer Placeholder Customization

Added `placeholder` prop to customize input placeholder text in comment composers. Overrides default context-aware placeholders. [Learn more](/ui-customization/features/async/comments/standalone-components/comment-composer#placeholder)

<Tabs>
<Tab title="React / Next.js">
```jsx
<VeltCommentComposer placeholder="Share your thoughts..." />
<VeltCommentDialogComposer placeholder="Add a comment..." />
```
</Tab>
<Tab title="Other Frameworks">
```html
<velt-comment-composer placeholder="Share your thoughts..."></velt-comment-composer>
<velt-comment-dialog-composer placeholder="Add a comment..."></velt-comment-dialog-composer>
```
</Tab>
</Tabs>

#### Composer Text Change Event

Added `composerTextChange` event that fires when text changes in any comment composer. Enables features like auto-save drafts, character counters, or real-time validation. [Learn more](/async-collaboration/comments/customize-behavior#event-subscription)

<Tabs>
<Tab title="React / Next.js">
```jsx
// Using hook
const composerTextChangeEvent = useCommentEventCallback('composerTextChange');
useEffect(() => {
    if (composerTextChangeEvent) {
        console.log('Text changed:', composerTextChangeEvent.text);
    }
}, [composerTextChangeEvent]);

// Using API method
const client = useVeltClient();
const commentElement = client.getCommentElement();
commentElement.on('composerTextChange').subscribe((event) => {
    console.log('Text changed:', event.text);
});
```
</Tab>
<Tab title="Other Frameworks">
```html
<script>
const commentElement = Velt.getCommentElement();
commentElement.on('composerTextChange').subscribe((event) => {
    console.log('Text changed:', event.text);
});
</script>
```
</Tab>
</Tabs>

</Update>


<Update label="5.0.0-beta.1" description="January 21, 2026">

### Bug Fixes

#### Comment Dialog Primitives

Released 115+ primitive components for building custom comment dialogs. Each subcomponent can now be used independently without requiring the full dialog structure.

<Tabs>
<Tab title="React / Next.js">
```jsx
// Pattern 1: ID-Based (Standalone)
<VeltCommentDialogHeader annotationId="abc123" />
<VeltCommentDialogComposer annotationId="abc123" />

// Pattern 2: Context Wrapper
<VeltCommentDialogContextWrapper annotationId="abc123">
  <VeltCommentDialogHeader />
  <VeltCommentDialogComposer />
  <VeltCommentDialogBody />
</VeltCommentDialogContextWrapper>
```
</Tab>
<Tab title="Other Frameworks">
```html
<!-- Pattern 1: ID-Based (Standalone) -->
<velt-comment-dialog-header annotation-id="abc123"></velt-comment-dialog-header>
<velt-comment-dialog-composer annotation-id="abc123"></velt-comment-dialog-composer>

<!-- Pattern 2: Context Wrapper -->
<velt-comment-dialog-context-wrapper annotation-id="abc123">
  <velt-comment-dialog-header></velt-comment-dialog-header>
  <velt-comment-dialog-composer></velt-comment-dialog-composer>
  <velt-comment-dialog-body></velt-comment-dialog-body>
</velt-comment-dialog-context-wrapper>
```
</Tab>
</Tabs>

**Available Components:**
- **Header/Body**: Header, Body, CloseButton
- **Thread**: ThreadCard with Avatar, Name, Time, Message, Reactions, Recordings, Reply, Options, and more
- **Composer**: Composer, ComposerInput, ComposerActionButton, ComposerAttachmentButton, ComposerRecorderButton, ComposerRecorderPlayer, ComposerFiles
- **Dropdowns**: StatusDropdown, PriorityDropdown, OptionsDropdown, CustomAnnotationDropdown (each with full sub-component breakdown)
- **Additional**: ReplyAvatars, AssigneeBanner, ResolveButton, UnresolveButton, CopyLink, DeleteButton, PrivateBanner, NavigationButton, and 90+ more

[View full documentation â†’](/ui-customization/features/async/comments/comment-dialog-primitives/overview) | [API Methods](/api-reference/sdk/api/api-methods#comment-dialog-primitives) | [Data Models](/api-reference/sdk/models/data-models#comment-dialog-primitives)

</Update>
